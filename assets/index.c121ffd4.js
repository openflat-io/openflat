var Gt=Object.defineProperty;var Kt=(t,e,a)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var $=(t,e,a)=>(Kt(t,typeof e!="symbol"?e+"":e,a),a);import{l as n,a6 as kt,q as l,y as xe,n as te,a5 as ae,aw as le,s as qt,w as G,a9 as ue,a8 as Pt,aK as Jt,a3 as Zt,am as Qt,aN as ea,dl as ta,a2 as dt,t as aa,aJ as ra,m as $e,dm as sa,S as wt,dn as Se,bu as Ye,cQ as ia,dp as ft,c8 as Fe,bv as ge,c9 as na,r as oa,cd as la,ca as mt,bb as De,a$ as Ct,be as Rt,b6 as ua,J as Oe,b3 as St,bf as ca,dq as da,ax as fa,aC as ma,aF as ha,by as ht,b7 as va,bp as pa,cH as ga}from"./index.ec641b5a.js";import{W as ya,T as ba}from"./constants.3556e8ac.js";import{u as Na,e as xa}from"./routes.96a891de.js";import{u as ka}from"./use-login-check.7d6be6b3.js";import{W as Pa}from"./index.81013a66.js";var ke=n.exports.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0});function Ge(t,e,a){return(t-e)/(a-e)}function Ke(t,e,a,r){var s=Ge(e,a,r),i={};switch(t){case"rtl":i.right="".concat(s*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(s*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(s*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(s*100,"%"),i.transform="translateX(-50%)";break}return i}function _e(t,e){return Array.isArray(t)?t[e]:t}var wa="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Handles/Handle.js",Ca=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],_t=n.exports.forwardRef(function(t,e){var a,r,s=t.prefixCls,i=t.value,o=t.valueIndex,d=t.onStartMove,b=t.style,N=t.render,g=t.dragging,k=t.onOffsetChange,v=kt(t,Ca),f=n.exports.useContext(ke),m=f.min,p=f.max,h=f.direction,y=f.disabled,c=f.range,P=f.tabIndex,F=f.ariaLabelForHandle,T=f.ariaLabelledByForHandle,j=f.ariaValueTextFormatterForHandle,R="".concat(s,"-handle"),w=function(W){y||d(W,o)},S=function(W){if(!y){var M=null;switch(W.which||W.keyCode){case le.LEFT:M=h==="ltr"||h==="btt"?-1:1;break;case le.RIGHT:M=h==="ltr"||h==="btt"?1:-1;break;case le.UP:M=h!=="ttb"?1:-1;break;case le.DOWN:M=h!=="ttb"?-1:1;break;case le.HOME:M="min";break;case le.END:M="max";break;case le.PAGE_UP:M=2;break;case le.PAGE_DOWN:M=-2;break}M!==null&&(W.preventDefault(),k(M,o))}},C=Ke(h,i,m,p),D=l("div",{ref:e,className:xe(R,(a={},te(a,"".concat(R,"-").concat(o+1),c),te(a,"".concat(R,"-dragging"),g),a)),style:ae(ae({},C),b),onMouseDown:w,onTouchStart:w,onKeyDown:S,tabIndex:y?null:_e(P,o),role:"slider","aria-valuemin":m,"aria-valuemax":p,"aria-valuenow":i,"aria-disabled":y,"aria-label":_e(F,o),"aria-labelledby":_e(T,o),"aria-valuetext":(r=_e(j,o))===null||r===void 0?void 0:r(i),...v},void 0,!1,{fileName:wa,lineNumber:94,columnNumber:33},this);return N&&(D=N(D,{index:o,prefixCls:s,value:i,dragging:g})),D});_t.displayName="Handle";var Ra="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Handles/index.js",Sa=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],Tt=n.exports.forwardRef(function(t,e){var a=t.prefixCls,r=t.style,s=t.onStartMove,i=t.onOffsetChange,o=t.values,d=t.handleRender,b=t.draggingIndex,N=kt(t,Sa),g=n.exports.useRef({});return n.exports.useImperativeHandle(e,function(){return{focus:function(v){var f;(f=g.current[v])===null||f===void 0||f.focus()}}}),l(qt,{children:o.map(function(k,v){return l(_t,{ref:function(m){m?g.current[v]=m:delete g.current[v]},dragging:b===v,prefixCls:a,style:_e(r,v),value:k,valueIndex:v,onStartMove:s,onOffsetChange:i,render:d,...N},v,!1,{fileName:Ra,lineNumber:28,columnNumber:25},this)})},void 0,!1)});Tt.displayName="Handles";function vt(t){var e="touches"in t?t.touches[0]:t;return{pageX:e.pageX,pageY:e.pageY}}function _a(t,e,a,r,s,i,o,d,b){var N=n.exports.useState(null),g=G(N,2),k=g[0],v=g[1],f=n.exports.useState(-1),m=G(f,2),p=m[0],h=m[1],y=n.exports.useState(a),c=G(y,2),P=c[0],F=c[1],T=n.exports.useState(a),j=G(T,2),R=j[0],w=j[1],S=n.exports.useRef(null),C=n.exports.useRef(null);n.exports.useEffect(function(){p===-1&&F(a)},[a,p]),n.exports.useEffect(function(){return function(){document.removeEventListener("mousemove",S.current),document.removeEventListener("mouseup",C.current),document.removeEventListener("touchmove",S.current),document.removeEventListener("touchend",C.current)}},[]);var D=function(E,U){P.some(function(V,Z){return V!==E[Z]})&&(U!==void 0&&v(U),F(E),o(E))},B=function(E,U){if(E===-1){var V=R[0],Z=R[R.length-1],ce=r-V,re=s-Z,A=U*(s-r);A=Math.max(A,ce),A=Math.min(A,re);var q=i(V+A);A=q-V;var se=R.map(function(Pe){return Pe+A});D(se)}else{var Q=(s-r)*U,Y=ue(P);Y[E]=R[E];var de=b(Y,Q,E,"dist");D(de.values,de.value)}},W=n.exports.useRef(B);W.current=B;var M=function(E,U){E.stopPropagation();var V=a[U];h(U),v(V),w(a);var Z=vt(E),ce=Z.pageX,re=Z.pageY,A=function(Q){Q.preventDefault();var Y=vt(Q),de=Y.pageX,Pe=Y.pageY,Te=de-ce,Ee=Pe-re,ie=t.current.getBoundingClientRect(),fe=ie.width,me=ie.height,O;switch(e){case"btt":O=-Ee/me;break;case"ttb":O=Ee/me;break;case"rtl":O=-Te/fe;break;default:O=Te/fe}W.current(U,O)},q=function se(Q){Q.preventDefault(),document.removeEventListener("mouseup",se),document.removeEventListener("mousemove",A),document.removeEventListener("touchend",se),document.removeEventListener("touchmove",A),S.current=null,C.current=null,h(-1),d()};document.addEventListener("mouseup",q),document.addEventListener("mousemove",A),document.addEventListener("touchend",q),document.addEventListener("touchmove",A),S.current=A,C.current=q},X=n.exports.useMemo(function(){var K=ue(a).sort(function(U,V){return U-V}),E=ue(P).sort(function(U,V){return U-V});return K.every(function(U,V){return U===E[V]})?P:a},[a,P]);return[p,k,X,M]}var Ta="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Tracks/Track.js";function Ea(t){var e=t.prefixCls,a=t.style,r=t.start,s=t.end,i=t.index,o=t.onStartMove,d=n.exports.useContext(ke),b=d.direction,N=d.min,g=d.max,k=d.disabled,v=d.range,f="".concat(e,"-track"),m=Ge(r,N,g),p=Ge(s,N,g),h=function(P){!k&&o&&o(P,-1)},y={};switch(b){case"rtl":y.right="".concat(m*100,"%"),y.width="".concat(p*100-m*100,"%");break;case"btt":y.bottom="".concat(m*100,"%"),y.height="".concat(p*100-m*100,"%");break;case"ttb":y.top="".concat(m*100,"%"),y.height="".concat(p*100-m*100,"%");break;default:y.left="".concat(m*100,"%"),y.width="".concat(p*100-m*100,"%")}return l("div",{className:xe(f,v&&"".concat(f,"-").concat(i+1)),style:ae(ae({},y),a),onMouseDown:h,onTouchStart:h},void 0,!1,{fileName:Ta,lineNumber:55,columnNumber:23},this)}var Ma="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Tracks/index.js";function Ia(t){var e=t.prefixCls,a=t.style,r=t.values,s=t.startPoint,i=t.onStartMove,o=n.exports.useContext(ke),d=o.included,b=o.range,N=o.min,g=n.exports.useMemo(function(){if(!b){if(r.length===0)return[];var k=s!=null?s:N,v=r[0];return[{start:Math.min(k,v),end:Math.max(k,v)}]}for(var f=[],m=0;m<r.length-1;m+=1)f.push({start:r[m],end:r[m+1]});return f},[r,b,s,N]);return d?g.map(function(k,v){var f=k.start,m=k.end;return l(Ea,{index:v,prefixCls:e,style:_e(a,v),start:f,end:m,onStartMove:i},v,!1,{fileName:Ma,lineNumber:47,columnNumber:25},this)}):null}var $a="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Marks/Mark.js";function Fa(t){var e=t.prefixCls,a=t.style,r=t.children,s=t.value,i=t.onClick,o=n.exports.useContext(ke),d=o.min,b=o.max,N=o.direction,g=o.includedStart,k=o.includedEnd,v=o.included,f="".concat(e,"-text"),m=Ke(N,s,d,b);return l("span",{className:xe(f,te({},"".concat(f,"-active"),v&&g<=s&&s<=k)),style:ae(ae({},m),a),onMouseDown:function(h){h.stopPropagation()},onClick:function(){i(s)},children:r},void 0,!1,{fileName:$a,lineNumber:25,columnNumber:23},this)}var pt="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Marks/index.js";function Da(t){var e=t.prefixCls,a=t.marks,r=t.onClick,s="".concat(e,"-mark");return a.length?l("div",{className:s,children:a.map(function(i){var o=i.value,d=i.style,b=i.label;return l(Fa,{prefixCls:s,style:d,value:o,onClick:r,children:b},o,!1,{fileName:pt,lineNumber:19,columnNumber:25},this)})},void 0,!1,{fileName:pt,lineNumber:13,columnNumber:23},this):null}var Ua="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Steps/Dot.js";function La(t){var e=t.prefixCls,a=t.value,r=t.style,s=t.activeStyle,i=n.exports.useContext(ke),o=i.min,d=i.max,b=i.direction,N=i.included,g=i.includedStart,k=i.includedEnd,v="".concat(e,"-dot"),f=N&&g<=a&&a<=k,m=ae(ae({},Ke(b,a,o,d)),r);return f&&(m=ae(ae({},m),s)),l("span",{className:xe(v,te({},"".concat(v,"-active"),f)),style:m},void 0,!1,{fileName:Ua,lineNumber:30,columnNumber:23},this)}var gt="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Steps/index.js";function ja(t){var e=t.prefixCls,a=t.marks,r=t.dots,s=t.style,i=t.activeStyle,o=n.exports.useContext(ke),d=o.min,b=o.max,N=o.step,g=n.exports.useMemo(function(){var k=new Set;if(a.forEach(function(f){k.add(f.value)}),r)for(var v=d;v<=b;)k.add(v),v+=N;return Array.from(k)},[d,b,N,r,a]);return l("div",{className:"".concat(e,"-step"),children:g.map(function(k){return l(La,{prefixCls:e,value:k,style:s,activeStyle:i},k,!1,{fileName:gt,lineNumber:37,columnNumber:25},this)})},void 0,!1,{fileName:gt,lineNumber:34,columnNumber:23},this)}function Ba(t,e,a,r,s,i){var o=n.exports.useCallback(function(f){var m=isFinite(f)?f:t;return m=Math.min(e,f),m=Math.max(t,m),m},[t,e]),d=n.exports.useCallback(function(f){if(a!==null){var m=t+Math.round((o(f)-t)/a)*a,p=function(P){return(String(P).split(".")[1]||"").length},h=Math.max(p(a),p(e),p(t)),y=Number(m.toFixed(h));return t<=y&&y<=e?y:null}return null},[a,t,e,o]),b=n.exports.useCallback(function(f){var m=o(f),p=r.map(function(c){return c.value});a!==null&&p.push(d(f)),p.push(t,e);var h=p[0],y=e-t;return p.forEach(function(c){var P=Math.abs(m-c);P<=y&&(h=c,y=P)}),h},[t,e,r,a,o,d]),N=function f(m,p,h){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof p=="number"){var c,P=m[h],F=P+p,T=[];r.forEach(function(C){T.push(C.value)}),T.push(t,e),T.push(d(P));var j=p>0?1:-1;y==="unit"?T.push(d(P+j*a)):T.push(d(F)),T=T.filter(function(C){return C!==null}).filter(function(C){return p<0?C<=P:C>=P}),y==="unit"&&(T=T.filter(function(C){return C!==P}));var R=y==="unit"?P:F;c=T[0];var w=Math.abs(c-R);if(T.forEach(function(C){var D=Math.abs(C-R);D<w&&(c=C,w=D)}),c===void 0)return p<0?t:e;if(y==="dist")return c;if(Math.abs(p)>1){var S=ue(m);return S[h]=c,f(S,p-j,h,y)}return c}else{if(p==="min")return t;if(p==="max")return e}},g=function(m,p,h){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",c=m[h],P=N(m,p,h,y);return{value:P,changed:P!==c}},k=function(m){return i===null&&m===0||typeof i=="number"&&m<i},v=function(m,p,h){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",c=m.map(b),P=c[h],F=N(c,p,h,y);if(c[h]=F,s===!1){var T=i||0;h>0&&c[h-1]!==P&&(c[h]=Math.max(c[h],c[h-1]+T)),h<c.length-1&&c[h+1]!==P&&(c[h]=Math.min(c[h],c[h+1]-T))}else if(typeof i=="number"||i===null){for(var j=h+1;j<c.length;j+=1)for(var R=!0;k(c[j]-c[j-1])&&R;){var w=g(c,1,j);c[j]=w.value,R=w.changed}for(var S=h;S>0;S-=1)for(var C=!0;k(c[S]-c[S-1])&&C;){var D=g(c,-1,S-1);c[S-1]=D.value,C=D.changed}for(var B=c.length-1;B>0;B-=1)for(var W=!0;k(c[B]-c[B-1])&&W;){var M=g(c,-1,B-1);c[B-1]=M.value,W=M.changed}for(var X=0;X<c.length-1;X+=1)for(var K=!0;k(c[X+1]-c[X])&&K;){var E=g(c,1,X+1);c[X+1]=E.value,K=E.changed}}return{value:c[h],values:c}};return[b,v]}var ye="/Users/yl/github-repo/openflat/node_modules/.pnpm/rc-slider@10.0.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/rc-slider/es/Slider.js",Et=n.exports.forwardRef(function(t,e){var a,r=t.prefixCls,s=r===void 0?"rc-slider":r,i=t.className,o=t.style,d=t.disabled,b=d===void 0?!1:d,N=t.autoFocus,g=t.onFocus,k=t.onBlur,v=t.min,f=v===void 0?0:v,m=t.max,p=m===void 0?100:m,h=t.step,y=h===void 0?1:h,c=t.value,P=t.defaultValue,F=t.range,T=t.count,j=t.onChange,R=t.onBeforeChange,w=t.onAfterChange,S=t.allowCross,C=S===void 0?!0:S,D=t.pushable,B=D===void 0?!1:D,W=t.draggableTrack,M=t.reverse,X=t.vertical,K=t.included,E=K===void 0?!0:K,U=t.startPoint,V=t.trackStyle,Z=t.handleStyle,ce=t.railStyle,re=t.dotStyle,A=t.activeDotStyle,q=t.marks,se=t.dots,Q=t.handleRender,Y=t.tabIndex,de=Y===void 0?0:Y,Pe=t.ariaLabelForHandle,Te=t.ariaLabelledByForHandle,Ee=t.ariaValueTextFormatterForHandle,ie=n.exports.useRef(),fe=n.exports.useRef(),me=n.exports.useMemo(function(){return X?M?"ttb":"btt":M?"rtl":"ltr"},[M,X]),O=n.exports.useMemo(function(){return isFinite(f)?f:0},[f]),we=n.exports.useMemo(function(){return isFinite(p)?p:100},[p]),he=n.exports.useMemo(function(){return y!==null&&y<=0?1:y},[y]),$t=n.exports.useMemo(function(){return B===!0?he:B>=0?B:!1},[B,he]),Ue=n.exports.useMemo(function(){var L=Object.keys(q||{});return L.map(function(_){var x=q[_],H={value:Number(_)};return x&&Pt(x)==="object"&&!n.exports.isValidElement(x)&&("label"in x||"style"in x)?(H.style=x.style,H.label=x.label):H.label=x,H}).filter(function(_){var x=_.label;return x||typeof x=="number"}).sort(function(_,x){return _.value-x.value})},[q]),Ft=Ba(O,we,he,Ue,C,$t),Je=G(Ft,2),Le=Je[0],Ze=Je[1],Dt=Jt(P,{value:c}),Qe=G(Dt,2),ne=Qe[0],Ut=Qe[1],ee=n.exports.useMemo(function(){var L=ne==null?[]:Array.isArray(ne)?ne:[ne],_=G(L,1),x=_[0],H=x===void 0?O:x,I=ne===null?[]:[H];if(F){if(I=ue(L),T||ne===void 0){var Re=T>=0?T+1:2;for(I=I.slice(0,Re);I.length<Re;){var pe;I.push((pe=I[I.length-1])!==null&&pe!==void 0?pe:O)}}I.sort(function(oe,Me){return oe-Me})}return I.forEach(function(oe,Me){I[Me]=Le(oe)}),I},[ne,F,O,T,Le]),je=n.exports.useRef(ee);je.current=ee;var ve=function(_){return F?_:_[0]},He=function(_){var x=ue(_).sort(function(H,I){return H-I});j&&!Qt(x,je.current)&&j(ve(x)),Ut(x)},et=function(_){if(!b){var x=0,H=we-O;ee.forEach(function(Re,pe){var oe=Math.abs(_-Re);oe<=H&&(H=oe,x=pe)});var I=ue(ee);I[x]=_,F&&!ee.length&&T===void 0&&I.push(_),R==null||R(ve(I)),He(I),w==null||w(ve(I))}},Lt=function(_){_.preventDefault();var x=fe.current.getBoundingClientRect(),H=x.width,I=x.height,Re=x.left,pe=x.top,oe=x.bottom,Me=x.right,ut=_.clientX,ct=_.clientY,Ie;switch(me){case"btt":Ie=(oe-ct)/I;break;case"ttb":Ie=(ct-pe)/I;break;case"rtl":Ie=(Me-ut)/H;break;default:Ie=(ut-Re)/H}var Yt=O+Ie*(we-O);et(Le(Yt))},jt=n.exports.useState(null),tt=G(jt,2),We=tt[0],at=tt[1],Bt=function(_,x){if(!b){var H=Ze(ee,_,x);R==null||R(ve(ee)),He(H.values),w==null||w(ve(H.values)),at(H.value)}};n.exports.useEffect(function(){if(We!==null){var L=ee.indexOf(We);L>=0&&ie.current.focus(L)}at(null)},[We]);var Ot=n.exports.useMemo(function(){return W&&he===null?(Zt(!1,"`draggableTrack` is not supported when `step` is `null`."),!1):W},[W,he]),Ht=function(){w==null||w(ve(je.current))},Wt=_a(fe,me,ee,O,we,Le,He,Ht,Ze),Be=G(Wt,4),rt=Be[0],Vt=Be[1],Ve=Be[2],At=Be[3],st=function(_,x){At(_,x),R==null||R(ve(je.current))},it=rt!==-1;n.exports.useEffect(function(){if(!it){var L=ee.lastIndexOf(Vt);ie.current.focus(L)}},[it]);var Ce=n.exports.useMemo(function(){return ue(Ve).sort(function(L,_){return L-_})},[Ve]),zt=n.exports.useMemo(function(){return F?[Ce[0],Ce[Ce.length-1]]:[O,Ce[0]]},[Ce,F,O]),nt=G(zt,2),ot=nt[0],lt=nt[1];n.exports.useImperativeHandle(e,function(){return{focus:function(){ie.current.focus(0)},blur:function(){var _=document,x=_.activeElement;fe.current.contains(x)&&(x==null||x.blur())}}}),n.exports.useEffect(function(){N&&ie.current.focus(0)},[]);var Xt=n.exports.useMemo(function(){return{min:O,max:we,direction:me,disabled:b,step:he,included:E,includedStart:ot,includedEnd:lt,range:F,tabIndex:de,ariaLabelForHandle:Pe,ariaLabelledByForHandle:Te,ariaValueTextFormatterForHandle:Ee}},[O,we,me,b,he,E,ot,lt,F,de,Pe,Te,Ee]);return l(ke.Provider,{value:Xt,children:l("div",{ref:fe,className:xe(s,i,(a={},te(a,"".concat(s,"-disabled"),b),te(a,"".concat(s,"-vertical"),X),te(a,"".concat(s,"-horizontal"),!X),te(a,"".concat(s,"-with-marks"),Ue.length),a)),style:o,onMouseDown:Lt,children:[l("div",{className:"".concat(s,"-rail"),style:ce},void 0,!1,{fileName:ye,lineNumber:383,columnNumber:19},this),l(Ia,{prefixCls:s,style:V,values:Ce,startPoint:U,onStartMove:Ot?st:null},void 0,!1,{fileName:ye,lineNumber:386,columnNumber:20},this),l(ja,{prefixCls:s,marks:Ue,dots:se,style:re,activeStyle:A},void 0,!1,{fileName:ye,lineNumber:392,columnNumber:20},this),l(Tt,{ref:ie,prefixCls:s,style:Z,values:Ve,draggingIndex:rt,onStartMove:st,onOffsetChange:Bt,onFocus:g,onBlur:k,handleRender:Q},void 0,!1,{fileName:ye,lineNumber:398,columnNumber:20},this),l(Da,{prefixCls:s,marks:Ue,onClick:et},void 0,!1,{fileName:ye,lineNumber:409,columnNumber:20},this)]},void 0,!0,{fileName:ye,lineNumber:378,columnNumber:19},this)},void 0,!1,{fileName:ye,lineNumber:376,columnNumber:23},this)});Et.displayName="Slider";var Oa="/Users/yl/github-repo/openflat/node_modules/.pnpm/antd@4.23.2_sfoxds7t5ydpegc3knd667wn6m/node_modules/antd/es/slider/SliderTooltip.js",Ha=n.exports.forwardRef(function(t,e){var a=t.open,r=n.exports.useRef(null),s=n.exports.useRef(null);function i(){dt.cancel(s.current),s.current=null}function o(){s.current=dt(function(){var d;(d=r.current)===null||d===void 0||d.forcePopupAlign(),s.current=null})}return n.exports.useEffect(function(){return a?o():i(),i},[a,t.title]),l(ea,{ref:ta(r,e),...t},void 0,!1,{fileName:Oa,lineNumber:35,columnNumber:23},this)});const Wa=Ha;var yt="/Users/yl/github-repo/openflat/node_modules/.pnpm/antd@4.23.2_sfoxds7t5ydpegc3knd667wn6m/node_modules/antd/es/slider/index.js",Va=globalThis&&globalThis.__rest||function(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(a[r[s]]=t[r[s]]);return a},Mt=n.exports.forwardRef(function(t,e){var a=n.exports.useContext(aa),r=a.getPrefixCls,s=a.direction,i=a.getPopupContainer,o=n.exports.useState({}),d=G(o,2),b=d[0],N=d[1],g=function(w,S){N(function(C){return $e($e({},C),te({},w,S))})},k=function(w,S){return w||(S?s==="rtl"?"left":"right":"top")},v=t.prefixCls,f=t.range,m=t.className,p=Va(t,["prefixCls","range","className"]),h=r("slider",v),y=xe(m,te({},"".concat(h,"-rtl"),s==="rtl"));s==="rtl"&&!p.vertical&&(p.reverse=!p.reverse);var c=n.exports.useMemo(function(){return f?Pt(f)==="object"?[!0,f.draggableTrack]:[!0,!1]:[!1]},[f]),P=G(c,2),F=P[0],T=P[1];[["tooltipPrefixCls","prefixCls"],["getTooltipPopupContainer","getPopupContainer"],["tipFormatter","formatter"],["tooltipPlacement","placement"],["tooltipVisible","open"]].forEach(function(R){var w=G(R,2),S=w[0],C=w[1];ra(!(S in t),"Slider","`".concat(S,"` is deprecated which will be removed in next major version, please use `tooltip.").concat(C,"` instead."))});var j=function(w,S){var C,D=S.index,B=S.dragging,W=r(),M=t.tooltip,X=M===void 0?{}:M,K=t.vertical,E=$e({formatter:(C=t.tipFormatter)!==null&&C!==void 0?C:function(Y){return typeof Y=="number"?Y.toString():""},open:t.tooltipVisible,placement:t.tooltipPlacement,getPopupContainer:t.getTooltipPopupContainer},X),U=E.open,V=E.placement,Z=E.getPopupContainer,ce=E.prefixCls,re=E.formatter,A=re?b[D]||B:!1,q=U||U===void 0&&A,se=$e($e({},w.props),{onMouseEnter:function(){return g(D,!0)},onMouseLeave:function(){return g(D,!1)}}),Q=r("tooltip",ce);return l(Wa,{prefixCls:Q,title:re?re(S.value):"",open:q,placement:k(V,K),transitionName:"".concat(W,"-zoom-down"),overlayClassName:"".concat(h,"-tooltip"),getPopupContainer:Z||i,children:n.exports.cloneElement(w,se)},D,!1,{fileName:yt,lineNumber:127,columnNumber:25},this)};return l(Et,{...p,step:p.step,range:F,draggableTrack:T,className:y,ref:e,prefixCls:h,handleRender:j},void 0,!1,{fileName:yt,lineNumber:139,columnNumber:23},this)});Mt.displayName="Slider";const Aa=Mt;var bt="/Users/yl/github-repo/openflat/packages/flat-components/src/components/FlatIcons/icons/SVGPause.tsx";const za=({active:t,className:e="",...a})=>l("svg",{className:`${e} flat-icon ${t?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...a,children:l("path",{className:"flat-icon-fill-color",clipRule:"evenodd",d:"M10 5H6v14h4V5Zm8 0h-4v14h4V5Z",fill:"#5D6066",fillRule:"evenodd"},void 0,!1,{fileName:bt,lineNumber:16,columnNumber:13},void 0)},void 0,!1,{fileName:bt,lineNumber:7,columnNumber:9},void 0);var Nt="/Users/yl/github-repo/openflat/packages/flat-components/src/components/FlatIcons/icons/SVGPlay.tsx";const Xa=({active:t,className:e="",...a})=>l("svg",{className:`${e} flat-icon ${t?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...a,children:l("path",{className:"flat-icon-fill-color",clipRule:"evenodd",d:"M6.5 5v14l11-7-11-7Z",fill:"#5D6066",fillRule:"evenodd"},void 0,!1,{fileName:Nt,lineNumber:16,columnNumber:13},void 0)},void 0,!1,{fileName:Nt,lineNumber:7,columnNumber:9},void 0);var be="/Users/yl/github-repo/openflat/packages/flat-components/src/components/FlatIcons/icons/SVGRecordList.tsx";const Ya=({active:t,className:e="",...a})=>l("svg",{className:`${e} flat-icon ${t?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...a,children:[l("circle",{className:"flat-icon-fill-color",cx:"19",cy:"8",fill:"#5D6066",r:"1"},void 0,!1,{fileName:be,lineNumber:20,columnNumber:13},void 0),l("circle",{className:"flat-icon-fill-color",cx:"19",cy:"12",fill:"#5D6066",r:"1"},void 0,!1,{fileName:be,lineNumber:21,columnNumber:13},void 0),l("circle",{className:"flat-icon-fill-color",cx:"19",cy:"16",fill:"#5D6066",r:"1"},void 0,!1,{fileName:be,lineNumber:22,columnNumber:13},void 0),l("path",{className:"flat-icon-stroke-color",d:"M4 8H16",stroke:"#5D6066",strokeWidth:"1.25"},void 0,!1,{fileName:be,lineNumber:23,columnNumber:13},void 0),l("path",{className:"flat-icon-stroke-color",d:"M4 12H16",stroke:"#5D6066",strokeWidth:"1.25"},void 0,!1,{fileName:be,lineNumber:29,columnNumber:13},void 0),l("path",{className:"flat-icon-stroke-color",d:"M4 16H16",stroke:"#5D6066",strokeWidth:"1.25"},void 0,!1,{fileName:be,lineNumber:35,columnNumber:13},void 0)]},void 0,!0,{fileName:be,lineNumber:11,columnNumber:9},void 0);var u=(t=>(t.Ready="Ready",t.Pause="Pause",t.Buffering="Buffering",t.Playing="Playing",t.Ended="Ended",t))(u||{});function Ga(t){return Math.floor(t*1e3)/1e3}function It(t,e){return Math.floor(t*1e3)===Math.floor(e*1e3)}class qe extends sa{constructor(e){super(),this._offset=0,this._visible=!0,this.ignoreSetStatus=!1,this._sideEffect=new wt,this._status=u.Ready,this._currentTime=0,this._duration=0,this._playbackRate=1,this._initStatus=Ne.Idle,this.name=e==null?void 0:e.name,this.loadInit=this.init()}get offset(){return this._offset}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.emit("visibilitychange"))}get isReady(){return this._initStatus===Ne.Ready}get isPlaying(){return this._status===u.Playing||this._status===u.Buffering}get status(){return this._status}set status(e){!this.ignoreSetStatus&&this._status!==e&&(this._status=e,this.emit("status"))}get currentTime(){return this._currentTime}set currentTime(e){e=Math.floor(e),this._currentTime!==e&&(this._currentTime=e,this.emit("timeupdate"))}get duration(){return this._duration}set duration(e){e=Math.floor(e),this._duration!==e&&(this._duration=e,this.emit("durationchange"))}get playbackRate(){return this._playbackRate}set playbackRate(e){const a=Ga(e);It(this._playbackRate,a)||(this.setPlaybackRateImpl(a),this._playbackRate=a,this.emit("ratechange"))}setPlaybackRate(e){this.playbackRate=e}async play(){if(this.isReady||(this.status=u.Buffering,await this.loadInit),this._status!==u.Playing)try{await this.playImpl()}catch(e){if(this._status!==u.Ready&&this._status!==u.Pause)throw e}}async pause(){this.isReady||await this.loadInit,this._status!==u.Pause&&this._status!==u.Ended&&(this.status=u.Pause,await this.pauseImpl())}async stop(){this.isReady||await this.loadInit,this._status!==u.Ended&&(this.status=u.Ended,this.ignoreSetStatus=!0,await this.readyImpl(!0),await this.stopImpl(),this.ignoreSetStatus=!1)}async seek(e){if(this.isReady||await this.loadInit,e=Math.floor(e),e===this._currentTime)return;if(e>=this.duration){await this.stop();return}const a=this._status;switch(await this.seekImpl(e),a){case u.Ready:case u.Ended:{await this.ready();break}case u.Pause:{await this.pause();break}case u.Buffering:case u.Playing:{await this.play();break}}}async ready(e){this._status!==u.Ready&&(e!==void 0&&(this.ignoreSetStatus=e),this.status=u.Ready,await this.readyImpl(e),e!==void 0&&(this.ignoreSetStatus=!1))}destroy(){this._sideEffect.flushAll()}initImpl(){return Promise.resolve()}async init(){switch(this._initStatus){case Ne.Ready:return;case Ne.Initializing:return new Promise(e=>this.once("ready",e));default:this.ignoreSetStatus=!0,this._initStatus=Ne.Initializing,await new Promise(e=>setTimeout(e)),await this.initImpl(),this._initStatus=Ne.Ready,this.emit("ready"),this.ignoreSetStatus=!1}}}var Ne=(t=>(t[t.Idle=0]="Idle",t[t.Initializing=1]="Initializing",t[t.Ready=2]="Ready",t))(Ne||{});class Ka extends qe{constructor(e){super({name:e.name||`{${e.rowPlayer.name||"unknown"}-${e.colPlayer.name||"unknown"}}`}),this.rowPlayer=e.rowPlayer,this.colPlayer=e.colPlayer,this.longerPlayer=this.rowPlayer.duration>=this.colPlayer.duration?this.rowPlayer:this.colPlayer,this.duration=this.longerPlayer.duration,this.playbackRate=this.longerPlayer.playbackRate;const a=(r,s)=>{this._sideEffect.add(()=>{const i=()=>{s(this.rowPlayer,this.colPlayer)};return this.rowPlayer.on(r,i),()=>{this.rowPlayer.off(r,i)}}),this._sideEffect.add(()=>{const i=()=>{s(this.colPlayer,this.rowPlayer)};return this.colPlayer.on(r,i),()=>{this.colPlayer.off(r,i)}})};a("status",(r,s)=>{var i;this.ignoreSetStatus||(this.syncSubPlayer(r,s),this.updateStatus(r,s),this.rowPlayer.status===u.Playing&&this.colPlayer.status===u.Playing?this.startFrameDropCheck():(i=this.stopFrameDropCheck)==null||i.call(this))}),a("timeupdate",r=>{this.longerPlayer===r&&r.status!==u.Ended&&(this.currentTime=r.currentTime)}),a("durationchange",(r,s)=>{r.duration>=this.longerPlayer.duration?r!==this.longerPlayer&&(this.longerPlayer=r):this.longerPlayer=s,this.duration=this.longerPlayer.duration}),a("ratechange",r=>{It(r.playbackRate,this.playbackRate)||(this.playbackRate=r.playbackRate)})}destroy(){var e;super.destroy(),(e=this.stopFrameDropCheck)==null||e.call(this),this.rowPlayer.destroy(),this.colPlayer.destroy()}get isReady(){return this.rowPlayer.isReady&&this.colPlayer.isReady}async ready(e){await this.readyImpl(e)}async play(){this.status!==u.Ended&&await this.playImpl()}async pause(){await this.pauseImpl()}async stop(){await this.stopImpl()}async seek(e){await this.seekImpl(e)}async readyImpl(e){await this.invokeSubPlayers(a=>a.ready(e))}async playImpl(){await this.invokeSubPlayers(e=>e.play())}async pauseImpl(){await this.invokeSubPlayers(e=>e.pause())}async stopImpl(){await this.invokeSubPlayers(e=>e.stop())}async seekImpl(e){await Promise.all([this.rowPlayer.seek(e),this.colPlayer.seek(e)])}setPlaybackRateImpl(e){this.rowPlayer.setPlaybackRate(e),this.colPlayer.setPlaybackRate(e)}updateStatus(e,a){switch(e.status){case u.Ready:{switch(a.status){case u.Ready:case u.Ended:{this.status=u.Ready;break}}break}case u.Pause:{a.status!==u.Playing&&(this.status=u.Pause);break}case u.Buffering:{a.status!==u.Pause&&(this.status=u.Buffering);break}case u.Playing:{switch(a.status){case u.Playing:case u.Ended:{this.status=u.Playing;break}}break}case u.Ended:{this.status=a.status;break}}}async syncSubPlayer(e,a){switch(e.status){case u.Pause:{a.isPlaying&&await a.pause();break}case u.Buffering:{a.status===u.Playing&&await a.ready();break}case u.Playing:{a.status===u.Buffering?await e.ready():a.status===u.Ready&&(a.duration<=0||e.currentTime<a.duration)&&await a.play();break}}}startFrameDropCheck(){if(this.stopFrameDropCheck)return;let e=0;const a=setInterval(async()=>{if(this.status!==u.Playing)e=0;else{const r=this.rowPlayer.currentTime-this.colPlayer.currentTime;e=Math.abs(r)>1e3?e+1:0,e>=2&&(r<0?await this.rowPlayer.seek(this.colPlayer.currentTime):await this.colPlayer.seek(this.rowPlayer.currentTime),e=0)}},2e3);this.stopFrameDropCheck=()=>{this.stopFrameDropCheck=void 0,clearInterval(a)}}async invokeSubPlayers(e){await Promise.all([this.rowPlayer,this.colPlayer].filter(a=>a.status!==u.Ended).map(e))}}function qa(t,e,a,r){return t.addEventListener(e,a,r),()=>t.removeEventListener(e,a,r)}const Ja=qa;class Za extends qe{constructor(e){super(e),this.video=e.video,this.video.controls=!1;const a=(i,o)=>{this._sideEffect.push(Ja(this.video,i,o))};["waiting","canplay","pause","suspend","playing","play","seeking","seeked","stalled","canplaythrough"].forEach(i=>{a(i,o=>{if(this.status===u.Ended)return;const d=o.type;this.video.paused||d==="seeking"?this.status!==u.Pause&&this.status!==u.Ready&&(d==="pause"?this.status=u.Ready:this.status=u.Buffering):this.status=u.Playing})}),a("error",()=>{this.status===u.Playing&&this.video.paused&&(this.status=u.Buffering)}),a("ended",()=>{this.status=u.Ended});const r=()=>{this.currentTime=this.video.currentTime*1e3};r(),a("timeupdate",r);const s=()=>{this.duration=this.video.duration*1e3};s(),a("durationchange",s)}async readyImpl(){this.video.pause()}async playImpl(){try{await this.video.play()}catch{}}async pauseImpl(){this.video.pause()}async stopImpl(){this.video.currentTime=this.duration/1e3-.5}async seekImpl(e){this.video.currentTime=e/1e3}setPlaybackRateImpl(e){this.video.playbackRate=e}}class Qa extends qe{constructor(e){super(e),this.player=e.player,this._sideEffect.add(()=>{const a=r=>{if(this.status!==u.Ended)switch(r){case Se.Ended:case Se.Stopped:{this.status=u.Ended;break}case Se.Playing:{this.status=u.Playing;break}default:{this.status!==u.Pause&&this.status!==u.Ready&&(this.status=u.Buffering);break}}};return this.player.callbacks.on("onPhaseChanged",a),()=>this.player.callbacks.off("onPhaseChanged",a)}),this.duration=this.player.timeDuration||0,this.playbackRate=this.player.playbackSpeed,this._sideEffect.add(()=>{const a=()=>{this.duration=this.player.timeDuration||0,this.playbackRate=this.player.playbackSpeed};return this.player.callbacks.on("onLoadFirstFrame",a),()=>this.player.callbacks.off("onLoadFirstFrame",a)}),this._sideEffect.add(()=>{const a=r=>{this.currentTime=r};return this.player.callbacks.on("onProgressTimeChanged",a),()=>this.player.callbacks.off("onProgressTimeChanged",a)})}async initImpl(){const e=new Promise(a=>{const{player:r}=this,s=this._sideEffect.add(()=>{const i=o=>{if(o===Se.Playing)try{r.pause()}catch{}if(o===Se.Pause)return this._sideEffect.flush(s),a()};return r.callbacks.on("onPhaseChanged",i),()=>r.callbacks.off("onPhaseChanged",i)})});this._safeSeek(0),await e}async readyImpl(){this._safePause()}async playImpl(){const e=new Promise(a=>{const{player:r}=this,s=this._sideEffect.add(()=>{const i=o=>{o===Se.Playing&&(this._sideEffect.flush(s),a())};return r.callbacks.on("onPhaseChanged",i),()=>r.callbacks.off("onPhaseChanged",i)})});this._safePlay(),await e}async pauseImpl(){this._safePause()}async stopImpl(){this._safeSeek(this.duration)}async seekImpl(e){this._safeSeek(e)}setPlaybackRateImpl(e){try{this.player.playbackSpeed=e}catch{}}_safeSeek(e){try{this.player.seekToProgressTime(e)}catch{}}_safePause(){try{this.player.pause()}catch{}}_safePlay(){try{this.player.play()}catch{}}}const er=function(e){return e.players.reduce((a,r)=>new Ka({rowPlayer:a,colPlayer:r}))};async function tr(t){await Ye.syncRecordInfo(t);const e=Ye.rooms.get(t);return ia(e==null?void 0:e.recordings)||[]}const ar=/\.m3u8$/i;function rr(t){const e=document.createElement("video"),a=document.createElement("source");if(a.src=t,e.appendChild(a),ar.test(t))if(ft.isSupported()){const r=new ft;r.loadSource(t),r.attachMedia(e)}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=t);return e}class sr{constructor(e){$(this,"sideEffect",new wt);$(this,"roomUUID");$(this,"ownerUUID");$(this,"userUUID");$(this,"roomType");$(this,"recordings",Fe.array());$(this,"currentRecording",null);$(this,"video",null);$(this,"fastboard",null);$(this,"syncPlayer",null);$(this,"onStageUsersStorage",null);$(this,"onStageUsers",Fe.array([]));$(this,"isPlaying",!1);$(this,"isBuffering",!1);$(this,"tempTimestamp",0);$(this,"currentTime",0);$(this,"duration",0);$(this,"_isLoadingRecording",{current:!1,next:null});$(this,"seek",e=>{this.tempTimestamp=e,this.sideEffect.setTimeout(this.seekNow,100,"seek")});$(this,"seekNow",()=>{this.currentRecording&&this.syncPlayer&&(this.syncPlayer.seek(this.tempTimestamp-this.currentRecording.beginTime),this.tempTimestamp=0)});$(this,"togglePlayPause",()=>{this.isPlaying?this.pause():this.play()});if(!ge.userUUID)throw new Error("Missing userUUID");window.classroomReplayStore=this,this.roomUUID=e.roomUUID,this.ownerUUID=e.ownerUUID,this.userUUID=ge.userUUID,this.roomType=e.roomType,na(this,{sideEffect:!1,fastboard:Fe.ref,syncPlayer:Fe.ref,currentRecording:Fe.ref,_isLoadingRecording:!1})}get currentTimestamp(){return this.tempTimestamp||this.realTimestamp}get realTimestamp(){var e;return(((e=this.currentRecording)==null?void 0:e.beginTime)||0)+this.currentTime}get roomInfo(){return Ye.rooms.get(this.roomUUID)}get isCreator(){return this.ownerUUID===this.userUUID}async init(){this.updateRecordings(await tr(this.roomUUID))}async destroy(){var e,a;(e=this.syncPlayer)==null||e.pause(),this.sideEffect.flushAll(),(a=this.fastboard)==null||a.destroy(),window.classroomReplayStore=void 0}updateRecordings(e){this.recordings.replace(e)}async loadRecording(e){var b;if(!ge.whiteboardRoomUUID||!ge.whiteboardRoomToken)throw new Error("Missing whiteboard UUID and Token");if(e===this.currentRecording)return;if(this._isLoadingRecording.current){this._isLoadingRecording.next=e;return}this._isLoadingRecording={current:!0,next:null},this.currentRecording=e,this.isPlaying=!1,this.currentTime=0,this.video=null,this.fastboard&&await this.fastboard.destroy();const a=await oa({sdkConfig:{appIdentifier:"n9q1oBxDEeyuBMn1qc0iFw/fLgNSEvdwKjlig",region:(b=ge.region)!=null?b:"cn-hz",pptParams:{useServerWrap:!0}},replayRoom:{room:ge.whiteboardRoomUUID,roomToken:ge.whiteboardRoomToken,beginTimestamp:e.beginTime,duration:e.endTime-e.beginTime},managerConfig:{cursor:!0,containerSizeRatio:ya,viewMode:"scroll"}}),r=a.syncedStore.connectStorage("onStageUsers",{});this.sideEffect.push(r.on("stateChanged",()=>{this.updateOnStageUsers(r.state)}),"onStageUsers");const s=this._isLoadingRecording.next;if(s)return this._isLoadingRecording={current:!1,next:null},await a.destroy(),this.loadRecording(s);this._isLoadingRecording={current:!1,next:null},this.sideEffect.push(a.phase.subscribe(N=>{la(()=>{this.isBuffering=N==="buffering",N==="ended"&&this.pause()})}),"isBuffering"),this.updateFastboard(a,r);const i=[],o=new Qa({name:"whiteboard",player:a.player});if(i.push(o),e.videoURL){const N=rr(e.videoURL),g=new Za({name:"main",video:N});i.push(g),this.updateVideo(N)}else this.updateVideo(null);const d=new er({players:i});this.sideEffect.add(()=>{const N=mt(()=>{this.duration=d.duration});d.on("durationchange",N);const g=mt(()=>{this.currentTime=d.currentTime});return d.on("timeupdate",g),()=>{d.off("durationchange",N),d.off("timeupdate",g)}},"syncCurrentTime"),this.updateSyncPlayer(d)}updateVideo(e){this.video=e}updateSyncPlayer(e){var a;(a=this.syncPlayer)==null||a.pause(),this.syncPlayer=e}updateFastboard(e,a){this.fastboard=e,this.onStageUsersStorage=a}updateOnStageUsers(e){this.onStageUsers.replace(Object.keys(e).filter(a=>e[a]))}play(){var e;(e=this.syncPlayer)==null||e.play(),this.isPlaying=!0}pause(){var e;this.isPlaying=!1,(e=this.syncPlayer)==null||e.pause()}}var Ae="/Users/yl/github-repo/openflat/packages/flat-pages/src/components/ExitReplayConfirm.tsx";const ir=De(function({visible:e,onCancel:a,onConfirm:r,onSendWindowWillClose:s}){const i=Ct(),o=n.exports.useContext(Rt);return n.exports.useEffect(()=>{if(o)return o.sendWindowWillCloseEvent(s),()=>{o.removeWindowWillCloseEvent()}}),l(ua,{footer:[l(Oe,{onClick:a,children:i("cancel")},"exit-cancel",!1,{fileName:Ae,lineNumber:36,columnNumber:17},this),l(Oe,{onClick:r,children:i("confirm")},"exit-confirm",!1,{fileName:Ae,lineNumber:39,columnNumber:17},this)],open:e,title:i("exit-replay"),onCancel:a,children:i("exit-reply-tips")},void 0,!1,{fileName:Ae,lineNumber:34,columnNumber:9},this)});function nr(t){var o;const e=St(),a=Na(),[r,s]=n.exports.useState(),i=(o=r==null?void 0:r.roomInfo)==null?void 0:o.title;return n.exports.useEffect(()=>{i&&(document.title=i)},[i]),n.exports.useEffect(()=>{const d=new sr(t);return s(d),e(d.init()).catch(b=>{xa(b),a(ca.HomePage)}),()=>{d==null||d.destroy().catch(b=>{console.error(b)})}},[]),r}var z="/Users/yl/github-repo/openflat/packages/flat-pages/src/ReplayPage/ReplayList.tsx";const or=["click"],lr=De(function({classroomReplayStore:e}){const a=Ct(),r=St(),{currentRecording:s,recordings:i}=e,[o,d]=n.exports.useState(!1),b=s?i.indexOf(s):-1,N=n.exports.useCallback(async v=>{d(!0),await r(e.loadRecording(v)),d(!1)},[e,r]),g=o||e.isBuffering;n.exports.useEffect(()=>{!s&&i.length>0&&N(i[0])},[s,N,i,i.length]);const k=n.exports.useCallback(v=>v&&s&&ze(v-s.beginTime),[s]);return l("div",{className:"replay-playlist",children:[s&&l(Aa,{className:"replay-progress",max:s.endTime,min:s.beginTime,tooltip:{formatter:k},value:e.currentTimestamp,onChange:e.seek},void 0,!1,{fileName:z,lineNumber:50,columnNumber:17},this),l(Oe,{disabled:!s||g,onClick:e.togglePlayPause,children:e.isPlaying?l(za,{},void 0,!1,{fileName:z,lineNumber:63,columnNumber:51},this):l(Xa,{},void 0,!1,{fileName:z,lineNumber:63,columnNumber:66},this)},void 0,!1,{fileName:z,lineNumber:59,columnNumber:13},this),s&&l(da,{color:g?"yellow":"blue",children:l("div",{className:"replay-current-recording",children:[g&&l(Pa,{indicator:l(fa,{spin:!0},void 0,!1,{fileName:z,lineNumber:68,columnNumber:54},this)},void 0,!1,{fileName:z,lineNumber:68,columnNumber:37},this),a(g?"replay-page.loading":"replay-page.playing"),": ",xt(a,b,s)]},void 0,!0,{fileName:z,lineNumber:67,columnNumber:21},this)},void 0,!1,{fileName:z,lineNumber:66,columnNumber:17},this),l("div",{className:"replay-splitter"},void 0,!1,{fileName:z,lineNumber:75,columnNumber:13},this),e.duration>0&&l("div",{className:"replay-time",children:[ze(e.currentTime),"/",ze(e.duration)]},void 0,!0,{fileName:z,lineNumber:77,columnNumber:17},this),l("span",{className:"replay-playlist-dropdown-wrapper",children:l(ma,{className:"replay-playlist-dropdown",overlay:l(ha,{items:i.map((v,f)=>({key:f,label:xt(a,f,v)})),onClick:({key:v})=>N(i[+v])},void 0,!1,{fileName:z,lineNumber:86,columnNumber:25},this),placement:"topRight",trigger:or,children:l(Oe,{className:"replay-select-playlist",disabled:g,children:l(Ya,{},void 0,!1,{fileName:z,lineNumber:98,columnNumber:25},this)},void 0,!1,{fileName:z,lineNumber:97,columnNumber:21},this)},void 0,!1,{fileName:z,lineNumber:83,columnNumber:17},this)},void 0,!1,{fileName:z,lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:z,lineNumber:48,columnNumber:9},this)});function xt(t,e,a){let r=t("record-nth",{nth:e+1});if(a){const{beginTime:s,endTime:i}=a;r+=" ("+ht(s,"HH:mm:ss")+" ~ "+ht(i,"HH:mm:ss")+")"}return r}function ze(t){const e=t/1e3|0,a=e/60|0,r=a/60|0;return`${Xe(r)}:${Xe(a%60)}:${Xe(e%60)}`}function Xe(t){return t.toString().padStart(2,"0")}var ur="/Users/yl/github-repo/openflat/packages/flat-pages/src/ReplayPage/ReplayVideo.tsx";const cr=De(function({classroomReplayStore:e}){const a=n.exports.useRef(null);return n.exports.useEffect(()=>{a.current&&(a.current.firstChild&&a.current.removeChild(a.current.firstChild),e.video&&a.current.appendChild(e.video))},[e.video]),l("div",{ref:a,className:"replay-video"},void 0,!1,{fileName:ur,lineNumber:25,columnNumber:12},this)});var dr="/Users/yl/github-repo/openflat/packages/flat-pages/src/ReplayPage/ReplayWhiteboard.tsx";const fr=De(function({classroomReplayStore:e}){const a=n.exports.useContext(va),r=n.exports.useRef(null),s=e==null?void 0:e.fastboard;return n.exports.useEffect(()=>{s&&r.current&&s.bindContainer(r.current)},[s]),n.exports.useEffect(()=>{s&&s.manager.setPrefersColorScheme(a?"dark":"light")},[s,a]),l("div",{ref:r,className:"replay-whiteboard"},void 0,!1,{fileName:dr,lineNumber:29,columnNumber:12},this)});var J="/Users/yl/github-repo/openflat/packages/flat-pages/src/ReplayPage/index.tsx";const br=De(function({match:e}){ka();const a=pa(),r=nr(e.params),[s,i]=n.exports.useState(!1),o=n.exports.useContext(Rt);return r?l("div",{className:"replay-container",children:[o&&l(ba,{showWindowsSystemBtn:o.showWindowsBtn,onClickWindowsSystemBtn:o.onClickWindowsSystemBtn,onDoubleClick:o.clickWindowMaximize},void 0,!1,{fileName:J,lineNumber:41,columnNumber:17},this),l("div",{className:"replay-videos is-horizontal",children:l(cr,{classroomReplayStore:r},void 0,!1,{fileName:J,lineNumber:48,columnNumber:17},this)},void 0,!1,{fileName:J,lineNumber:47,columnNumber:13},this),l("div",{className:"replay-content",children:[l(fr,{classroomReplayStore:r},void 0,!1,{fileName:J,lineNumber:51,columnNumber:17},this),l("div",{className:"replay-share-screen"},void 0,!1,{fileName:J,lineNumber:52,columnNumber:17},this),l("div",{className:xe("replay-bottom",{"is-playing":r.isPlaying}),children:l(lr,{classroomReplayStore:r},void 0,!1,{fileName:J,lineNumber:58,columnNumber:21},this)},void 0,!1,{fileName:J,lineNumber:53,columnNumber:17},this)]},void 0,!0,{fileName:J,lineNumber:50,columnNumber:13},this),l(ir,{visible:s,onCancel:()=>i(!1),onConfirm:()=>a.goBack(),onSendWindowWillClose:()=>i(!0)},void 0,!1,{fileName:J,lineNumber:61,columnNumber:13},this)]},void 0,!0,{fileName:J,lineNumber:39,columnNumber:9},this):l(ga,{},void 0,!1,{fileName:J,lineNumber:35,columnNumber:16},this)});export{br as ReplayPage,br as default};
//# sourceMappingURL=index.c121ffd4.js.map
