import{e as h,F as v}from"./index.ec641b5a.js";async function m(d){var n,i,c,p;const{meta:l,resourceType:t,dynamic:u}=d,r=h(t,l);if(r===null)throw new Error("get whiteboard task data error!");const{taskUUID:o,taskToken:a}=r;if(t===v.WhiteboardProjector)return(await fetch(`https://api.netless.link/v5/projector/tasks/${o}`,{headers:{token:a}})).json();{const e=await(await fetch(`https://api.netless.link/v5/services/conversion/tasks/${o}?type=${u?"dynamic":"static"}`,{headers:{token:a}})).json(),s=((c=(i=(n=e.progress)==null?void 0:n.convertedFileList)==null?void 0:i[0])==null?void 0:c.conversionFileUrl)||"",f=s.lastIndexOf("/staticConvert")+1;return{uuid:e.uuid,type:e.type,status:e.status,errorMessage:e.failedReason,convertedPercentage:(p=e.progress)==null?void 0:p.convertedPercentage,prefix:s?s.slice(0,f):void 0,progress:e.progress}}}export{m as q};
//# sourceMappingURL=courseware-converting.24396c0e.js.map
