import{l as r,dx as N,dy as P,dz as E,a$ as k,q as e,dA as M,bf as b,J as Z,dB as F,bb as _,bc as A,bd as D,bJ as L,cG as H,bg as I,bh as U,bi as z,bj as J}from"./index.ec641b5a.js";import{u as y,g as V}from"./routes.96a891de.js";import{j as $}from"./join-room-handler.09766337.js";var B=function(t){r.exports.useEffect(t,[])};const G=B;var O=function(t){var o=r.exports.useRef(t);o.current=t,G(function(){return function(){return o.current()}})};const T=O;var W=function(t){var o=r.exports.useRef(0),l=r.exports.useState(t),n=l[0],m=l[1],c=r.exports.useCallback(function(a){cancelAnimationFrame(o.current),o.current=requestAnimationFrame(function(){m(a)})},[]);return T(function(){cancelAnimationFrame(o.current)}),[n,c]};const q=W;var Y=function(t,o){t===void 0&&(t=1/0),o===void 0&&(o=1/0);var l=q({width:N?window.innerWidth:t,height:N?window.innerHeight:o}),n=l[0],m=l[1];return r.exports.useEffect(function(){if(N){var c=function(){m({width:window.innerWidth,height:window.innerHeight})};return P(window,"resize",c),function(){E(window,"resize",c)}}},[]),n};const K=Y,Q=!0;const X="data:image/svg+xml;charset=utf8,%3csvg width='53' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cg fill='none' fill-rule='evenodd'%3e%3ctext font-family='PingFangSC-Medium%2c PingFang SC' font-size='16' font-weight='400' fill='%23444E60'%3e %3ctspan x='24' y='17'%3eFlat%3c/tspan%3e %3c/text%3e%3cpath d='M2.727 15.545h2.728v2.728a2.727 2.727 0 1 1-2.728-2.728Z' fill='%23D1E1FA'/%3e%3cpath d='M4.54 8.273h8.187v2.732a2.722 2.722 0 0 1-2.722 2.722H4.54a2.722 2.722 0 0 1-2.722-2.722v-.01A2.722 2.722 0 0 1 4.54 8.273Z' fill='%2383B1FD'/%3e%3cpath d='M6.358 1H20v2.733a2.722 2.722 0 0 1-2.722 2.722H6.358a2.722 2.722 0 0 1-2.722-2.722v-.011A2.722 2.722 0 0 1 6.358 1Z' fill='%233381FF'/%3e%3c/g%3e%3c/svg%3e",ee="data:image/svg+xml;charset=utf8,%3csvg width='72' height='72' xmlns='http://www.w3.org/2000/svg'%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath d='M18 42v8a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4v-8h0' stroke='%233381FF' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M18 50a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4H18Zm7.707-16.293 9.586 9.586a1 1 0 0 0 1.414 0l9.586-9.586A1 1 0 0 0 45.586 32H39V19a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v13h-6.586a1 1 0 0 0-.707 1.707Z' fill='%233381FF'/%3e%3c/g%3e%3c/svg%3e",ie="data:image/svg+xml;charset=utf8,%3csvg width='72' height='72' xmlns='http://www.w3.org/2000/svg'%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath fill='white' d='M12 12h48v48H12z'/%3e%3crect stroke='%233381FF' stroke-width='3' stroke-linejoin='round' x='18' y='18' width='36' height='36' rx='4'/%3e%3cpath stroke='%233381FF' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' d='M30 41h12m-6-6v12'/%3e%3cpath d='M50 18a4 4 0 0 1 4 4v8H18v-8a4 4 0 0 1 4-4Zm-25 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z' fill='%233381FF'/%3e%3c/g%3e%3c/svg%3e";var i="/Users/yl/github-repo/openflat/packages/flat-pages/src/JoinPage/JoinPageDesktop.tsx";function ne({isLogin:t,avatar:o,roomUUID:l,privacyURL:n,serviceURL:m,joinRoom:c}){const a=k(),f=y(),d=r.exports.useMemo(()=>`x-agora-flat-client://joinRoom?roomUUID=${l}`,[l]);return e("div",{className:"join-page-container",children:[e("iframe",{height:"0",src:d,style:{display:"none"},title:"[hidden]",width:"0"},void 0,!1,{fileName:i,lineNumber:37,columnNumber:13},this),e("div",{className:"join-page-header-container",children:[e("img",{alt:"app logo",src:X},void 0,!1,{fileName:i,lineNumber:39,columnNumber:17},this),t?e(M,{className:"join-page-header-avatar",icon:e("img",{src:o},void 0,!1,{fileName:i,lineNumber:43,columnNumber:31},this),size:32},void 0,!1,{fileName:i,lineNumber:41,columnNumber:21},this):e("div",{className:"join-page-header-btn",onClick:()=>{l&&(sessionStorage.setItem("roomUUID",l),f(b.LoginPage))},children:a("login")},void 0,!1,{fileName:i,lineNumber:47,columnNumber:21},this)]},void 0,!0,{fileName:i,lineNumber:38,columnNumber:13},this),e("div",{className:"join-page-content-container",children:[e("div",{className:"join-page-content-title",children:a("select-the-way-to-join-room")},void 0,!1,{fileName:i,lineNumber:61,columnNumber:17},this),e("div",{className:"join-page-content-btn-container",children:[e(Z,{className:"join-page-content-btn",onClick:()=>window.open(F,"_blank"),children:[e("img",{alt:"download icon",src:ee},void 0,!1,{fileName:i,lineNumber:67,columnNumber:25},this),e("div",{className:"join-page-content-text-container",children:[e("div",{className:"join-page-content-text",children:a("download-desktop-application")},void 0,!1,{fileName:i,lineNumber:69,columnNumber:29},this),e("span",{className:"join-page-content-sub-text",children:a("download-desktop-application-tips")},void 0,!1,{fileName:i,lineNumber:72,columnNumber:29},this)]},void 0,!0,{fileName:i,lineNumber:68,columnNumber:25},this)]},void 0,!0,{fileName:i,lineNumber:63,columnNumber:21},this),e(Z,{className:"join-page-content-btn",onClick:c,children:[e("img",{alt:"join icon",src:ie},void 0,!1,{fileName:i,lineNumber:78,columnNumber:25},this),e("div",{className:"join-page-content-text-container",children:[e("div",{className:"join-page-content-text",children:a("web-version-join-room")},void 0,!1,{fileName:i,lineNumber:80,columnNumber:29},this),e("span",{className:"join-page-content-sub-text",children:a("web-version-join-room-tips")},void 0,!1,{fileName:i,lineNumber:83,columnNumber:29},this)]},void 0,!0,{fileName:i,lineNumber:79,columnNumber:25},this)]},void 0,!0,{fileName:i,lineNumber:77,columnNumber:21},this)]},void 0,!0,{fileName:i,lineNumber:62,columnNumber:17},this),e("div",{className:"join-page-content-divider",children:e("span",{children:a("or")},void 0,!1,{fileName:i,lineNumber:90,columnNumber:21},this)},void 0,!1,{fileName:i,lineNumber:89,columnNumber:17},this),e("div",{className:"join-page-content-container-open-flat",children:[e("span",{children:a("already-installed-tips")},void 0,!1,{fileName:i,lineNumber:93,columnNumber:21},this),e("a",{href:d,children:a("open-now")},void 0,!1,{fileName:i,lineNumber:94,columnNumber:21},this)]},void 0,!0,{fileName:i,lineNumber:92,columnNumber:17},this)]},void 0,!0,{fileName:i,lineNumber:60,columnNumber:13},this),e("div",{className:"join-page-footer-container",children:[e("a",{href:n,rel:"noreferrer",target:"_blank",children:a("privacy-agreement")},void 0,!1,{fileName:i,lineNumber:98,columnNumber:17},this),e("span",{children:"\uFF5C"},void 0,!1,{fileName:i,lineNumber:101,columnNumber:17},this),e("a",{href:m,rel:"noreferrer",target:"_blank",children:a("service-policy")},void 0,!1,{fileName:i,lineNumber:102,columnNumber:17},this)]},void 0,!0,{fileName:i,lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:i,lineNumber:36,columnNumber:9},this)}const oe="data:image/svg+xml;charset=utf8,%3csvg width='46' height='44' viewBox='0 0 23 22' xmlns='http://www.w3.org/2000/svg'%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath d='M2.727 15.545h2.728v2.728a2.727 2.727 0 1 1-2.728-2.728Z' fill='%23D1E1FA'/%3e%3cpath d='M4.54 8.273h8.187v2.732a2.722 2.722 0 0 1-2.722 2.722H4.54a2.722 2.722 0 0 1-2.722-2.722v-.01A2.722 2.722 0 0 1 4.54 8.273Z' fill='%2383B1FD'/%3e%3cpath d='M6.358 1H20v2.733a2.722 2.722 0 0 1-2.722 2.722H6.358a2.722 2.722 0 0 1-2.722-2.722v-.011A2.722 2.722 0 0 1 6.358 1Z' fill='%233381FF'/%3e%3c/g%3e%3c/svg%3e",ae="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 176 124'%3e%3cg fill='none' fill-rule='evenodd' transform='translate(0 3)'%3e%3cpath fill='white' fill-rule='nonzero' d='m96.067 71 .002 2H96v-2h.067Zm3.96-.112.111 1.997-1.012.05-1.013.035-.057-2a71.943 71.943 0 0 0 1.97-.082Zm3.945-.33.222 1.987-1.008.106-1.01.091-.167-1.993c.656-.055 1.31-.119 1.963-.192Zm3.918-.549.332 1.972-1 .162-1.004.147-.277-1.98a70.86 70.86 0 0 0 1.949-.301Zm3.876-.765.442 1.95-.99.217-.994.204-.387-1.962a70.584 70.584 0 0 0 1.929-.41Zm3.832-.983.551 1.923-.976.272-.981.259-.497-1.937a70.451 70.451 0 0 0 1.903-.517Zm3.769-1.195.658 1.888-.96.327-.965.314-.605-1.907a70.434 70.434 0 0 0 1.872-.622Zm3.69-1.404.763 1.85-.94.38-.945.366-.71-1.87a70.508 70.508 0 0 0 1.833-.726Zm3.612-1.609.865 1.803-.918.433-.923.42-.815-1.828a70.64 70.64 0 0 0 1.791-.828Zm3.423-1.758.962 1.753-.892.482-.9.469-.912-1.78c.585-.3 1.166-.608 1.742-.924Zm3.424-2.005 1.059 1.697-.865.531-.872.519-1.01-1.726c.567-.332 1.13-.673 1.688-1.02Zm3.304-2.19 1.151 1.635-.833.578-.841.567-1.106-1.667a75.434 75.434 0 0 0 1.629-1.113Zm3.175-2.37 1.24 1.569-.8.623-.808.613-1.196-1.603a71.299 71.299 0 0 0 1.564-1.202Zm3.036-2.54 1.325 1.498-.763.667-.773.655-1.283-1.534c.504-.421 1.002-.85 1.494-1.285Zm2.892-2.706 1.406 1.423-.726.708-.736.698-1.366-1.46c.48-.45.954-.906 1.422-1.369Zm2.734-2.857 1.483 1.342-.686.747-.695.737-1.446-1.382a71.44 71.44 0 0 0 1.344-1.444Zm2.57-3.002 1.554 1.258-.643.784-.654.774-1.52-1.3c.428-.5.849-1.005 1.262-1.516Zm2.37-3.1 1.62 1.172-.599.818-.61.81-1.589-1.216c.4-.522.792-1.05 1.178-1.583Zm2.232-3.28 1.684 1.08-.552.85-.565.841-1.653-1.125c.37-.543.732-1.092 1.086-1.645Zm2.042-3.391 1.742.983-.506.88-.517.874-1.714-1.032c.34-.563.671-1.132.995-1.705Zm1.847-3.496 1.793.885-.454.906-.467.899-1.769-.934a70.66 70.66 0 0 0 .897-1.756Zm1.638-3.568 1.84.783-.404.93-.416.924-1.818-.834c.274-.597.54-1.198.798-1.803Zm1.449-3.688 1.881.679-.35.95-.364.945-1.861-.731c.24-.611.471-1.226.694-1.843Zm1.237-3.757 1.917.573-.297.968-.31.965-1.9-.626c.206-.623.402-1.25.59-1.88Zm1.024-3.815 1.945.464-.242.986-.256.982-1.932-.518c.17-.635.332-1.273.485-1.914ZM168 0l5.732 14.565-6.078-.54-.2.994-1.958-.41.153-.763-5.862-.521L168 0Z'/%3e%3crect width='32' height='32' x='56' y='56' fill='white' rx='6'/%3e%3cpath fill='%235D5D5D' fill-rule='nonzero' d='M72 60c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12Zm1.025.85s.752-.436 1.013-.174c.262.261 1.177-.044 3.531 1.351 0 0-.518.553-.631.52.066.12.27.487.413.713.175.274.218.293.218.293l-.174.262.174.043c-.174-.043-.261.48-.514.567-.252.087.078.567-.009.654-.087.087.044.872 0 1.334-.043.462-.218.061-.436 0-.218-.06-.566-.2-.596-.331-.03-.131-.101-.523-.014-.741.087-.218-.262-.436-.436-.596-.174-.16-.872.029-1.003 0-.13-.03-.218-.407-.218-.756 0-.349.61.044.954 0s.398-.913.398-.913l-.02-.739c-.14-.056-.164-.129.063-.223 0 0-.74-.174-.915.218-.175.393-.262.355-.305.744-.044.39-.727.047-.887 0-.16-.046-.596-.57-.596-.57.131-.304.218-.522.218-.522l-.228-.524v-.61Zm-6.878 4.055c.074-.099.567-.96 1.177-.698.61.262 1.003-.305 1.003-.305s.896-.916.95-.785l.053.131c-.054-.13.74-.349.828.087.087.436.61.655.61.655s-.305.522-.218.915c.088.392.393.48.218.828-.174.349-.523.48-.61.654-.087.174-.804-.567-.882-.828-.077-.262-.46-.524-.792-.436-.331.087-1.203.305-1.378.218-.174-.088-1.163-.164-.959-.436Zm11.684 12.817c-.349.916-1.177 2.485-1.613 2.921-.436.436-.96 1.264-1.352 1.57-.392.305-.392.871-.871.828-.48-.044-1.047-1.395-.916-1.744.13-.349-2.398-.96-2.398-.96s-1.09-.13-1.308-2.223a37.723 37.723 0 0 1-.078-.82c-.328-.145-1.613-.676-2.407-.487-.915.218-1.133-.291-1.918-.407l-1.351-1.25s-2.224-2.572-1.962-3.008c.261-.436.261-1.613.305-1.875.043-.262-.348-1.918-.327-2.136.022-.218-.327-1.047-.327-1.047s.828-1.743.959-1.743c.13 0 .61 1.482 1.09 1.525.48.044 1.787-.043 1.984-.261.196-.218.37-.48.588-.48.218 0 .218-.13.61.044.393.174.829.436 1.003.697.175.262-.13.785.785.785s.915-.218 1.046.393c.131.61.286 1.961-.097 2.049-.382.087-1.516 1.414-1.429 1.84.088.427.088 1.08-.087 1.473-.174.392-.305.523-.959.48-.654-.044-1.207-.393-1.388.13-.181.523-.528 1.702.08 1.583 0 0 .96-.292 1.308 0 .349.292 2.572 1.251 2.572 1.251s2.006-2.18 5.145-.785l.523.35.872-.19s1.133-.334 1.526-.247l.392.087v-.174s.349.916 0 1.831Zm5.1-4.97s-.26-.392-.26-.805c0-.413-.306-.372-.306-.895s-.392-.349-.654-.698c-.261-.349-.392.131-.61.175-.218.043-.175.392-.393.806-.218.414-.784.676-.959.598-.174-.077-.828-.663-.872-.794-.043-.13-.915-.872-.891-1.046.024-.175-.242-1.09-.417-1.526-.174-.436 0-2.154 0-2.154-.261-.148 2.398-1.247 2.05-1.378-.35-.13-.524-1.57-.524-1.57l1.27.655c1.269.654 2.872 5.842 2.872 5.842v1.482l-.305 1.308Z'/%3e%3c/g%3e%3c/svg%3e";var s="/Users/yl/github-repo/openflat/packages/flat-pages/src/JoinPage/JoinPageMobile.tsx";const te=window.navigator.userAgent.toLowerCase().includes("micromessenger");function le({roomUUID:t,privacyURL:o,serviceURL:l}){const n=k(),m=r.exports.useMemo(()=>`x-agora-flat-client://joinRoom?roomUUID=${t}`,[t]),c=r.exports.useCallback(()=>{window.location.href=m},[m]),a=()=>{window.location.href=F};return r.exports.useEffect(()=>{c()},[c]),e("div",{className:"join-page-mobile-container",children:[e("iframe",{height:"0",src:m,style:{display:"none"},title:`join ${n("app-name")}`,width:"0"},void 0,!1,{fileName:s,lineNumber:39,columnNumber:13},this),e("div",{className:"join-page-mobile-effect"},void 0,!1,{fileName:s,lineNumber:46,columnNumber:13},this),e("div",{className:"join-page-mobile-header",children:e("div",{className:"join-page-mobile-app-icon",children:e("img",{alt:"flat-logo",src:oe},void 0,!1,{fileName:s,lineNumber:49,columnNumber:21},this)},void 0,!1,{fileName:s,lineNumber:48,columnNumber:17},this)},void 0,!1,{fileName:s,lineNumber:47,columnNumber:13},this),e("div",{className:"join-page-mobile-big-btns",children:[e("button",{className:"join-page-mobile-big-btn",onClick:c,children:[n("open")," ",n("app-name")]},void 0,!0,{fileName:s,lineNumber:53,columnNumber:17},this),e("button",{className:"join-page-mobile-big-btn secondary",onClick:a,children:[n("download")," ",n("app-name")]},void 0,!0,{fileName:s,lineNumber:56,columnNumber:17},this)]},void 0,!0,{fileName:s,lineNumber:52,columnNumber:13},this),e("div",{className:"join-page-mobile-footer",children:[e("a",{href:o,rel:"noreferrer",target:"_blank",children:n("privacy-agreement")},void 0,!1,{fileName:s,lineNumber:61,columnNumber:17},this),e("span",{children:"\uFF5C"},void 0,!1,{fileName:s,lineNumber:64,columnNumber:17},this),e("a",{href:l,rel:"noreferrer",target:"_blank",children:n("service-policy")},void 0,!1,{fileName:s,lineNumber:65,columnNumber:17},this)]},void 0,!0,{fileName:s,lineNumber:60,columnNumber:13},this),te&&e("div",{className:"join-page-mobile-wechat-overlay",children:[e("img",{alt:"[open-in-browser]",src:ae},void 0,!1,{fileName:s,lineNumber:71,columnNumber:21},this),e("strong",{children:n("open-in-browser")},void 0,!1,{fileName:s,lineNumber:72,columnNumber:21},this)]},void 0,!0,{fileName:s,lineNumber:70,columnNumber:17},this)]},void 0,!0,{fileName:s,lineNumber:38,columnNumber:9},this)}var v="/Users/yl/github-repo/openflat/packages/flat-pages/src/JoinPage/index.tsx";const ue=_(function(){var w,x;const o=A(),l=y(),n=r.exports.useContext(D),m=r.exports.useContext(L),[c,a]=r.exports.useState(!1),{width:f}=K(1080),d=H(),{roomUUID:u}=d;r.exports.useEffect(()=>m.configure(),[]),r.exports.useEffect(()=>{async function R(){var j;if((j=n.userInfo)==null?void 0:j.token)try{const h=await V();a(Q?h.hasPhone:!0)}catch(h){console.error(h)}}R()},[]);async function C(){c&&u?n.isTurnOffDeviceTest||window.isElectron?await $(u,l):l(b.DevicesTestPage,{roomUUID:u}):(sessionStorage.setItem("roomUUID",u),l(b.LoginPage))}const S=f<=480,g=o.startsWith("zh")?I:U,p=o.startsWith("zh")?z:J;return e("div",{children:S?e(le,{privacyURL:g,roomUUID:u,serviceURL:p},void 0,!1,{fileName:v,lineNumber:71,columnNumber:17},this):e(ne,{avatar:(x=(w=n.userInfo)==null?void 0:w.avatar)!=null?x:"",isLogin:c,joinRoom:C,privacyURL:g,roomUUID:u,serviceURL:p},void 0,!1,{fileName:v,lineNumber:77,columnNumber:17},this)},void 0,!1,{fileName:v,lineNumber:69,columnNumber:9},this)});export{ue as JoinPage,ue as default};
//# sourceMappingURL=index.a17acbc8.js.map
