import{l as n,bd as c,bf as l}from"./index.ec641b5a.js";import{h as f,g,e as h}from"./routes.96a891de.js";function m(){const a=f(),e=n.exports.useContext(c),[r,i]=n.exports.useState(!1);return n.exports.useEffect(()=>{let s=!1;async function u(){var o;if(!((o=e.userInfo)!=null&&o.token))return!1;if(e.lastLoginCheck&&Date.now()-e.lastLoginCheck<2*60*60*1e3)return!0;try{const t=await g();return e.updateUserInfo(t),e.updateLastLoginCheck(Date.now()),p(t.token),t.hasPhone}catch(t){e.updateLastLoginCheck(null),console.error(t),h(t)}return!1}return u().then(o=>{s||(o?i(!0):a(l.LoginPage))}),()=>{s=!0}},[]),r}function p(a){document.cookie=`flatJWTToken=${a}; SameSite=Lax; domain=whiteboard.agora.io; max-age=${2505600}`}export{p as s,m as u};
//# sourceMappingURL=use-login-check.7d6be6b3.js.map
