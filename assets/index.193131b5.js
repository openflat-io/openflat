import{bb as p,l as s,bp as N,dd as k,q as r,cH as P,de as B,b5 as x,df as w,dg as L,cG as M}from"./index.ec641b5a.js";import{u as V}from"./use-login-check.7d6be6b3.js";import{e as f}from"./routes.96a891de.js";import{E as h}from"./index.857b4caa.js";import{u as v}from"./lifecycle.f56c70c9.js";var y="/Users/yl/github-repo/openflat/packages/flat-pages/src/ModifyOrdinaryRoomPage/OrdinaryRoomForm.tsx";const j=p(function({roomUUID:o}){const[t,u]=s.exports.useState(!1),a=N(),n=v(),[m,c]=s.exports.useState();if(s.exports.useEffect(()=>{n(k(o)).then(({roomInfo:e})=>{c({title:e.title,type:e.roomType,beginTime:new Date(e.beginTime),endTime:new Date(e.endTime),isPeriodic:!1,region:e.region})}).catch(e=>{console.error(e),f(e),a.goBack()})},[o]),!m)return r(P,{},void 0,!1,{fileName:y,lineNumber:48,columnNumber:16},this);return r(h,{initialValues:m,loading:t,type:"ordinary",onSubmit:g},void 0,!1,{fileName:y,lineNumber:52,columnNumber:9},this);async function g(e){u(!0);try{await n(B({roomUUID:o,beginTime:e.beginTime.valueOf(),endTime:e.endTime.valueOf(),title:e.title,type:e.type})),x.success("\u4FEE\u6539\u6210\u529F"),a.goBack()}catch(d){console.error(d),f(d),u(!1)}}});var T="/Users/yl/github-repo/openflat/packages/flat-pages/src/ModifyOrdinaryRoomPage/PeriodicSubRoomForm.tsx";const _=p(function({roomUUID:o,periodicUUID:t}){const[u,a]=s.exports.useState(!1),n=N(),m=v(),[c,g]=s.exports.useState(),[e,d]=s.exports.useState(0),[S,O]=s.exports.useState(0);if(s.exports.useEffect(()=>{m(w({roomUUID:o,periodicUUID:t,needOtherRoomTimeInfo:!0})).then(({roomInfo:i,previousPeriodicRoomBeginTime:l,nextPeriodicRoomEndTime:E})=>{g({title:i.title,type:i.roomType,beginTime:new Date(i.beginTime),endTime:new Date(i.endTime),isPeriodic:!1,region:i.region}),d(l),O(E)}).catch(i=>{console.error(i),f(i),n.goBack()})},[o,t]),!c)return r(P,{},void 0,!1,{fileName:T,lineNumber:68,columnNumber:16},this);return r(h,{initialValues:c,loading:u,nextPeriodicRoomEndTime:S,previousPeriodicRoomBeginTime:e,type:"periodicSub",onSubmit:F},void 0,!1,{fileName:T,lineNumber:72,columnNumber:9},this);async function F(i){a(!0);try{await m(L({roomUUID:o,periodicUUID:t,beginTime:i.beginTime.valueOf(),endTime:i.endTime.valueOf()})),x.success("\u4FEE\u6539\u6210\u529F"),n.goBack()}catch(l){console.error(l),f(l),a(!1)}}});var R="/Users/yl/github-repo/openflat/packages/flat-pages/src/ModifyOrdinaryRoomPage/index.tsx";const G=p(function(){V();const{roomUUID:o,periodicUUID:t}=M();return t?r(_,{periodicUUID:t,roomUUID:o},void 0,!1,{fileName:R,lineNumber:20,columnNumber:20},this):r(j,{roomUUID:o},void 0,!1,{fileName:R,lineNumber:22,columnNumber:20},this)});export{G as ModifyOrdinaryRoomPage,G as default};
//# sourceMappingURL=index.193131b5.js.map
