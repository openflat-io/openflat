import{bb as y,cG as b,bp as P,l as s,dh as k,di as w,dj as h,q as m,cH as R,dk as E,b5 as x,bf as N}from"./index.ec641b5a.js";import{u as D,e as d}from"./routes.96a891de.js";import{u as F}from"./lifecycle.f56c70c9.js";import{E as H}from"./index.857b4caa.js";import{u as L}from"./use-login-check.7d6be6b3.js";var c="/Users/yl/github-repo/openflat/packages/flat-pages/src/ModifyPeriodicRoomPage/index.tsx";const V=y(function(){L();const{periodicUUID:t}=b(),u=P(),f=D(),a=F(),[p,r]=s.exports.useState(!1),[n,g]=s.exports.useState();if(s.exports.useEffect(()=>{a(k(t)).then(({periodic:e,rooms:i})=>{const o=new Date(i[0].beginTime),T=new Date(e.endTime);g({title:e.title,type:e.roomType,beginTime:o,endTime:new Date(i[0].endTime),isPeriodic:!0,region:e.region,periodic:e.rate===null||e.rate===void 0?{weeks:e.weeks,endType:"time",...w(o,e.weeks,T)}:{weeks:e.weeks,endType:"rate",rate:e.rate,endTime:h(o,e.weeks,e.rate)}})}).catch(e=>{console.error(e),d(e),u.goBack()})},[t]),!n)return m(R,{},void 0,!1,{fileName:c,lineNumber:83,columnNumber:20},this);return m(H,{initialValues:n,loading:p,type:"periodic",onSubmit:l},void 0,!1,{fileName:c,lineNumber:87,columnNumber:13},this);async function l(e){r(!0);try{await a(E({periodicUUID:t,beginTime:e.beginTime.valueOf(),endTime:e.endTime.valueOf(),title:e.title,type:e.type,periodic:e.periodic.endType==="rate"?{weeks:e.periodic.weeks,rate:e.periodic.rate}:{weeks:e.periodic.weeks,endTime:e.periodic.endTime.valueOf()}})),x.success("\u4FEE\u6539\u6210\u529F"),f(N.HomePage)}catch(i){console.error(i),d(i),r(!1)}}});export{V as ModifyPeriodicRoomPage,V as default};
//# sourceMappingURL=index.bc5e8889.js.map
