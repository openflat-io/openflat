import{q as e,a$ as M,J as H,ad as Ue,aC as se,aF as ne,y as je,by as Y,l as a,b7 as Ge,bz as Te,bb as E,b6 as ce,bd as me,bA as we,bB as U,aR as X,bC as Ve,bD as ve,s as ue,aA as ke,bE as $e,aE as ae,bf as z,bF as Re,D as Ze,G as ee,bG as re,bH as Ae,b5 as oe,bI as R,bJ as ze}from"./index.ec641b5a.js";import{u as de,e as Q}from"./routes.96a891de.js";import{u as fe}from"./lifecycle.f56c70c9.js";import{j as Me}from"./join-room-handler.09766337.js";import{S as Ke}from"./SVGMore.f7bea27e.js";import{S as Je}from"./Skeleton.1ecba237.js";import{I as We}from"./index.21e94715.js";import{R as qe}from"./index.af7aa381.js";import{u as Xe}from"./use-login-check.7d6be6b3.js";import{A as Qe}from"./index.7e684ce5.js";const Ye=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Se(s){return typeof s=="string"&&Ye.test(s)}function eo(s){if(!Se(s))throw TypeError("Invalid UUID");return parseInt(s.slice(14,15),16)}var $="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/HomePageHeroButton/icons/SVGJoin/index.tsx";const oo=()=>e("svg",{className:"svg-join",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",children:e("g",{fill:"none",fillRule:"evenodd",children:[e("circle",{className:"svg-join-background",cx:"20",cy:"20",fill:"#3381FF",r:"20"},void 0,!1,{fileName:$,lineNumber:7,columnNumber:13},void 0),e("path",{d:"M8 8h24v24H8z",fill:"#FFF",opacity:".01"},void 0,!1,{fileName:$,lineNumber:8,columnNumber:13},void 0),e("path",{d:"m20 13 6-2v16l-6 2z",fill:"#FFF",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"},void 0,!1,{fileName:$,lineNumber:9,columnNumber:13},void 0),e("path",{d:"M18 27h-4V11h12v16",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"},void 0,!1,{fileName:$,lineNumber:16,columnNumber:13},void 0)]},void 0,!0,{fileName:$,lineNumber:6,columnNumber:9},void 0)},void 0,!1,{fileName:$,lineNumber:5,columnNumber:5},void 0);var W="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/HomePageHeroButton/icons/SVGBegin/index.tsx";const io=()=>e("svg",{className:"svg-begin",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",children:e("g",{fill:"none",fillRule:"evenodd",children:[e("circle",{className:"svg-begin-background",cx:"20",cy:"20",fill:"#3381FF",r:"20"},void 0,!1,{fileName:W,lineNumber:7,columnNumber:13},void 0),e("path",{d:"M8 8h24v24H8z",fill:"#FFF",opacity:".01"},void 0,!1,{fileName:W,lineNumber:8,columnNumber:13},void 0),e("path",{d:"M11 20h18m-9-9v18",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"},void 0,!1,{fileName:W,lineNumber:9,columnNumber:13},void 0)]},void 0,!0,{fileName:W,lineNumber:6,columnNumber:9},void 0)},void 0,!1,{fileName:W,lineNumber:5,columnNumber:5},void 0);var Z="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/HomePageHeroButton/icons/SVGSchedule/index.tsx";const lo=()=>e("svg",{className:"svg-schedule",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",children:e("g",{fill:"none",fillRule:"evenodd",children:[e("circle",{className:"svg-schedule-background",cx:"20",cy:"20",fill:"#3381FF",r:"20"},void 0,!1,{fileName:Z,lineNumber:7,columnNumber:13},void 0),e("path",{d:"M8 8h24v24H8z",fill:"#FFF",opacity:".01"},void 0,!1,{fileName:Z,lineNumber:8,columnNumber:13},void 0),e("path",{d:"M12 14h16v14H12zm4-2v2m8-2v4",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"},void 0,!1,{fileName:Z,lineNumber:9,columnNumber:13},void 0),e("path",{d:"M12 18h16v-3a1 1 0 0 0-1-1H13a1 1 0 0 0-1 1v3Z",fill:"#FFF",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"},void 0,!1,{fileName:Z,lineNumber:15,columnNumber:13},void 0)]},void 0,!0,{fileName:Z,lineNumber:6,columnNumber:9},void 0)},void 0,!1,{fileName:Z,lineNumber:5,columnNumber:5},void 0);var ie="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/HomePageHeroButton/index.tsx";const to={join:oo,begin:io,schedule:lo},he=({type:s,onClick:l})=>{const o=M();return e(H,{className:"home-page-hero-button",onClick:l,children:[e("span",{className:"home-page-hero-button-icon",children:Ue.createElement(to[s])},void 0,!1,{fileName:ie,lineNumber:26,columnNumber:13},void 0),e("span",{className:"home-page-hero-button-text",children:o(`home-page-hero-button-type.${s}`)},void 0,!1,{fileName:ie,lineNumber:29,columnNumber:13},void 0)]},void 0,!0,{fileName:ie,lineNumber:25,columnNumber:9},void 0)};var q="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/RoomList/RoomListItem/RoomListItemMenus.tsx";function ao({actions:s,onAction:l}){return e(se,{overlay:e(ne,{items:s.map(o=>({key:o.key,onClick:()=>l(o.key),label:o.text}))},void 0,!1,{fileName:q,lineNumber:18,columnNumber:17},this),overlayClassName:"room-list-item-sub-menu",trigger:["click"],children:e(H,{className:"room-list-item-more",type:"text",children:e(Ke,{},void 0,!1,{fileName:q,lineNumber:30,columnNumber:17},this)},void 0,!1,{fileName:q,lineNumber:29,columnNumber:13},this)},void 0,!1,{fileName:q,lineNumber:16,columnNumber:9},this)}var b="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/RoomList/RoomListItem/index.tsx";function ro({title:s,beginTime:l,endTime:o,ownerName:t,ownerAvatar:m,status:n,isPeriodic:N,menuActions:f,primaryAction:u,onClick:y,onAction:x}){const S=M();return e("div",{className:je("room-list-item",{pointer:!!y}),children:e("div",{className:"room-list-item-content",children:[m&&e("div",{className:"room-list-item-left",children:e("figure",{className:"room-list-item-owner-avatar",title:t,children:e("img",{alt:t,src:m},void 0,!1,{fileName:b,lineNumber:47,columnNumber:29},this)},void 0,!1,{fileName:b,lineNumber:46,columnNumber:25},this)},void 0,!1,{fileName:b,lineNumber:45,columnNumber:21},this),e("div",{className:"room-list-item-middle",onClick:y,children:[e("h1",{className:"room-list-item-title",children:s},void 0,!1,{fileName:b,lineNumber:52,columnNumber:21},this),e("div",{className:"room-list-item-time-date",children:[e("span",{className:"room-list-item-time",children:[l&&Y(l,"HH:mm")," ~ ",o&&Y(o,"HH:mm")]},void 0,!0,{fileName:b,lineNumber:54,columnNumber:25},this),e("span",{className:"room-list-item-date",children:l&&Y(l,"yyyy/MM/dd")},void 0,!1,{fileName:b,lineNumber:59,columnNumber:25},this),e("span",{children:N&&`(${S("periodic")})`},void 0,!1,{fileName:b,lineNumber:62,columnNumber:25},this)]},void 0,!0,{fileName:b,lineNumber:53,columnNumber:21},this),e("div",{children:e("span",{className:`room-list-item-status-${n==="upcoming"?"warning":n==="running"?"success":"default"}`,children:S(`room-status.${n}`)},void 0,!1,{fileName:b,lineNumber:65,columnNumber:25},this)},void 0,!1,{fileName:b,lineNumber:64,columnNumber:21},this)]},void 0,!0,{fileName:b,lineNumber:51,columnNumber:17},this),e("div",{className:"room-list-item-right",children:[f&&e(ao,{actions:f,onAction:x},void 0,!1,{fileName:b,lineNumber:79,columnNumber:37},this),u&&e(H,{className:"room-list-item-primary-action",disabled:u.disabled,type:u.type,onClick:()=>x(u.key),children:u.text},u.key,!1,{fileName:b,lineNumber:81,columnNumber:25},this)]},void 0,!0,{fileName:b,lineNumber:78,columnNumber:17},this)]},void 0,!0,{fileName:b,lineNumber:43,columnNumber:13},this)},void 0,!1,{fileName:b,lineNumber:42,columnNumber:9},this)}const so="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23F4F8FF' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cg filter='url(%23a)'%3e%3cpath fill='white' d='M65 60c0-5.523-4.477-10-10-10h82c5.523 0 10 4.477 10 10v90H75c-5.523 0-10-4.477-10-10V60Z'/%3e%3c/g%3e%3cpath fill='%235B9AFF' d='M75 150c5.523 0 10-4.477 10-10h80c0 5.523-4.477 10-10 10H75Z'/%3e%3cpath fill='%232867CC' d='M45 60h20c0-5.523-4.477-10-10-10s-10 4.477-10 10Z'/%3e%3cpath fill='%23EBF2FF' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3cmask id='b' width='73' height='73' x='103' y='42' maskUnits='userSpaceOnUse' style='mask-type:alpha'%3e%3cpath fill='white' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3c/mask%3e%3cg mask='url(%23b)'%3e%3cpath fill='%23050D1A' fill-rule='evenodd' d='m104.352 109.406 4.242 4.242-2.828 2.829-4.243-4.243 2.829-2.828Z' clip-rule='evenodd'/%3e%3c/g%3e%3cpath fill='%235B9AFF' d='m166.577 44.352 7.07 7.071-60.81 60.811-7.071-7.07z'/%3e%3cpath fill='%233381FF' d='m164.456 52.13 1.414 1.414-50.911 50.912-1.415-1.414z'/%3e%3cpath fill='url(%23c)' d='M25 110c0-13.255 10.745-24 24-24s24 10.745 24 24v24H49c-13.255 0-24-10.745-24-24Z' style='mix-blend-mode:multiply'/%3e%3ccircle cx='39' cy='110' r='3' fill='white'/%3e%3ccircle cx='49' cy='110' r='3' fill='white'/%3e%3ccircle cx='59' cy='110' r='3' fill='white'/%3e%3cdefs%3e%3clinearGradient id='c' x1='1' x2='49' y1='110' y2='158' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%233381FF'/%3e%3cstop offset='1' stop-color='%233381FF' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='152' height='160' x='25' y='40' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.2 0 0 0 0 0.505882 0 0 0 0 1 0 0 0 0.25 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_0_325'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_0_325' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",no="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23F4F8FF' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cpath fill='%233381FF' fill-rule='evenodd' d='M85 133h30v14H85v-14Z' clip-rule='evenodd'/%3e%3cpath fill='%233381FF' d='M72 143h56v4H72z'/%3e%3cpath fill='%232867CC' fill-rule='evenodd' d='M85 133v10H72v4h25l14-14' clip-rule='evenodd'/%3e%3cg filter='url(%23a)'%3e%3crect width='120' height='80' x='40' y='53' fill='white' rx='4'/%3e%3c/g%3e%3cpath fill='%23F4F8FF' fill-rule='evenodd' d='m47 133 80-80h29a4 4 0 0 1 4 4v72a4 4 0 0 1-4 4H47Z' clip-rule='evenodd'/%3e%3cpath fill='%235B9AFF' d='m52 73 8 2.667-3.556 1.777L54.667 81 52 73Z'/%3e%3cpath stroke='url(%23b)' stroke-dasharray='1' d='M60 81s4.383 18.6 19 21c14.617 2.4 34.416-10.431 48-10 13.584.431 15 12 15 12'/%3e%3cpath fill='%235B9AFF' d='M40 119h120v10a4 4 0 0 1-4 4H44a4 4 0 0 1-4-4v-10Z'/%3e%3ccircle cx='100' cy='126' r='4' fill='%232867CC'/%3e%3cpath fill='url(%23c)' fill-rule='evenodd' d='M116 36a8 8 0 0 0-8 8v28a8 8 0 0 0 8 8h8v12l12-12h20a8 8 0 0 0 8-8V44a8 8 0 0 0-8-8h-40Z' clip-rule='evenodd' style='mix-blend-mode:multiply'/%3e%3cpath fill='white' d='M124 58h24v5h-24zm0-8h16v5h-16z'/%3e%3cdefs%3e%3clinearGradient id='b' x1='184.778' x2='181.375' y1='122.247' y2='72.669' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23D6E5FF' stop-opacity='.01'/%3e%3cstop offset='1' stop-color='%23D6E5FF'/%3e%3c/linearGradient%3e%3clinearGradient id='c' x1='108' x2='108' y1='36' y2='92' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%233381FF'/%3e%3cstop offset='1' stop-color='%233381FF' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='180' height='140' x='10' y='43' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.2 0 0 0 0 0.505882 0 0 0 0 1 0 0 0 0.247897 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_109_618'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_109_618' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",co="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23272A30' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cg filter='url(%23a)'%3e%3cpath fill='%23ECF0F7' d='M65 60c0-5.523-4.477-10-10-10h82c5.523 0 10 4.477 10 10v86a4 4 0 0 1-4 4H75c-5.523 0-10-4.477-10-10V60Z'/%3e%3c/g%3e%3cpath fill='%237B7E84' fill-rule='evenodd' d='M75 150c5.523 0 10-4.477 10-10h80c0 5.523-4.477 10-10 10H75Z' clip-rule='evenodd'/%3e%3cpath fill='%234B4D54' fill-rule='evenodd' d='M45 60h20c0-5.523-4.477-10-10-10s-10 4.477-10 10Z' clip-rule='evenodd'/%3e%3cpath fill='%23EBF2FF' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3cmask id='b' width='73' height='73' x='103' y='42' maskUnits='userSpaceOnUse' style='mask-type:alpha'%3e%3cpath fill='white' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3c/mask%3e%3cg mask='url(%23b)'%3e%3cpath fill='%23070A11' fill-rule='evenodd' d='m104.352 109.406 4.242 4.242-2.828 2.829-4.243-4.243 2.829-2.828Z' clip-rule='evenodd'/%3e%3c/g%3e%3cpath fill='%237B7E84' d='m166.577 44.352 7.07 7.071-60.81 60.811-7.071-7.07z'/%3e%3cpath fill='%235D6066' d='m164.456 52.13 1.414 1.414-50.912 50.912-1.414-1.414z'/%3e%3cpath fill='url(%23c)' d='M25 110c0-13.255 10.745-24 24-24s24 10.745 24 24v24H49c-13.255 0-24-10.745-24-24Z' style='mix-blend-mode:multiply'/%3e%3ccircle cx='39' cy='110' r='3' fill='%23ECF0F7'/%3e%3ccircle cx='49' cy='110' r='3' fill='%23ECF0F7'/%3e%3ccircle cx='59' cy='110' r='3' fill='%23ECF0F7'/%3e%3cdefs%3e%3clinearGradient id='c' x1='1' x2='49' y1='110' y2='158' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%235D6066'/%3e%3cstop offset='1' stop-color='%235D6066' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='152' height='160' x='25' y='40' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0.247897 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_132_198'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_132_198' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",mo="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23272A30' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cpath fill='%235D6066' fill-rule='evenodd' d='M85 133h30v14H85v-14Z' clip-rule='evenodd'/%3e%3cpath fill='%235D6066' d='M72 143h56v4H72z'/%3e%3cpath fill='%234B4D54' fill-rule='evenodd' d='M85 133v10H72v4h25l14-14' clip-rule='evenodd'/%3e%3cg filter='url(%23a)'%3e%3crect width='120' height='80' x='40' y='53' fill='%23ECF0F7' rx='4'/%3e%3c/g%3e%3cpath fill='%23E5E8F0' fill-rule='evenodd' d='m47 133 80-80h29a4 4 0 0 1 4 4v72a4 4 0 0 1-4 4H47Z' clip-rule='evenodd'/%3e%3cpath fill='%237B7E84' d='m52 73 8 2.667-3.556 1.777L54.667 81 52 73Z'/%3e%3cpath stroke='url(%23b)' stroke-dasharray='1' d='M60 81s4.383 18.6 19 21c14.617 2.4 34.416-10.431 48-10 13.584.431 15 12 15 12'/%3e%3cpath fill='%237B7E84' d='M40 119h120v10a4 4 0 0 1-4 4H44a4 4 0 0 1-4-4v-10Z'/%3e%3ccircle cx='100' cy='126' r='4' fill='%234B4D54'/%3e%3cpath fill='url(%23c)' fill-rule='evenodd' d='M116 36a8 8 0 0 0-8 8v28a8 8 0 0 0 8 8h8v12l12-12h20a8 8 0 0 0 8-8V44a8 8 0 0 0-8-8h-40Z' clip-rule='evenodd' style='mix-blend-mode:multiply'/%3e%3cpath fill='%23ECF0F7' d='M124 58h24v5h-24zm0-8h16v5h-16z'/%3e%3cdefs%3e%3clinearGradient id='b' x1='184.778' x2='181.375' y1='122.247' y2='72.669' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23D5D9E0' stop-opacity='.01'/%3e%3cstop offset='1' stop-color='%23D5D9E0'/%3e%3c/linearGradient%3e%3clinearGradient id='c' x1='108' x2='108' y1='36' y2='92' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%235D6066'/%3e%3cstop offset='1' stop-color='%235D6066' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='180' height='140' x='10' y='43' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0.247897 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_132_179'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_132_179' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";var le="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/RoomList/RoomListEmpty/index.tsx";const uo=({isHistory:s})=>{const l=M(),o=a.exports.useContext(Ge);return e("div",{className:"room-list-empty",children:[e("img",{alt:"empty",height:"160px",src:s?o?co:so:o?mo:no,width:"160px"},void 0,!1,{fileName:le,lineNumber:20,columnNumber:13},void 0),e("span",{className:"room-list-empty-content",children:l(s?"no-record":"no-room")},void 0,!1,{fileName:le,lineNumber:34,columnNumber:13},void 0)]},void 0,!0,{fileName:le,lineNumber:19,columnNumber:9},void 0)};var ge="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/RoomList/RoomListSkeletons/index.tsx";const fo=()=>e("div",{className:"room-list-skeletons",children:Array(4).fill(0).map((s,l)=>e(Je,{active:!0,paragraph:{rows:4,width:["13%","50%","13%","13%"]},title:!1},l,!1,{fileName:ge,lineNumber:12,columnNumber:21},void 0))},void 0,!1,{fileName:ge,lineNumber:8,columnNumber:9},void 0);var ye="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/RoomList/RoomListAllLoaded/index.tsx";const ho=()=>{const s=M();return e("div",{className:"room-list-all-loaded",children:e("span",{className:"room-list-all-loaded-content",children:s("all-loaded")},void 0,!1,{fileName:ye,lineNumber:13,columnNumber:13},void 0)},void 0,!1,{fileName:ye,lineNumber:12,columnNumber:9},void 0)};var P="/Users/yl/github-repo/openflat/packages/flat-components/src/components/HomePage/RoomList/index.tsx";function Ce({title:s,filters:l,activeTab:o,onTabActive:t,children:m,style:n}){const N=a.exports.useMemo(()=>{var f;return(f=l==null?void 0:l.find(u=>u.key===o))==null?void 0:f.title},[l,o]);return e("div",{className:"room-list",style:n,children:[e("div",{className:"room-list-header",children:[e("h1",{className:"room-list-title",children:s},void 0,!1,{fileName:P,lineNumber:41,columnNumber:17},this),l&&e(se,{overlay:e(ne,{items:l.map(({title:f,key:u})=>({key:u,onClick:()=>t==null?void 0:t(u),label:f}))},void 0,!1,{fileName:P,lineNumber:45,columnNumber:29},this),children:e("span",{className:"room-list-filters",children:[N," ",e(Te,{height:24,width:24},void 0,!1,{fileName:P,lineNumber:55,columnNumber:46},this)]},void 0,!0,{fileName:P,lineNumber:54,columnNumber:25},this)},void 0,!1,{fileName:P,lineNumber:43,columnNumber:21},this)]},void 0,!0,{fileName:P,lineNumber:40,columnNumber:13},this),e("div",{className:"room-list-body fancy-scrollbar",children:m},void 0,!1,{fileName:P,lineNumber:60,columnNumber:13},this)]},void 0,!0,{fileName:P,lineNumber:39,columnNumber:9},this)}var te="/Users/yl/github-repo/openflat/packages/flat-components/src/components/RemoveHistoryRoomModal/index.tsx";const po=E(function({visible:l,onCancel:o,onConfirm:t,loading:m}){const n=M();return e(ce,{destroyOnClose:!0,footer:[e(H,{onClick:o,children:n("cancel")},"exit-cancel",!1,{fileName:te,lineNumber:22,columnNumber:21},this),e(H,{danger:!0,loading:m,onClick:t,children:n("confirm")},"exit-confirm",!1,{fileName:te,lineNumber:25,columnNumber:21},this)],open:l,title:n("delete-room-records"),wrapClassName:"remove-history-room-modal-container",onCancel:o,children:n("delete-room-records-tips")},void 0,!1,{fileName:te,lineNumber:19,columnNumber:13},this)});var p="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/MainRoomMenu/CreateRoomBox.tsx";const No=E(function({onCreateRoom:l}){var T;const o=M(),t=fe(),m=a.exports.useContext(me),n=a.exports.useContext(we),[N]=U.useForm(),[f,u]=a.exports.useState(!1),[y,x]=a.exports.useState(!1),[S,C]=a.exports.useState(!1),[O,j]=a.exports.useState(n.getRegion()),[K,G]=a.exports.useState(X.BigClass),d=a.exports.useRef(null),I={roomTitle:(T=m.userInfo)!=null&&T.name?o("create-room-default-title",{name:m.userInfo.name}):"",roomType:X.BigClass,autoCameraOn:n.autoCameraOn};a.exports.useEffect(()=>{let c=NaN;return y&&(c=window.setTimeout(()=>{d.current&&(d.current.focus(),d.current.select())},0)),()=>{window.clearTimeout(c)}},[y]);const D=e(ne,{className:"create-room-modal-menu-item",items:Ve.map(c=>({key:c,label:e(a.exports.Fragment,{children:[e("img",{alt:c,src:ve[c],style:{width:22}},void 0,!1,{fileName:p,lineNumber:67,columnNumber:25},this),e("span",{style:{paddingLeft:8},children:o(`region-${c}`)},void 0,!1,{fileName:p,lineNumber:68,columnNumber:25},this)]},void 0,!0,{fileName:p,lineNumber:66,columnNumber:21},this)})),style:{width:"auto"},onClick:c=>j(c.key)},void 0,!1,{fileName:p,lineNumber:61,columnNumber:9},this);return e(ue,{children:[e(he,{type:"begin",onClick:()=>{N.setFieldsValue(I),x(!0),B()}},void 0,!1,{fileName:p,lineNumber:79,columnNumber:13},this),e(ce,{forceRender:!0,footer:[e(H,{onClick:J,children:o("cancel")},"cancel",!1,{fileName:p,lineNumber:90,columnNumber:21},this),e(H,{disabled:!S,loading:f,type:"primary",onClick:v,children:o("begin")},"submit",!1,{fileName:p,lineNumber:93,columnNumber:21},this)],open:y,title:o("home-page-hero-button-type.begin"),width:400,wrapClassName:"create-room-box-container",onCancel:J,onOk:v,children:e(U,{className:"main-room-menu-form",form:N,initialValues:I,layout:"vertical",name:"createRoom",onFieldsChange:B,children:[e(U.Item,{label:o("theme"),name:"roomTitle",rules:[{required:!0,message:o("enter-room-theme")},{max:50,message:o("theme-can-be-up-to-50-characters")}],children:e(ke,{ref:d,placeholder:o("enter-room-theme"),suffix:e(se,{overlay:D,placement:"bottomRight",trigger:["click"],children:e("img",{alt:O,src:ve[O],style:{cursor:"pointer",width:22,marginRight:0}},void 0,!1,{fileName:p,lineNumber:135,columnNumber:37},this)},void 0,!1,{fileName:p,lineNumber:130,columnNumber:33},this),onKeyUp:r},void 0,!1,{fileName:p,lineNumber:126,columnNumber:25},this)},void 0,!1,{fileName:p,lineNumber:118,columnNumber:21},this),e(U.Item,{label:o("type"),name:"roomType",valuePropName:"type",children:e($e,{value:K,onChange:c=>G(X[c])},void 0,!1,{fileName:p,lineNumber:146,columnNumber:25},this)},void 0,!1,{fileName:p,lineNumber:145,columnNumber:21},this),e(U.Item,{label:o("join-options"),children:e(U.Item,{noStyle:!0,name:"autoCameraOn",valuePropName:"checked",children:e(ae,{children:o("turn-on-the-camera")},void 0,!1,{fileName:p,lineNumber:150,columnNumber:29},this)},void 0,!1,{fileName:p,lineNumber:149,columnNumber:25},this)},void 0,!1,{fileName:p,lineNumber:148,columnNumber:21},this)]},void 0,!0,{fileName:p,lineNumber:110,columnNumber:17},this)},void 0,!1,{fileName:p,lineNumber:87,columnNumber:13},this)]},void 0,!0);function r(c){c.key==="Enter"&&!c.ctrlKey&&!c.shiftKey&&!c.altKey&&!c.metaKey&&(c.preventDefault(),t(N.validateFields()).then(v))}async function v(){try{await t(N.validateFields())}catch{return}u(!0);try{const c=N.getFieldsValue();n.updateAutoCameraOn(c.autoCameraOn),await t(l(c.roomTitle,c.roomType,O)),u(!1),x(!1)}catch(c){console.error(c),u(!1)}}function J(){x(!1)}function B(){C(N.getFieldsError().every(c=>c.errors.length<=0))}});var F="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/MainRoomMenu/JoinRoomBox.tsx";const bo=/(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)/i,vo=E(function({onJoinRoom:l}){const o=M(),t=fe(),m=a.exports.useContext(we),[n]=U.useForm(),[N,f]=a.exports.useState(!1),[u,y]=a.exports.useState(!1),[x,S]=a.exports.useState(!1),C=a.exports.useRef(null);a.exports.useEffect(()=>{let r=NaN;return u&&(r=window.setTimeout(()=>{C.current&&(C.current.focus(),C.current.select())},0)),()=>{window.clearTimeout(r)}},[u]);const O={roomUUID:"",autoCameraOn:m.autoCameraOn,autoMicOn:m.autoMicOn};return e(ue,{children:[e(he,{type:"join",onClick:K},void 0,!1,{fileName:F,lineNumber:60,columnNumber:13},this),e(ce,{cancelText:o("cancel"),footer:[e(H,{onClick:I,children:o("cancel")},"cancel",!1,{fileName:F,lineNumber:64,columnNumber:21},this),e(H,{disabled:!x,loading:N,type:"primary",onClick:d,children:o("join")},"submit",!1,{fileName:F,lineNumber:67,columnNumber:21},this)],okText:o("join"),open:u,title:o("home-page-hero-button-type.join"),width:400,wrapClassName:"join-room-box-container",onCancel:I,onOk:d,children:e(U,{className:"main-room-menu-form",form:n,initialValues:O,layout:"vertical",name:"createRoom",onFieldsChange:D,children:[e(U.Item,{label:o("room-uuid"),name:"roomUUID",rules:[{required:!0,message:o("enter-room-uuid")}],children:e(ke,{ref:C,placeholder:o("enter-room-uuid"),onKeyUp:G},void 0,!1,{fileName:F,lineNumber:98,columnNumber:25},this)},void 0,!1,{fileName:F,lineNumber:93,columnNumber:21},this),e(U.Item,{label:o("join-options"),children:[e(U.Item,{noStyle:!0,name:"autoMicOn",valuePropName:"checked",children:e(ae,{children:o("turn-on-the-microphone")},void 0,!1,{fileName:F,lineNumber:106,columnNumber:29},this)},void 0,!1,{fileName:F,lineNumber:105,columnNumber:25},this),e(U.Item,{noStyle:!0,name:"autoCameraOn",valuePropName:"checked",children:e(ae,{children:o("turn-on-the-camera")},void 0,!1,{fileName:F,lineNumber:109,columnNumber:29},this)},void 0,!1,{fileName:F,lineNumber:108,columnNumber:25},this)]},void 0,!0,{fileName:F,lineNumber:104,columnNumber:21},this)]},void 0,!0,{fileName:F,lineNumber:85,columnNumber:17},this)},void 0,!1,{fileName:F,lineNumber:61,columnNumber:13},this)]},void 0,!0);async function j(){const r=await navigator.clipboard.readText(),v=bo.exec(r);return v==null?void 0:v[0]}async function K(){try{const r=await j();r&&Se(r)&&eo(r)===4&&(n.setFieldsValue({roomUUID:r}),S(!0))}catch{}y(!0)}function G(r){r.key==="Enter"&&!r.ctrlKey&&!r.shiftKey&&!r.altKey&&!r.metaKey&&(r.preventDefault(),t(n.validateFields()).then(d))}async function d(){try{await t(n.validateFields())}catch{return}f(!0);try{const r=n.getFieldsValue();m.updateAutoMicOn(r.autoMicOn),m.updateAutoCameraOn(r.autoCameraOn),await t(l(r.roomUUID)),f(!1),y(!1)}catch(r){console.error(r),f(!1)}}function I(){y(!1)}function D(){S(n.getFieldsError().every(r=>r.errors.length<=0))}});var go="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/MainRoomMenu/ScheduleRoomBox.tsx";const yo=Ue.memo(function(){const l=de();return e(he,{type:"schedule",onClick:()=>l(z.UserScheduledPage)},void 0,!1,{fileName:go,lineNumber:11,columnNumber:9},this)});var _="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/MainRoomMenu/index.tsx";const xo=()=>{const s=a.exports.useContext(Re),l=a.exports.useContext(me),o=de(),t=async n=>{l.isTurnOffDeviceTest||window.isElectron?await Me(n,o):o(z.DevicesTestPage,{roomUUID:n})};return e("div",{className:"main-room-menu-container",children:e(Ze,{gutter:16,children:[e(ee,{span:6,children:e(vo,{onJoinRoom:t},void 0,!1,{fileName:_,lineNumber:32,columnNumber:21},void 0)},void 0,!1,{fileName:_,lineNumber:31,columnNumber:17},void 0),e(ee,{span:6,children:e(No,{onCreateRoom:m},void 0,!1,{fileName:_,lineNumber:35,columnNumber:21},void 0)},void 0,!1,{fileName:_,lineNumber:34,columnNumber:17},void 0),e(ee,{span:6,children:e(yo,{},void 0,!1,{fileName:_,lineNumber:38,columnNumber:21},void 0)},void 0,!1,{fileName:_,lineNumber:37,columnNumber:17},void 0)]},void 0,!0,{fileName:_,lineNumber:30,columnNumber:13},void 0)},void 0,!1,{fileName:_,lineNumber:29,columnNumber:9},void 0);async function m(n,N,f){try{const u=await s.createOrdinaryRoom({title:n,type:N,beginTime:Date.now(),region:f});await t(u)}catch(u){Q(u)}}};var L="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/MainRoomListPanel/MainRoomList.tsx";const Ie=E(function({listRoomsType:l,isLogin:o}){var be;const t=M(),m=a.exports.useContext(Re),[n,N]=a.exports.useState(!1),[f,u]=a.exports.useState(),[y,x]=a.exports.useState(!1),[S,C]=a.exports.useState(!1),[O,j]=a.exports.useState(!1),[K,G]=a.exports.useState(!1),[d,I]=a.exports.useState(void 0),D=de(),r=fe(),v=a.exports.useContext(me),J=l===re.History;a.exports.useEffect(()=>{const i=window.setTimeout(()=>N(!0),200);return()=>window.clearTimeout(i)},[]);const B=a.exports.useCallback(async function(){try{const h=await r(m.listRooms(l,{page:1}));u(h)}catch(h){u([]),Q(h)}},[l,m,r]);if(a.exports.useEffect(()=>{if(!o)return;B();const i=window.setInterval(B,30*1e3);return()=>{window.clearInterval(i)}},[B,o]),!f)return n?e(fo,{},void 0,!1,{fileName:L,lineNumber:82,columnNumber:35},this):null;if(f.length<=0)return e(uo,{isHistory:J},void 0,!1,{fileName:L,lineNumber:86,columnNumber:16},this);const T=d!=null&&d.periodicUUID?m.periodicRooms.get(d==null?void 0:d.periodicUUID):void 0;return e(ue,{children:[Oe(f.map(i=>m.rooms.get(i))).map(i=>{if(!i)return null;const h=i.beginTime?new Date(i.beginTime):void 0,w=i.endTime?new Date(i.endTime):void 0,g=V=>{let k;switch(V){case R.Idle:{k=i.ownerUUID===v.userUUID?{key:"begin",text:t("begin"),type:"primary"}:{key:"join",text:t("join"),type:"primary"};break}case R.Started:case R.Paused:{k={key:"join",text:t("join"),type:"primary"};break}case R.Stopped:{k=i.hasRecord?{key:"replay",text:t("replay")}:null;break}default:{k={key:"begin",text:t("begin"),type:"primary"};break}}return k};return e(a.exports.Fragment,{children:e(ro,{beginTime:h,endTime:w,isPeriodic:!!i.periodicUUID,menuActions:Le(i),ownerAvatar:i.ownerAvatarURL,ownerName:i.ownerName,primaryAction:g(i.roomStatus),status:Ee(i.roomStatus),title:i.title,onAction:V=>{switch(V){case"details":{D(z.RoomDetailPage,{roomUUID:i.roomUUID,periodicUUID:i.periodicUUID});break}case"modify":{D(z.ModifyOrdinaryRoomPage,{roomUUID:i.roomUUID,periodicUUID:i.periodicUUID});break}case"cancel":{I(i),x(!0);break}case"invite":{I(i),C(!0);break}case"delete-history":{I(i),j(!0);break}case"replay":{De({ownerUUID:i.ownerUUID,roomUUID:i.roomUUID,roomType:i.roomType||X.OneToOne});break}case"join":case"begin":{c(i.roomUUID);break}}}},void 0,!1,{fileName:L,lineNumber:157,columnNumber:25},this)},i.roomUUID,!1,{fileName:L,lineNumber:156,columnNumber:21},this)}),e(ho,{},void 0,!1,{fileName:L,lineNumber:218,columnNumber:13},this),d&&e(qe,{cancelModalVisible:y,isCreator:d.ownerUUID===v.userUUID,isPeriodicDetailsPage:!1,periodicUUID:d.periodicUUID,roomUUID:d.roomUUID,onCancel:He,onCancelRoom:Pe},void 0,!1,{fileName:L,lineNumber:220,columnNumber:17},this),d&&e(We,{baseUrl:Ae,periodicWeeks:T==null?void 0:T.periodic.weeks,room:d,userName:(be=v.userName)!=null?be:"",visible:S,onCancel:pe,onCopy:Be},void 0,!1,{fileName:L,lineNumber:231,columnNumber:17},this),d&&e(po,{loading:K,visible:O,onCancel:Ne,onConfirm:_e},void 0,!1,{fileName:L,lineNumber:242,columnNumber:17},this)]},void 0,!0);async function c(i){v.isTurnOffDeviceTest||window.isElectron?await Me(i,D):D(z.DevicesTestPage,{roomUUID:i})}function De(i){const{roomUUID:h,ownerUUID:w,roomType:g}=i;window.isElectron?D(z.ReplayPage,{roomType:g,roomUUID:h,ownerUUID:w}):window.open(`/replay/${g}/${h}/${w}/`,"_blank")}function He(){x(!1)}function pe(){C(!1)}function Ne(){j(!1)}async function Be(i){try{await navigator.clipboard.writeText(i),oe.success(t("copy-success"))}catch{oe.error(t("copy-fail"))}finally{pe()}}async function Pe(i){const{ownerUUID:h,roomUUID:w,periodicUUID:g}=d,V=h===v.userUUID;try{!V&&g?await m.cancelRoom({all:!0,periodicUUID:g}):await m.cancelRoom({all:i||!w&&!!g,roomUUID:w,periodicUUID:g}),x(!1),B();const k=t(V?"the-room-has-been-cancelled":"the-room-has-been-removed");oe.success(k)}catch(k){console.error(k),Q(k)}}async function _e(){G(!0);try{await r(m.cancelRoom({isHistory:!0,roomUUID:d.roomUUID})),Ne(),B()}catch(i){console.error(i),Q(i)}finally{G(!1)}}function Le(i){const h=[{key:"details",text:t("room-detail")}];if(J)i.roomUUID&&h.push({key:"delete-history",text:t("delete-records")});else{const g=i.ownerUUID===v.userUUID;(i.roomUUID||i.periodicUUID)&&g&&i.roomStatus===R.Idle&&h.push({key:"modify",text:t("modify-room")}),(!g||i.roomStatus===R.Idle)&&h.push({key:"cancel",text:t(g?"cancel-room":"remove-room")}),i.roomUUID&&h.push({key:"invite",text:t("invitation")})}return h}function Oe(i){return l===re.History?i.sort((h,w)=>h&&w?Number(w.beginTime)-Number(h.beginTime):0):i}function Ee(i){switch(i){case R.Idle:return"upcoming";case R.Started:case R.Paused:return"running";case R.Stopped:return"stopped";default:return"upcoming"}}});var xe="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/MainRoomListPanel/index.tsx";const Fo=E(function({isLogin:l}){const o=M(),[t,m]=a.exports.useState("all"),n=a.exports.useMemo(()=>[{key:"all",title:o("all")},{key:"today",title:o("today")},{key:"periodic",title:o("periodic")}],[o]);return e(Ce,{activeTab:t,filters:n,title:o("room-list"),onTabActive:m,children:e(Ie,{isLogin:l,listRoomsType:t},void 0,!1,{fileName:xe,lineNumber:38,columnNumber:13},this)},void 0,!1,{fileName:xe,lineNumber:32,columnNumber:9},this)});var Fe="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/MainRoomHistoryPanel/index.tsx";const Uo=E(function({isLogin:l}){const o=M();return e(Ce,{title:o("history"),children:e(Ie,{isLogin:l,listRoomsType:re.History},void 0,!1,{fileName:Fe,lineNumber:16,columnNumber:13},this)},void 0,!1,{fileName:Fe,lineNumber:15,columnNumber:9},this)});var A="/Users/yl/github-repo/openflat/packages/flat-pages/src/HomePage/index.tsx";const _o=E(function(){const l=a.exports.useContext(ze);a.exports.useEffect(()=>l.configure(),[]);const o=Xe();return e("div",{className:"homepage-layout-horizontal-container",children:[e(xo,{},void 0,!1,{fileName:A,lineNumber:22,columnNumber:13},this),e("div",{className:"homepage-layout-horizontal-content",children:[e(Fo,{isLogin:o},void 0,!1,{fileName:A,lineNumber:24,columnNumber:17},this),e(Uo,{isLogin:o},void 0,!1,{fileName:A,lineNumber:25,columnNumber:17},this)]},void 0,!0,{fileName:A,lineNumber:23,columnNumber:13},this),e(Qe,{},void 0,!1,{fileName:A,lineNumber:27,columnNumber:13},this)]},void 0,!0,{fileName:A,lineNumber:21,columnNumber:9},this)});export{_o as HomePage,_o as default};
//# sourceMappingURL=index.94b80faa.js.map
