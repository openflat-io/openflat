{"version":3,"file":"index.ff375b74.js","sources":["../../../../node_modules/.pnpm/vanilla-lazyload@17.8.3/node_modules/vanilla-lazyload/dist/lazyload.esm.js","../../../../node_modules/.pnpm/@netless+app-docs-viewer@1.0.0-canary.2/node_modules/@netless/app-docs-viewer/dist/main.mjs","../../../../service-providers/file-preview-netless/src/utils.ts","../../../../service-providers/file-preview-netless/src/static-docs-viewer/index.ts","../../../../service-providers/file-preview-netless/src/index.ts"],"sourcesContent":["const runningOnBrowser = typeof window !== \"undefined\";\n\nconst isBot =\n    (runningOnBrowser && !(\"onscroll\" in window)) ||\n    (typeof navigator !== \"undefined\" && /(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\n\nconst supportsIntersectionObserver = runningOnBrowser && \"IntersectionObserver\" in window;\n\nconst supportsClassList = runningOnBrowser && \"classList\" in document.createElement(\"p\");\n\nconst isHiDpi = runningOnBrowser && window.devicePixelRatio > 1;\n\nconst defaultSettings = {\n    elements_selector: \".lazy\",\n    container: isBot || runningOnBrowser ? document : null,\n    threshold: 300,\n    thresholds: null,\n    data_src: \"src\",\n    data_srcset: \"srcset\",\n    data_sizes: \"sizes\",\n    data_bg: \"bg\",\n    data_bg_hidpi: \"bg-hidpi\",\n    data_bg_multi: \"bg-multi\",\n    data_bg_multi_hidpi: \"bg-multi-hidpi\",\n    data_bg_set: \"bg-set\",\n    data_poster: \"poster\",\n    class_applied: \"applied\",\n    class_loading: \"loading\",\n    class_loaded: \"loaded\",\n    class_error: \"error\",\n    class_entered: \"entered\",\n    class_exited: \"exited\",\n    unobserve_completed: true,\n    unobserve_entered: false,\n    cancel_on_exit: true,\n    callback_enter: null,\n    callback_exit: null,\n    callback_applied: null,\n    callback_loading: null,\n    callback_loaded: null,\n    callback_error: null,\n    callback_finish: null,\n    callback_cancel: null,\n    use_native: false,\n    restore_on_error: false,\n};\n\nconst getExtendedSettings = (customSettings) => {\n    return Object.assign({}, defaultSettings, customSettings);\n};\n\n/* Creates instance and notifies it through the window element */\nconst createInstance = function(classObj, options) {\n    let event;\n    const eventString = \"LazyLoad::Initialized\";\n    const instance = new classObj(options);\n    try {\n        // Works in modern browsers\n        event = new CustomEvent(eventString, { detail: { instance } });\n    } catch (err) {\n        // Works in Internet Explorer (all versions)\n        event = document.createEvent(\"CustomEvent\");\n        event.initCustomEvent(eventString, false, false, { instance });\n    }\n    window.dispatchEvent(event);\n};\n\n/* Auto initialization of one or more instances of lazyload, depending on the \n    options passed in (plain object or an array) */\nconst autoInitialize = (classObj, options) => {\n    if (!options) {\n        return;\n    }\n    if (!options.length) {\n        // Plain object\n        createInstance(classObj, options);\n    } else {\n        // Array of objects\n        for (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\n            createInstance(classObj, optionsItem);\n        }\n    }\n};\n\nconst SRC = \"src\";\nconst SRCSET = \"srcset\";\nconst SIZES = \"sizes\";\nconst POSTER = \"poster\";\nconst ORIGINALS = \"llOriginalAttrs\";\nconst DATA = \"data\";\n\nconst statusLoading = \"loading\";\nconst statusLoaded = \"loaded\";\nconst statusApplied = \"applied\";\nconst statusEntered = \"entered\";\nconst statusError = \"error\";\nconst statusNative = \"native\";\n\nconst dataPrefix = \"data-\";\nconst statusDataName = \"ll-status\";\n\nconst getData = (element, attribute) => {\n    return element.getAttribute(dataPrefix + attribute);\n};\n\nconst setData = (element, attribute, value) => {\n    var attrName = dataPrefix + attribute;\n    if (value === null) {\n        element.removeAttribute(attrName);\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst getStatus = (element) => getData(element, statusDataName);\nconst setStatus = (element, status) => setData(element, statusDataName, status);\nconst resetStatus = (element) => setStatus(element, null);\n\nconst hasEmptyStatus = (element) => getStatus(element) === null;\nconst hasStatusLoading = (element) => getStatus(element) === statusLoading;\nconst hasStatusError = (element) => getStatus(element) === statusError;\nconst hasStatusNative = (element) => getStatus(element) === statusNative;\n\nconst statusesAfterLoading = [statusLoading, statusLoaded, statusApplied, statusError];\nconst hadStartedLoading = (element) => statusesAfterLoading.indexOf(getStatus(element)) >= 0;\n\nconst safeCallback = (callback, arg1, arg2, arg3) => {\n\tif (!callback) {\n\t\treturn;\n\t}\n\n\tif (arg3 !== undefined) {\n\t\tcallback(arg1, arg2, arg3);\n\t\treturn;\n\t}\n\tif (arg2 !== undefined) {\n\t\tcallback(arg1, arg2);\n\t\treturn;\n\t}\n\tcallback(arg1);\n};\n\nconst addClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.add(className);\n\t\treturn;\n\t}\n\telement.className += (element.className ? \" \" : \"\") + className;\n};\n\nconst removeClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.remove(className);\n\t\treturn;\n\t}\n\telement.className = element.className.\n\t\treplace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").\n\t\treplace(/^\\s+/, \"\").\n\t\treplace(/\\s+$/, \"\");\n};\n\nconst addTempImage = (element) => {\n    element.llTempImage = document.createElement(\"IMG\");\n};\n\nconst deleteTempImage = (element) => {\n    delete element.llTempImage;\n};\n\nconst getTempImage = (element) => element.llTempImage;\n\nconst unobserve = (element, instance) => {\n    if (!instance) return;\n    const observer = instance._observer;\n    if (!observer) return;\n    observer.unobserve(element);\n};\n\nconst resetObserver = (observer) => {\n    observer.disconnect();\n};\n\nconst unobserveEntered = (element, settings, instance) => {\n    if (settings.unobserve_entered) unobserve(element, instance);\n};\n\nconst updateLoadingCount = (instance, delta) => {\n    if (!instance) return;\n    instance.loadingCount += delta;\n};\n\nconst decreaseToLoadCount = (instance) => {\n    if (!instance) return;\n    instance.toLoadCount -= 1;\n};\n\nconst setToLoadCount = (instance, value) => {\n    if (!instance) return;\n    instance.toLoadCount = value;\n};\n\nconst isSomethingLoading = (instance) => instance.loadingCount > 0;\n\nconst haveElementsToLoad = (instance) => instance.toLoadCount > 0;\n\nconst getSourceTags = (parentTag) => {\n  let sourceTags = [];\n  for (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\n      if (childTag.tagName === \"SOURCE\") {\n          sourceTags.push(childTag);\n      }\n  }\n  return sourceTags;\n};\n\nconst forEachPictureSource = (element, fn) => {\n  const parent = element.parentNode;\n  if (!parent || parent.tagName !== \"PICTURE\") {\n      return;\n  }\n  let sourceTags = getSourceTags(parent);\n  sourceTags.forEach(fn);\n};\n\nconst forEachVideoSource = (element, fn) => {\n  let sourceTags = getSourceTags(element);\n  sourceTags.forEach(fn);\n};\n\nconst attrsSrc = [SRC];\nconst attrsSrcPoster = [SRC, POSTER];\nconst attrsSrcSrcsetSizes = [SRC, SRCSET, SIZES];\nconst attrsData = [DATA];\n\nconst hasOriginalAttrs = (element) => !!element[ORIGINALS];\nconst getOriginalAttrs = (element) => element[ORIGINALS];\nconst deleteOriginalAttrs = (element) => delete element[ORIGINALS];\n\n// ## SAVE ##\n\nconst setOriginalsObject = (element, attributes) => {\n    if (hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = {};\n    attributes.forEach((attribute) => {\n        originals[attribute] = element.getAttribute(attribute);\n    });\n    element[ORIGINALS] = originals;\n};\n\nconst saveOriginalBackgroundStyle = (element) => {\n    if (hasOriginalAttrs(element)) {\n        return;\n    }\n    element[ORIGINALS] = { backgroundImage: element.style.backgroundImage };\n};\n\n// ## RESTORE ##\n\nconst setOrResetAttribute = (element, attrName, value) => {\n    if (!value) {\n        element.removeAttribute(attrName);\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst restoreOriginalAttrs = (element, attributes) => {\n    if (!hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = getOriginalAttrs(element);\n    attributes.forEach((attribute) => {\n        setOrResetAttribute(element, attribute, originals[attribute]);\n    });\n};\n\nconst restoreOriginalBgImage = (element) => {\n    if (!hasOriginalAttrs(element)) {\n        return;\n    }\n    const originals = getOriginalAttrs(element);\n    element.style.backgroundImage = originals.backgroundImage;\n};\n\nconst manageApplied = (element, settings, instance) => {\n    addClass(element, settings.class_applied);\n    setStatus(element, statusApplied);\n    // Instance is not provided when loading is called from static class\n    if (!instance) return;\n    if (settings.unobserve_completed) {\n        // Unobserve now because we can't do it on load\n        unobserve(element, settings);\n    }\n    safeCallback(settings.callback_applied, element, instance);\n};\n\nconst manageLoading = (element, settings, instance) => {\n    addClass(element, settings.class_loading);\n    setStatus(element, statusLoading);\n    // Instance is not provided when loading is called from static class\n    if (!instance) return;\n    updateLoadingCount(instance, +1);\n    safeCallback(settings.callback_loading, element, instance);\n};\n\nconst setAttributeIfValue = (element, attrName, value) => {\n    if (!value) {\n        return;\n    }\n    element.setAttribute(attrName, value);\n};\n\nconst setImageAttributes = (element, settings) => {\n    setAttributeIfValue(element, SIZES, getData(element, settings.data_sizes));\n    setAttributeIfValue(element, SRCSET, getData(element, settings.data_srcset));\n    setAttributeIfValue(element, SRC, getData(element, settings.data_src));\n};\n\nconst setSourcesImg = (imgEl, settings) => {\n    forEachPictureSource(imgEl, (sourceTag) => {\n        setOriginalsObject(sourceTag, attrsSrcSrcsetSizes);\n        setImageAttributes(sourceTag, settings);\n    });\n    setOriginalsObject(imgEl, attrsSrcSrcsetSizes);\n    setImageAttributes(imgEl, settings);\n};\n\nconst setSourcesIframe = (iframe, settings) => {\n    setOriginalsObject(iframe, attrsSrc);\n    setAttributeIfValue(iframe, SRC, getData(iframe, settings.data_src));\n};\n\nconst setSourcesVideo = (videoEl, settings) => {\n    forEachVideoSource(videoEl, (sourceEl) => {\n        setOriginalsObject(sourceEl, attrsSrc);\n        setAttributeIfValue(sourceEl, SRC, getData(sourceEl, settings.data_src));\n    });\n    setOriginalsObject(videoEl, attrsSrcPoster);\n\n    setAttributeIfValue(videoEl, POSTER, getData(videoEl, settings.data_poster));\n    setAttributeIfValue(videoEl, SRC, getData(videoEl, settings.data_src));\n    videoEl.load();\n};\n\nconst setSourcesObject = (object, settings) => {\n    setOriginalsObject(object, attrsData);\n    setAttributeIfValue(object, DATA, getData(object, settings.data_src));\n};\n\nconst setBackground = (element, settings, instance) => {\n    const bg1xValue = getData(element, settings.data_bg);\n    const bgHiDpiValue = getData(element, settings.data_bg_hidpi);\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n    if (!bgDataValue) return;\n    element.style.backgroundImage = `url(\"${bgDataValue}\")`;\n    getTempImage(element).setAttribute(SRC, bgDataValue);\n    manageLoading(element, settings, instance);\n};\n\n// NOTE: THE TEMP IMAGE TRICK CANNOT BE DONE WITH data-multi-bg\n// BECAUSE INSIDE ITS VALUES MUST BE WRAPPED WITH URL() AND ONE OF THEM\n// COULD BE A GRADIENT BACKGROUND IMAGE\nconst setMultiBackground = (element, settings, instance) => {\n    const bg1xValue = getData(element, settings.data_bg_multi);\n    const bgHiDpiValue = getData(element, settings.data_bg_multi_hidpi);\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\n    if (!bgDataValue) {\n        return;\n    }\n    element.style.backgroundImage = bgDataValue;\n    manageApplied(element, settings, instance);\n};\n\nconst setImgsetBackground = (element, settings, instance) => {\n    const bgImgSetDataValue = getData(element, settings.data_bg_set);\n    if (!bgImgSetDataValue) {\n        return;\n    }\n    const imgSetValues = bgImgSetDataValue.split(\"|\");\n    let bgImageValues = imgSetValues.map((value) => `image-set(${value})`);\n    element.style.backgroundImage = bgImageValues.join();\n    // Temporary fix for Chromeium with the -webkit- prefix\n    if (element.style.backgroundImage === '') {\n        bgImageValues = imgSetValues.map((value) => `-webkit-image-set(${value})`);\n        element.style.backgroundImage = bgImageValues.join();\n    }\n    manageApplied(element, settings, instance);\n};\n\nconst setSourcesFunctions = {\n    IMG: setSourcesImg,\n    IFRAME: setSourcesIframe,\n    VIDEO: setSourcesVideo,\n    OBJECT: setSourcesObject\n};\n\nconst setSourcesNative = (element, settings) => {\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\n    if (!setSourcesFunction) {\n        return;\n    }\n    setSourcesFunction(element, settings);\n};\n\nconst setSources = (element, settings, instance) => {\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\n    if (!setSourcesFunction) {\n        return;\n    }\n    setSourcesFunction(element, settings);\n    manageLoading(element, settings, instance);\n};\n\nconst elementsWithLoadEvent = [\"IMG\", \"IFRAME\", \"VIDEO\", \"OBJECT\"];\nconst hasLoadEvent = (element) => elementsWithLoadEvent.indexOf(element.tagName) > -1;\n\nconst checkFinish = (settings, instance) => {\n    if (instance && !isSomethingLoading(instance) && !haveElementsToLoad(instance)) {\n        safeCallback(settings.callback_finish, instance);\n    }\n};\n\nconst addEventListener = (element, eventName, handler) => {\n    element.addEventListener(eventName, handler);\n    element.llEvLisnrs[eventName] = handler;\n};\n\nconst removeEventListener = (element, eventName, handler) => {\n    element.removeEventListener(eventName, handler);\n};\n\nconst hasEventListeners = (element) => {\n    return !!element.llEvLisnrs;\n};\n\nconst addEventListeners = (element, loadHandler, errorHandler) => {\n    if (!hasEventListeners(element)) element.llEvLisnrs = {};\n    const loadEventName = element.tagName === \"VIDEO\" ? \"loadeddata\" : \"load\";\n    addEventListener(element, loadEventName, loadHandler);\n    addEventListener(element, \"error\", errorHandler);\n};\n\nconst removeEventListeners = (element) => {\n    if (!hasEventListeners(element)) {\n        return;\n    }\n    const eventListeners = element.llEvLisnrs;\n    for (let eventName in eventListeners) {\n        const handler = eventListeners[eventName];\n        removeEventListener(element, eventName, handler);\n    }\n    delete element.llEvLisnrs;\n};\n\nconst doneHandler = (element, settings, instance) => {\n    deleteTempImage(element);\n    updateLoadingCount(instance, -1);\n    decreaseToLoadCount(instance);\n    removeClass(element, settings.class_loading);\n    if (settings.unobserve_completed) {\n        unobserve(element, instance);\n    }\n};\n\nconst loadHandler = (event, element, settings, instance) => {\n    const goingNative = hasStatusNative(element);\n    doneHandler(element, settings, instance);\n    addClass(element, settings.class_loaded);\n    setStatus(element, statusLoaded);\n    safeCallback(settings.callback_loaded, element, instance);\n    if (!goingNative) checkFinish(settings, instance);\n};\n\nconst errorHandler = (event, element, settings, instance) => {\n    const goingNative = hasStatusNative(element);\n    doneHandler(element, settings, instance);\n    addClass(element, settings.class_error);\n    setStatus(element, statusError);\n    safeCallback(settings.callback_error, element, instance);\n    if (settings.restore_on_error) restoreOriginalAttrs(element, attrsSrcSrcsetSizes);\n    if (!goingNative) checkFinish(settings, instance);\n};\n\nconst addOneShotEventListeners = (element, settings, instance) => {\n    const elementToListenTo = getTempImage(element) || element;\n    if (hasEventListeners(elementToListenTo)) {\n        // This happens when loading is retried twice\n        return;\n    }\n    const _loadHandler = (event) => {\n        loadHandler(event, element, settings, instance);\n        removeEventListeners(elementToListenTo);\n    };\n    const _errorHandler = (event) => {\n        errorHandler(event, element, settings, instance);\n        removeEventListeners(elementToListenTo);\n    };\n    addEventListeners(elementToListenTo, _loadHandler, _errorHandler);\n};\n\nconst loadBackground = (element, settings, instance) => {\n    addTempImage(element);\n    addOneShotEventListeners(element, settings, instance);\n    saveOriginalBackgroundStyle(element);\n    setBackground(element, settings, instance);\n    setMultiBackground(element, settings, instance);\n    setImgsetBackground(element, settings, instance);\n};\n\nconst loadRegular = (element, settings, instance) => {\n    addOneShotEventListeners(element, settings, instance);\n    setSources(element, settings, instance);\n};\n\nconst load = (element, settings, instance) => {\n    if (hasLoadEvent(element)) {\n        loadRegular(element, settings, instance);\n    } else {\n        loadBackground(element, settings, instance);\n    }\n};\n\nconst loadNative = (element, settings, instance) => {\n    element.setAttribute(\"loading\", \"lazy\");\n    addOneShotEventListeners(element, settings, instance);\n    setSourcesNative(element, settings);\n    setStatus(element, statusNative);\n};\n\nconst removeImageAttributes = (element) => {\n    element.removeAttribute(SRC);\n    element.removeAttribute(SRCSET);\n    element.removeAttribute(SIZES);\n};\n\nconst resetSourcesImg = (element) => {\n    forEachPictureSource(element, (sourceTag) => {\n        removeImageAttributes(sourceTag);\n    });\n    removeImageAttributes(element);\n};\n\nconst restoreImg = (imgEl) => {\n    forEachPictureSource(imgEl, (sourceEl) => {\n        restoreOriginalAttrs(sourceEl, attrsSrcSrcsetSizes);\n    });\n    restoreOriginalAttrs(imgEl, attrsSrcSrcsetSizes);\n};\n\nconst restoreVideo = (videoEl) => {\n    forEachVideoSource(videoEl, (sourceEl) => {\n        restoreOriginalAttrs(sourceEl, attrsSrc);\n    });\n    restoreOriginalAttrs(videoEl, attrsSrcPoster);\n    videoEl.load();\n};\n\nconst restoreIframe = (iframeEl) => {\n    restoreOriginalAttrs(iframeEl, attrsSrc);\n};\n\nconst restoreObject = (objectEl) => {\n    restoreOriginalAttrs(objectEl, attrsData);\n};\n\nconst restoreFunctions = {\n    IMG: restoreImg,\n    IFRAME: restoreIframe,\n    VIDEO: restoreVideo,\n    OBJECT: restoreObject\n};\n\nconst restoreAttributes = (element) => {\n    const restoreFunction = restoreFunctions[element.tagName];\n    if (!restoreFunction) {\n        restoreOriginalBgImage(element);\n        return;\n    }\n    restoreFunction(element);\n};\n\nconst resetClasses = (element, settings) => {\n    if (hasEmptyStatus(element) || hasStatusNative(element)) {\n        return;\n    }\n    removeClass(element, settings.class_entered);\n    removeClass(element, settings.class_exited);\n    removeClass(element, settings.class_applied);\n    removeClass(element, settings.class_loading);\n    removeClass(element, settings.class_loaded);\n    removeClass(element, settings.class_error);\n};\n\nconst restore = (element, settings) => {\n    restoreAttributes(element);\n    resetClasses(element, settings);\n    resetStatus(element);\n    deleteOriginalAttrs(element);\n};\n\nconst cancelLoading = (element, entry, settings, instance) => {\n    if (!settings.cancel_on_exit) return;\n    if (!hasStatusLoading(element)) return;\n    if (element.tagName !== \"IMG\") return; //Works only on images\n    removeEventListeners(element);\n    resetSourcesImg(element);\n    restoreImg(element);\n    removeClass(element, settings.class_loading);\n    updateLoadingCount(instance, -1);\n    resetStatus(element);\n    safeCallback(settings.callback_cancel, element, entry, instance);\n};\n\nconst onEnter = (element, entry, settings, instance) => {\n    const dontLoad = hadStartedLoading(element); /* Save status \n        before setting it, to prevent loading it again. Fixes #526. */\n    setStatus(element, statusEntered);\n    addClass(element, settings.class_entered);\n    removeClass(element, settings.class_exited);\n    unobserveEntered(element, settings, instance);\n    safeCallback(settings.callback_enter, element, entry, instance);\n    if (dontLoad) return;\n    load(element, settings, instance);\n};\n\nconst onExit = (element, entry, settings, instance) => {\n    if (hasEmptyStatus(element)) return; //Ignore the first pass, at landing\n    addClass(element, settings.class_exited);\n    cancelLoading(element, entry, settings, instance);\n    safeCallback(settings.callback_exit, element, entry, instance);\n};\n\nconst tagsWithNativeLazy = [\"IMG\", \"IFRAME\", \"VIDEO\"];\n\nconst shouldUseNative = (settings) =>\n    settings.use_native && \"loading\" in HTMLImageElement.prototype;\n\nconst loadAllNative = (elements, settings, instance) => {\n    elements.forEach((element) => {\n        if (tagsWithNativeLazy.indexOf(element.tagName) === -1) {\n            return;\n        }\n        loadNative(element, settings, instance);\n    });\n    setToLoadCount(instance, 0);\n};\n\nconst isIntersecting = (entry) => entry.isIntersecting || entry.intersectionRatio > 0;\n\nconst getObserverSettings = (settings) => ({\n    root: settings.container === document ? null : settings.container,\n    rootMargin: settings.thresholds || settings.threshold + \"px\"\n});\n\nconst intersectionHandler = (entries, settings, instance) => {\n    entries.forEach((entry) =>\n        isIntersecting(entry)\n            ? onEnter(entry.target, entry, settings, instance)\n            : onExit(entry.target, entry, settings, instance)\n    );\n};\n\nconst observeElements = (observer, elements) => {\n    elements.forEach((element) => {\n        observer.observe(element);\n    });\n};\n\nconst updateObserver = (observer, elementsToObserve) => {\n    resetObserver(observer);\n    observeElements(observer, elementsToObserve);\n};\n\nconst setObserver = (settings, instance) => {\n    if (!supportsIntersectionObserver || shouldUseNative(settings)) {\n        return;\n    }\n    instance._observer = new IntersectionObserver((entries) => {\n        intersectionHandler(entries, settings, instance);\n    }, getObserverSettings(settings));\n};\n\nconst toArray = (nodeSet) => Array.prototype.slice.call(nodeSet);\n\nconst queryElements = (settings) =>\n    settings.container.querySelectorAll(settings.elements_selector);\n\nconst excludeManagedElements = (elements) => toArray(elements).filter(hasEmptyStatus);\n\nconst hasError = (element) => hasStatusError(element);\nconst filterErrorElements = (elements) => toArray(elements).filter(hasError);\n\nconst getElementsToLoad = (elements, settings) =>\n    excludeManagedElements(elements || queryElements(settings));\n\nconst retryLazyLoad = (settings, instance) => {\n    const errorElements = filterErrorElements(queryElements(settings));\n    errorElements.forEach((element) => {\n        removeClass(element, settings.class_error);\n        resetStatus(element);\n    });\n    instance.update();\n};\n\nconst setOnlineCheck = (settings, instance) => {\n    if (!runningOnBrowser) {\n        return;\n    }\n    instance._onlineHandler = () => {\n        retryLazyLoad(settings, instance);\n    };\n    window.addEventListener(\"online\", instance._onlineHandler);\n};\n\nconst resetOnlineCheck = (instance) => {\n    if (!runningOnBrowser) {\n        return;\n    }\n    window.removeEventListener(\"online\", instance._onlineHandler);\n};\n\nconst LazyLoad = function (customSettings, elements) {\n    const settings = getExtendedSettings(customSettings);\n    this._settings = settings;\n    this.loadingCount = 0;\n    setObserver(settings, this);\n    setOnlineCheck(settings, this);\n    this.update(elements);\n};\n\nLazyLoad.prototype = {\n    update: function (givenNodeset) {\n        const settings = this._settings;\n        const elementsToLoad = getElementsToLoad(givenNodeset, settings);\n        setToLoadCount(this, elementsToLoad.length);\n\n        if (isBot || !supportsIntersectionObserver) {\n            this.loadAll(elementsToLoad);\n            return;\n        }\n        if (shouldUseNative(settings)) {\n            loadAllNative(elementsToLoad, settings, this);\n            return;\n        }\n\n        updateObserver(this._observer, elementsToLoad);\n    },\n\n    destroy: function () {\n        // Observer\n        if (this._observer) {\n            this._observer.disconnect();\n        }\n        // Clean handlers\n        resetOnlineCheck(this);\n        // Clean custom attributes on elements\n        queryElements(this._settings).forEach((element) => {\n            deleteOriginalAttrs(element);\n        });\n        // Delete all internal props\n        delete this._observer;\n        delete this._settings;\n        delete this._onlineHandler;\n        delete this.loadingCount;\n        delete this.toLoadCount;\n    },\n\n    loadAll: function (elements) {\n        const settings = this._settings;\n        const elementsToLoad = getElementsToLoad(elements, settings);\n        elementsToLoad.forEach((element) => {\n            unobserve(element, this);\n            load(element, settings, this);\n        });\n    },\n\n    restoreAll: function() {\n        const settings = this._settings;\n        queryElements(settings).forEach((element) => {\n            restore(element, settings);\n        });\n    }\n};\n\nLazyLoad.load = (element, customSettings) => {\n    const settings = getExtendedSettings(customSettings);\n    load(element, settings);\n};\n\nLazyLoad.resetStatus = (element) => {\n    resetStatus(element);\n};\n\n// Automatic instances creation if required (useful for async script loading)\nif (runningOnBrowser) {\n    autoInitialize(LazyLoad, window.lazyLoadOptions);\n}\n\nexport { LazyLoad as default };\n","import { SideEffectManager as S } from \"side-effect-manager\";\nimport { Val as v, derive as x, combine as f, withReadonlyValueEnhancer as D } from \"value-enhancer\";\nimport L from \"vanilla-lazyload\";\nimport { Remitter as z } from \"remitter\";\nconst A = `.netless-app-docs-viewer-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;font-family:PingFang SC,Source Han Sans SC,Microsoft YaHei,Helvetica Neue,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-footer-btn~.netless-app-docs-viewer-footer-btn{margin-left:15px}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-docs-viewer-page-number{display:flex;align-items:center;height:26px;margin-left:auto;font-size:13px;white-space:nowrap;word-break:keep-all;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 .5em 0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;font-family:PingFang SC,Source Han Sans SC,Microsoft YaHei,Helvetica Neue,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif;background:transparent;transition:background .4s;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-page-number-input:active{user-select:text;background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:currentColor;background:#25282e}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.netless-app-docs-viewer-preview-mask{position:absolute;z-index:10200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{box-sizing:border-box;display:flex;flex-direction:column;align-items:center;position:absolute;z-index:10300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-docs-viewer-preview.netless-app-docs-viewer-preview-active{transform:translate(0)}.netless-app-docs-viewer-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-docs-viewer-preview-page:hover,.netless-app-docs-viewer-preview-page.netless-app-docs-viewer-preview-page-active{border-color:#444e601a}.netless-app-docs-viewer-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-docs-viewer-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-static-scrollbar{box-sizing:border-box;position:absolute;top:0;right:0;z-index:2147483647;width:16px;min-height:30px;margin:0;padding:0 0 0 8px;border:none;outline:none;opacity:0;background:transparent;transition:opacity .4s 3s,transform .1s;user-select:none;touch-action:none}.netless-app-docs-viewer-static-scrollbar:after{content:\"\";display:block;width:8px;height:100%;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;transition:background .4s}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrolling{opacity:1;transition:opacity .4s,transform .1s}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{opacity:1;transition:opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging:after{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-static-scrollbar:hover:after,.netless-app-docs-viewer-static-scrollbar:focus:after{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active:after{background:rgba(68,78,96,.6)}.telebox-body-wrap:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:opacity .4s,transform .1s}.telebox-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.page-renderer-pages-container{position:relative;width:100%;height:100%}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}\n`;\nclass M {\n  constructor({\n    namespace: e,\n    pages$: t,\n    sideEffect: s,\n    readonly$: r,\n    events: o,\n    wrapClassName: n,\n    root: a,\n    pagesIndex$: l\n  }) {\n    this.showPreview$ = new v(!1), this.namespace = e, this.pages$ = t, this.sideEffect = s, this.readonly$ = r, this.events = o, this.wrapClassName = n, this.sideEffect.addDisposer(this.events.on(\"togglePreview\", () => {\n      this.showPreview$.setValue(!this.showPreview$.value);\n    })), this.sideEffect.addDisposer(this.showPreview$.subscribe((i) => {\n      this.sideEffect.add(() => {\n        const h = this.renderPreview(), d = this.renderPreviewMask();\n        if (i) {\n          a.appendChild(h), a.appendChild(d), h.scrollTop;\n          const u = h.querySelector(\".\" + this.wrapClassName(`preview-page-${l.value}`));\n          return u && h.scrollTo({\n            top: u.offsetTop - 16\n          }), h.classList.toggle(this.wrapClassName(\"preview-active\"), !0), this.previewLazyLoad = new L({\n            container: this.$preview,\n            elements_selector: \".\" + this.wrapClassName(\"preview-page>img\")\n          }), () => {\n            var p;\n            return (p = this.previewLazyLoad) == null ? void 0 : p.destroy();\n          };\n        } else\n          return h.classList.toggle(this.wrapClassName(\"preview-active\"), !1), this.sideEffect.setTimeout(() => {\n            h.remove(), d.remove();\n          }, 500, \"preview-remove\"), null;\n      }, \"preview-lazyload\");\n    }));\n  }\n  destroy() {\n    var e, t;\n    (e = this.$preview) == null || e.remove(), (t = this.$previewMask) == null || t.remove();\n  }\n  renderPreview() {\n    if (this.$preview)\n      return this.$preview;\n    const e = document.createElement(\"div\");\n    return e.className = this.wrapClassName(\"preview\") + \" tele-fancy-scrollbar\", this.$preview = e, this.sideEffect.addEventListener(e, \"wheel\", (t) => t.stopPropagation(), {\n      passive: !1\n    }), this.sideEffect.addDisposer(this.pages$.subscribe((t) => {\n      var s;\n      this.sideEffect.add(() => {\n        const r = t.map((o, n) => {\n          var u;\n          const a = (u = o.thumbnail) != null ? u : o.src.startsWith(\"ppt\") ? void 0 : o.src;\n          if (!a)\n            return;\n          const l = String(n), i = document.createElement(\"a\");\n          i.className = this.wrapClassName(\"preview-page\") + \" \" + this.wrapClassName(`preview-page-${n}`), i.setAttribute(\"href\", \"#\"), i.dataset.pageIndex = l;\n          const h = document.createElement(\"span\");\n          h.className = this.wrapClassName(\"preview-page-name\"), h.textContent = String(n + 1), h.dataset.pageIndex = l;\n          const d = document.createElement(\"img\");\n          return d.width = o.width, d.height = o.height, d.dataset.src = a, d.dataset.pageIndex = l, i.appendChild(d), i.appendChild(h), e.appendChild(i), i;\n        });\n        return () => r.forEach((o) => o == null ? void 0 : o.remove());\n      }, \"render-preview-pages\"), (s = this.previewLazyLoad) == null || s.update();\n    })), this.sideEffect.addEventListener(e, \"click\", (t) => {\n      var r;\n      if (this.readonly$.value)\n        return;\n      const s = (r = t.target.dataset) == null ? void 0 : r.pageIndex;\n      s && (t.preventDefault(), t.stopPropagation(), t.stopImmediatePropagation(), this.events.emit(\"jumpPage\", Number(s)), this.showPreview$.setValue(!1));\n    }), e;\n  }\n  renderPreviewMask() {\n    if (this.$previewMask)\n      return this.$previewMask;\n    const e = document.createElement(\"div\");\n    return e.className = this.wrapClassName(\"preview-mask\"), this.$previewMask = e, this.sideEffect.addEventListener(e, \"click\", (t) => {\n      this.readonly$.value || t.target === e && this.showPreview$.setValue(!1);\n    }), e;\n  }\n}\nfunction V(c) {\n  const e = \"http://www.w3.org/2000/svg\", t = document.createElementNS(e, \"svg\");\n  t.setAttribute(\"class\", `${c}-footer-icon-sidebar`), t.setAttribute(\"viewBox\", \"0 0 64 64\");\n  const s = document.createElementNS(e, \"path\");\n  return s.setAttribute(\"fill\", \"currentColor\"), s.setAttribute(\"d\", \"M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z\"), t.appendChild(s), t;\n}\nfunction R(c) {\n  const e = \"http://www.w3.org/2000/svg\", t = document.createElementNS(e, \"svg\");\n  t.setAttribute(\"class\", `${c}-footer-icon-arrow-left`), t.setAttribute(\"viewBox\", \"0 0 500 500\");\n  const s = document.createElementNS(e, \"path\");\n  return s.setAttribute(\"fill\", \"currentColor\"), s.setAttribute(\"d\", \"M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z\"), t.appendChild(s), t;\n}\nfunction I(c) {\n  const e = \"http://www.w3.org/2000/svg\", t = document.createElementNS(e, \"svg\");\n  t.setAttribute(\"class\", `${c}-footer-icon-arrow-right`), t.setAttribute(\"viewBox\", \"0 0 500 500\");\n  const s = document.createElementNS(e, \"path\");\n  return s.setAttribute(\"fill\", \"currentColor\"), s.setAttribute(\"d\", \"M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z\"), t.appendChild(s), t;\n}\nfunction _(c) {\n  const e = \"http://www.w3.org/2000/svg\", t = document.createElementNS(e, \"svg\");\n  t.setAttribute(\"class\", `${c}-footer-icon-play`), t.setAttribute(\"viewBox\", \"0 0 500 500\");\n  const s = document.createElementNS(e, \"path\");\n  return s.setAttribute(\"fill\", \"currentColor\"), s.setAttribute(\"d\", \"M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z\"), t.appendChild(s), t;\n}\nfunction H(c) {\n  const e = \"http://www.w3.org/2000/svg\", t = document.createElementNS(e, \"svg\");\n  t.setAttribute(\"class\", `${c}-footer-icon-pause`), t.setAttribute(\"viewBox\", \"0 0 500 500\");\n  const s = document.createElementNS(e, \"path\");\n  return s.setAttribute(\"fill\", \"currentColor\"), s.setAttribute(\"d\", \"M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z\"), t.appendChild(s), t;\n}\nclass B {\n  constructor({\n    namespace: e,\n    pages$: t,\n    sideEffect: s,\n    readonly$: r,\n    events: o,\n    playable: n,\n    wrapClassName: a,\n    pagesIndex$: l,\n    root: i\n  }) {\n    this.namespace = e, this.pages$ = t, this.sideEffect = s, this.readonly$ = r, this.events = o, this.wrapClassName = a, this.pagesIndex$ = l, this.playable = n, this.$footer = this.render(), i.appendChild(this.$footer);\n  }\n  destroy() {\n    this.$footer.remove();\n  }\n  render() {\n    const e = document.createElement(\"div\");\n    e.className = this.wrapClassName(\"footer\"), this.sideEffect.addDisposer(this.readonly$.subscribe((i) => e.classList.toggle(this.wrapClassName(\"readonly\"), i)));\n    const t = this.renderFooterBtn(\"btn-sidebar\", V(this.namespace));\n    this.sideEffect.addEventListener(t, \"click\", () => {\n      this.readonly$.value || this.events.emit(\"togglePreview\");\n    }), e.appendChild(t), this.sideEffect.addDisposer(this.pages$.subscribe((i) => {\n      const h = i.some((d) => d.thumbnail || !d.src.startsWith(\"ppt\"));\n      t.style.display = h ? \"\" : \"none\";\n    }));\n    const s = document.createElement(\"div\");\n    s.className = this.wrapClassName(\"page-jumps\");\n    const r = this.renderFooterBtn(\"btn-page-back\", R(this.namespace));\n    if (this.sideEffect.addEventListener(r, \"click\", () => {\n      this.readonly$.value || this.events.emit(\"back\");\n    }), s.appendChild(r), this.playable) {\n      const i = this.renderFooterBtn(\"btn-page-play\", _(this.namespace), H(this.namespace));\n      this.sideEffect.addEventListener(i, \"click\", () => {\n        this.readonly$.value || (i.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), !0), this.events.emit(\"play\"), this.sideEffect.setTimeout(() => i.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), !1), 500, \"returnPlay\"));\n      }), s.appendChild(i);\n    }\n    const o = this.renderFooterBtn(\"btn-page-next\", I(this.namespace));\n    this.sideEffect.addEventListener(o, \"click\", () => {\n      this.readonly$.value || this.events.emit(\"next\");\n    }), s.appendChild(o);\n    const n = document.createElement(\"div\");\n    n.className = this.wrapClassName(\"page-number\");\n    const a = document.createElement(\"input\");\n    a.className = this.wrapClassName(\"page-number-input\"), this.sideEffect.addDisposer(this.readonly$.subscribe((i) => a.disabled = i)), this.sideEffect.addDisposer(this.pagesIndex$.subscribe((i) => a.value = String(i + 1))), this.sideEffect.addEventListener(a, \"blur\", () => {\n      a.value = String(this.pagesIndex$.value + 1);\n    }), this.sideEffect.addEventListener(a, \"change\", () => {\n      if (this.readonly$.value)\n        return;\n      const i = a.value ? Number(a.value) - 1 : NaN;\n      i >= 0 ? this.events.emit(\"jumpPage\", i) : a.value = String(this.pagesIndex$.value + 1);\n    });\n    const l = document.createElement(\"span\");\n    return this.sideEffect.addDisposer(this.pages$.subscribe((i) => {\n      l.textContent = \" / \" + i.length;\n    })), n.appendChild(a), n.appendChild(l), e.appendChild(s), e.appendChild(n), e;\n  }\n  renderFooterBtn(e, t, s) {\n    const r = document.createElement(\"button\");\n    return r.className = this.wrapClassName(\"footer-btn\") + \" \" + this.wrapClassName(e), r.appendChild(t), s && r.appendChild(s), r;\n  }\n}\nclass N {\n  constructor({\n    readonly$: e,\n    pagesIndex$: t,\n    previewRoot: s,\n    footerRoot: r,\n    pages$: o,\n    playable: n\n  }) {\n    this.wrapClassName = (a) => `${this.namespace}-${a}`, this.namespace = \"netless-app-docs-viewer\", this.sideEffect = new S(), this.events = new z(), this.preview = new M({\n      pages$: o,\n      readonly$: e,\n      pagesIndex$: t,\n      root: s,\n      sideEffect: this.sideEffect,\n      events: this.events,\n      namespace: this.namespace,\n      wrapClassName: this.wrapClassName\n    }), this.footer = new B({\n      pages$: o,\n      readonly$: e,\n      playable: n,\n      pagesIndex$: t,\n      root: r,\n      namespace: this.namespace,\n      sideEffect: this.sideEffect,\n      events: this.events,\n      wrapClassName: this.wrapClassName\n    });\n  }\n  destroy() {\n    this.preview.destroy(), this.footer.destroy(), this.sideEffect.flushAll(), this.events.destroy();\n  }\n}\nfunction $(c, e, t) {\n  return Math.min(Math.max(c, e), t);\n}\nfunction k(c) {\n  return c.touches ? c.touches[0] : c;\n}\nfunction T(c) {\n  c.stopPropagation(), c.cancelable && c.preventDefault();\n}\nfunction P(c, e) {\n  return c.width === e.width && c.height === e.height;\n}\nclass U {\n  constructor(e) {\n    var t, s, r;\n    this.velocity = 0, this._paused = !0, this._animationFrameID = null, this._loopTimestamp = 0, this.looper = (o) => {\n      var a;\n      if (this._paused)\n        return;\n      let n = Math.floor((o - this._loopTimestamp) / 1e3 * 60) + 1;\n      for (this._loopTimestamp = o; n-- > 0; )\n        this.stepper();\n      (a = this.onStep) == null || a.call(this, this.current), this._paused ? this._animationFrameID = null : this._animationFrameID = window.requestAnimationFrame(this.looper);\n    }, this.current = (t = e.start) != null ? t : 0, this.target = this.current, this.stiffness = (s = e.stiffness) != null ? s : 170, this.damping = (r = e.damping) != null ? r : 26, this.onStep = e.onStep;\n  }\n  get paused() {\n    return this._paused;\n  }\n  stepTo(e, t) {\n    var s;\n    this._paused && t != null && (this.current = t), this._paused = !1, this.target = e, (s = this.onStep) == null || s.call(this, this.current), this._loopTimestamp = Date.now(), this._animationFrameID = window.requestAnimationFrame(this.looper);\n  }\n  pause() {\n    this._paused = !0, this._animationFrameID != null && window.cancelAnimationFrame(this._animationFrameID);\n  }\n  destroy() {\n    this.pause(), this.onStep = void 0;\n  }\n  stepper() {\n    const e = -this.stiffness * (this.current - this.target), t = -this.damping * this.velocity, s = this.velocity + (e + t) / 60, r = this.current + s / 60;\n    Math.abs(s - 0) < 0.01 && Math.abs(r - this.target) < 0.01 ? (this.current = this.target, this.velocity = 0, this._paused = !0) : (this.current = r, this.velocity = s);\n  }\n}\nclass F {\n  constructor(e, t, s, r, o, n) {\n    this.index = e, this.lastVisit = Date.now(), this.sideEffect = new S();\n    const a = x(t, (u) => u[e] || { width: 0, height: 0 }), l = f([a, s], ([u, p]) => (p.width - u.width) / 2), i = f([o, n], ([u, p]) => (u[e] || 0) - p), h = document.createElement(\"div\");\n    h.className = \"page-renderer-page\", h.dataset.index = `${e}`;\n    const d = document.createElement(\"img\");\n    d.className = \"page-renderer-page-img\", h.appendChild(d), this.sideEffect.addDisposer([\n      f([a, r]).subscribe(([u, p]) => {\n        h.style.width = `${u.width * p}px`, h.style.height = `${u.height * p}px`;\n      }),\n      a.subscribe((u) => {\n        u.thumbnail && (h.style.backgroundImage = `url(\"${u.thumbnail}\")`), d.width = u.width, d.height = u.height, d.src = u.src;\n      }),\n      f([l, i, r]).subscribe(([u, p, g]) => {\n        h.style.transform = `translate(${u * g}px, ${p * g}px)`;\n      })\n    ]), this.$page = h;\n  }\n  destroy() {\n    this.sideEffect.flushAll(), this.$page.remove();\n  }\n}\nclass W {\n  constructor(e, t, s, r, o) {\n    this.pages$ = e, this.pagesSize$ = t, this.scale$ = s, this.pagesYs$ = r, this.pagesScrollTop$ = o, this.els = /* @__PURE__ */ new Map(), this.maxElCount = 200, this.gcTimer = null, this.gc = () => {\n      var n;\n      if (this.gcTimer = null, this.els.size > this.maxElCount) {\n        const a = [...this.els.values()].sort((l, i) => i.lastVisit - l.lastVisit);\n        for (let l = Math.floor(this.maxElCount / 4); l < a.length; l++)\n          (n = this.els.get(a[l].index)) == null || n.destroy(), this.els.delete(a[l].index);\n      }\n    }, this.schedule = window.requestIdleCallback || ((n) => window.setTimeout(n, 5e3)), this.cancelSchedule = window.cancelIdleCallback || window.clearTimeout;\n  }\n  getEl(e) {\n    let t = this.els.get(e);\n    return t || (t = new F(e, this.pages$, this.pagesSize$, this.scale$, this.pagesYs$, this.pagesScrollTop$), this.els.set(e, t)), t.lastVisit = Date.now(), this.els.size > this.maxElCount && this.gcTimer === null && (this.gcTimer = this.schedule(this.gc)), t;\n  }\n  destroy() {\n    this.els.forEach((e) => e.destroy()), this.els.clear(), this.gcTimer !== null && (this.cancelSchedule(this.gcTimer), this.gcTimer = null);\n  }\n}\nclass Y {\n  constructor({ pagesScrollTop$: e, containerRect$: t, pages$: s, pagesSize$: r }) {\n    this.sideEffect = new S(), s = x(s, (p) => p.map((g) => {\n      if (g.thumbnail)\n        return g;\n      try {\n        const w = new URL(g.src);\n        return w.searchParams.set(\"x-oss-process\", \"image/resize,l_50\"), { ...g, thumbnail: w.toString() };\n      } catch (w) {\n        return console.error(w), g;\n      }\n    }));\n    const o = x(s, (p) => {\n      const g = Array(p.length);\n      for (let w = 0; w < p.length; w++)\n        g[w] = w > 0 ? g[w - 1] + p[w - 1].height : 0;\n      return g;\n    }), n = x(s, (p) => {\n      let g = 1 / 0;\n      for (let w = p.length - 1; w >= 0; w--)\n        p[w].height <= g && (g = p[w].height);\n      return g;\n    }), a = f([e, o, s], ([p, g, w]) => {\n      if (g.length !== w.length)\n        return a.value;\n      for (let m = 0; m < g.length; m++)\n        if (g[m] + w[m].height - p >= 1e-3)\n          return m;\n      return g.length - 1;\n    }), l = f([t, r], ([p, g]) => p.width / g.width || 1), i = f([s, t, n, l], ([p, g, w, m]) => $(Math.ceil(g.height / m / w / 2), 1, p.length));\n    D(this, {\n      pagesScrollTop: e,\n      containerRect: t,\n      pages: s,\n      pagesSize: r,\n      pagesIndex: a,\n      pagesYs: o,\n      pagesMinHeight: n,\n      scale: l\n    }), this.pageElManager = new W(s, r, l, o, e), this.$pages = this.renderPages();\n    const h = new v(!1);\n    this.sideEffect.addDisposer(h.subscribe((p) => this.$pages.classList.toggle(\"is-hwa\", p)));\n    const d = () => h.setValue(!1), u = () => {\n      this.sideEffect.setTimeout(d, 1e3, \"turn-off-hwa\"), h.setValue(!0);\n    };\n    this.sideEffect.addDisposer(f([a, i, s]).subscribe(([p, g, w]) => {\n      u();\n      const m = Math.max(p - g, 0), E = Math.min(p + g, w.length - 1);\n      for (let b = 0; b < this.$pages.children.length; b++) {\n        const y = this.$pages.children[b], C = Number(y.dataset.index);\n        C >= m && C <= E || (y.remove(), b--);\n      }\n      for (let b = m; b <= E; b++) {\n        const y = this.pageElManager.getEl(b);\n        y.$page.parentElement !== this.$pages && this.$pages.appendChild(y.$page);\n      }\n    }));\n  }\n  renderPages() {\n    const e = document.createElement(\"div\");\n    return e.className = \"page-renderer-pages-container\", this.sideEffect.addDisposer(this._containerRect$.subscribe((t) => {\n      e.style.width = `${t.width}px`, e.style.height = `${t.height}px`;\n    }), \"render-pages-size\"), e;\n  }\n  destroy() {\n    this.sideEffect.flushAll(), this.$pages.remove(), this.pageElManager.destroy();\n  }\n}\nconst j = 30;\nclass O {\n  constructor({\n    pagesScrollTop$: e,\n    containerRect$: t,\n    stageRect$: s,\n    pagesSize$: r,\n    readonly$: o,\n    scrollbarMinHeight: n = j,\n    wrapClassName: a,\n    onDragScroll: l\n  }) {\n    this.sideEffect = new S(), this.scrolling$ = new v(!1), this.pagesScrollTop$ = e, this.containerRect$ = t, this.stageRect$ = s, this.pagesSize$ = r, this.scrollbarMinHeight = n, this.readonly$ = o, this.wrapClassName = a, this.onDragScroll = l, this.scrollbarHeight$ = f([t, s, r], ([i, h, d]) => $(h.height / (h.width / d.width * d.height) * i.height, n, i.height)), this.scrollTop$ = f([t, s, r, this.scrollbarHeight$, this.pagesScrollTop$], ([i, h, d, u, p]) => $(p / (d.height - d.width / h.width * h.height) * (i.height - u), 0, i.height - u)), this.$scrollbar = this.renderScrollbar();\n  }\n  mount(e) {\n    e.appendChild(this.$scrollbar);\n  }\n  destroy() {\n    this.$scrollbar.remove(), this.onDragScroll = void 0, this.sideEffect.flushAll();\n  }\n  renderScrollbar() {\n    const e = document.createElement(\"button\");\n    e.className = this.wrapClassName(\"scrollbar\"), e.style.minHeight = `${this.scrollbarMinHeight}px`, this.sideEffect.addDisposer([\n      this.scrollbarHeight$.subscribe((s) => {\n        e.style.height = `${s}px`;\n      }),\n      this.scrollTop$.subscribe((s) => {\n        this.scrolling$.setValue(!0), this.sideEffect.setTimeout(() => this.scrolling$.setValue(!1), 100, \"reset-scrolling\");\n        const r = () => e.style.transform = `translateY(${s}px)`;\n        window.requestAnimationFrame ? window.requestAnimationFrame(r) : r();\n      }),\n      this.scrolling$.subscribe((s) => {\n        e.classList.toggle(this.wrapClassName(\"scrolling\"), s);\n      })\n    ]);\n    const t = (s) => {\n      if (!s.isPrimary || this.readonly$.value || s.button != null && s.button !== 0)\n        return;\n      T(s);\n      const r = this.wrapClassName(\"scrollbar-dragging\");\n      e.classList.toggle(r, !0);\n      const o = this.pagesScrollTop$.value, { clientY: n } = k(s), a = (i) => {\n        if (!i.isPrimary || this.readonly$.value)\n          return;\n        const { clientY: h } = k(i), d = h - n;\n        Math.abs(d) > 0 && this.onDragScroll && this.onDragScroll(o + d / this.containerRect$.value.height * this.pagesSize$.value.height);\n      }, l = (i) => {\n        !i.isPrimary || (e.classList.toggle(r, !1), window.removeEventListener(\"pointermove\", a, !0), window.removeEventListener(\"pointerup\", l, !0), window.removeEventListener(\"pointercancel\", l, !0));\n      };\n      window.addEventListener(\"pointermove\", a, !0), window.addEventListener(\"pointerup\", l, !0), window.addEventListener(\"pointercancel\", l, !0);\n    };\n    return this.sideEffect.addEventListener(e, \"pointerdown\", t), e;\n  }\n}\nclass G {\n  constructor({\n    whiteboard: e,\n    readonly$: t,\n    box: s,\n    pages: r,\n    pagesScrollTop: o = 0,\n    onUserScroll: n\n  }) {\n    this.sideEffect = new S(), this.userScrolling = !1, this.whiteboard = e, this.readonly$ = t, this.box = s, this.pages = r, this.onUserScroll = n;\n    const a = () => {\n      var i;\n      this.userScrolling = !1, (i = this.onUserScroll) == null || i.call(this, this.pagesScrollTop$.value);\n    };\n    this.debounceOnUserScroll = () => {\n      this.userScrolling = !0, this.sideEffect.setTimeout(a, 80, \"debounceOnUserScroll\");\n    };\n    const l = new v([]);\n    this.pagesScrollTop$ = new v(o), this.pagesSize$ = x(l, (i) => {\n      let h = 0, d = 0;\n      for (let u = i.length - 1; u >= 0; u--) {\n        const p = i[u];\n        p.width > h && (h = p.width), d += p.height;\n      }\n      return { width: Math.max(1, h), height: Math.max(1, d) };\n    }, { compare: P }), this.pageRenderer = new Y({\n      pagesScrollTop$: this.pagesScrollTop$,\n      containerRect$: s._stageRect$,\n      pages$: l,\n      pagesSize$: this.pagesSize$\n    }), this.viewer = new N({\n      readonly$: t,\n      pagesIndex$: this.pageRenderer._pagesIndex$,\n      previewRoot: s.$body,\n      footerRoot: s.$footer,\n      pages$: l,\n      playable: !1\n    }), this.sideEffect.addDisposer([\n      this.viewer.events.on(\"next\", () => {\n        this.userScrollByPercent(0.8);\n      }),\n      this.viewer.events.on(\"back\", () => {\n        this.userScrollByPercent(-0.8);\n      })\n    ]), this.scrollbar = new O({\n      pagesScrollTop$: this.pagesScrollTop$,\n      containerRect$: s._bodyRect$,\n      stageRect$: s._stageRect$,\n      pagesSize$: this.pagesSize$,\n      readonly$: t,\n      wrapClassName: this.wrapClassName.bind(this),\n      onDragScroll: (i) => {\n        this.pageScrollTo(i), this.debounceOnUserScroll();\n      }\n    }), this.pageScrollStepper = new U({\n      start: this.pagesScrollTop$.value,\n      onStep: (i) => {\n        this.pageScrollTo(i);\n      }\n    }), this.sideEffect.addDisposer(this.viewer.events.on(\"jumpPage\", (i) => this.userScrollToPageIndex(i))), this.render(), this.setupScrollListener(), this.sideEffect.setTimeout(() => {\n      this.userScrolling || this.pageScrollTo(this.pageRenderer.pagesScrollTop);\n    }, 100), l.setValue(r);\n  }\n  get pagesScrollTop() {\n    return this.pagesScrollTop$.value;\n  }\n  destroy() {\n    this.sideEffect.flushAll(), this.pageScrollStepper.destroy(), this.onUserScroll = void 0, this.viewer.destroy(), this.pageRenderer.destroy(), this.scrollbar.destroy();\n  }\n  syncPageScrollTop(e) {\n    !this.userScrolling && e >= 0 && Math.abs(this.pagesScrollTop$.value - e) > 0.01 && this.pageScrollStepper.stepTo(e, this.pagesScrollTop$.value);\n  }\n  render() {\n    this.box.$content.style.overflow = \"hidden\", this.box.mountStage(this.pageRenderer.$pages), this.scrollbar.mount(this.box.$body);\n  }\n  pageScrollTo(e) {\n    const t = this.whiteboard.view.size.height / 2 / this.pageRenderer.scale;\n    this.whiteboard.view.moveCamera({\n      centerY: $(e + t, t, this.pagesSize$.value.height - t),\n      animationMode: \"immediately\"\n    });\n  }\n  userScrollToPageIndex(e) {\n    var t;\n    if (e = $(e, 0, this.pages.length - 1), !this.readonly$.value && !Number.isNaN(e)) {\n      const s = this.pageRenderer.pagesYs[e];\n      s >= 0 && ((t = this.onUserScroll) == null || t.call(this, s + 5 / this.pageRenderer.scale));\n    }\n  }\n  userScrollByPercent(e) {\n    var t;\n    this.readonly$.value || (t = this.onUserScroll) == null || t.call(this, $(this.pageRenderer.pagesScrollTop + this.pageRenderer.containerRect.height / this.pageRenderer.scale * $(e, -1, 1), 0, this.pageRenderer.pagesSize.height - this.pageRenderer.containerRect.height / this.pageRenderer.scale));\n  }\n  setupScrollListener() {\n    this.sideEffect.addEventListener(this.box.$main, \"wheel\", (e) => {\n      T(e), !this.readonly$.value && this.pageScrollStepper.paused && (this.pageScrollTo(this.pagesScrollTop + e.deltaY), this.debounceOnUserScroll());\n    }, { passive: !1 }), this.sideEffect.addEventListener(this.box.$main, \"touchmove\", (e) => {\n      !this.readonly$.value && e.touches.length > 1 && this.debounceOnUserScroll();\n    }, { passive: !0, capture: !0 }), this.sideEffect.add(() => {\n      const e = (t) => {\n        const { width: s, height: r } = this.whiteboard.view.size;\n        if (s <= 0 || r <= 0)\n          return;\n        const o = t.centerY - this.pageRenderer.containerRect.height / this.pageRenderer.scale / 2;\n        this.pagesScrollTop$.setValue(o);\n      };\n      return this.whiteboard.view.callbacks.on(\"onCameraUpdated\", e), () => this.whiteboard.view.callbacks.off(\"onCameraUpdated\", e);\n    }), this.sideEffect.addDisposer(this.box._stageRect$.subscribe((e) => {\n      const { width: t, height: s } = this.pagesSize$.value;\n      this.whiteboard.view.moveCameraToContain({\n        originX: 0,\n        originY: this.pageRenderer.pagesScrollTop,\n        width: t,\n        height: e.height / this.pageRenderer.scale,\n        animationMode: \"immediately\"\n      }), this.whiteboard.view.setCameraBound({\n        damping: 1,\n        maxContentMode: () => this.pageRenderer.scale,\n        minContentMode: () => this.pageRenderer.scale,\n        centerX: t / 2,\n        centerY: s / 2,\n        width: t,\n        height: s\n      });\n    }), \"whiteboard-size-update\"), this.sideEffect.addEventListener(window, \"keyup\", (e) => {\n      if (!(this.readonly$.value || !this.box.focus || this.box.minimized))\n        switch (e.key) {\n          case \"PageDown\": {\n            this.userScrollByPercent(0.8);\n            break;\n          }\n          case \"PageUp\": {\n            this.userScrollByPercent(-0.8);\n            break;\n          }\n          case \"ArrowLeft\": {\n            this.userScrollByPercent(-0.25);\n            break;\n          }\n          case \"ArrowRight\": {\n            this.userScrollByPercent(0.25);\n            break;\n          }\n          case \"ArrowDown\": {\n            this.userScrollByPercent(0.5);\n            break;\n          }\n          case \"ArrowUp\": {\n            this.userScrollByPercent(-0.5);\n            break;\n          }\n        }\n    }, { capture: !0 });\n  }\n  wrapClassName(e) {\n    return \"netless-app-docs-viewer-static-\" + e;\n  }\n}\nclass q {\n  constructor({ readonly$: e, context: t, whiteboard: s, box: r, pages: o }) {\n    this.sideEffect = new S(), this.context = t, this.whiteboard = s, this.box = r, this.pages = o;\n    const n = new v(t.displayer.state.sceneState.index || 0);\n    this.pagesIndex$ = n, this.sideEffect.add(() => {\n      const a = (l) => {\n        this.jumpToPage(l.index);\n      };\n      return this.context.emitter.on(\"sceneStateChange\", a), () => this.context.emitter.off(\"sceneStateChange\", a);\n    }), this.viewer = new N({\n      readonly$: e,\n      pagesIndex$: n,\n      previewRoot: r.$body,\n      footerRoot: r.$footer,\n      pages$: new v(o),\n      playable: !0\n    }), this.sideEffect.addDisposer([\n      this.viewer.events.on(\"jumpPage\", (a) => this.jumpToPage(a, !0)),\n      this.viewer.events.on(\"play\", () => {\n        var a;\n        return (a = this.context.room) == null ? void 0 : a.pptNextStep();\n      }),\n      this.viewer.events.on(\"back\", () => this.prevPage()),\n      this.viewer.events.on(\"next\", () => this.nextPage())\n    ]), this.render(), this.sideEffect.addDisposer(n.subscribe((a, l) => {\n      var d, u;\n      if (e.value)\n        return;\n      const i = this.context.getInitScenePath(), h = (u = (d = this.context.getScenes()) == null ? void 0 : d[a]) == null ? void 0 : u.name;\n      if (i && h && this.context.setScenePath(`${i}/${h}`), l) {\n        const p = this.context.room;\n        if (p) {\n          const g = p.state.globalState.__pptState;\n          p.setGlobalState({\n            __pptState: g && {\n              uuid: g.uuid,\n              pageIndex: a,\n              disableAutoPlay: g.disableAutoPlay\n            }\n          });\n        }\n      }\n    }));\n  }\n  destroy() {\n    this.sideEffect.flushAll(), this.viewer.destroy();\n  }\n  nextPage() {\n    this.jumpToPage(this.pagesIndex$.value + 1, !0);\n  }\n  prevPage() {\n    this.jumpToPage(this.pagesIndex$.value - 1, !0);\n  }\n  jumpToPage(e, t = !1) {\n    this.pagesIndex$.setValue($(e, 0, this.pages.length - 1), t);\n  }\n  render() {\n    var t;\n    this.box.mountStage(document.createElement(\"div\")), this.sideEffect.addEventListener(window, \"keydown\", (s) => {\n      var r;\n      if (this.box.focus)\n        switch (s.key) {\n          case \"ArrowUp\":\n          case \"ArrowLeft\": {\n            this.prevPage();\n            break;\n          }\n          case \"ArrowRight\":\n          case \"ArrowDown\": {\n            (r = this.context.room) == null || r.pptNextStep();\n            break;\n          }\n        }\n    });\n    const e = (t = this.whiteboard.view.divElement) == null ? void 0 : t.parentElement;\n    e && this.sideEffect.addEventListener(e, \"click\", (s) => {\n      var o;\n      const r = this.context.room;\n      if (r && r.state.memberState.currentApplianceName === \"clicker\") {\n        for (let n = s.target; n; n = n.parentElement)\n          if ((o = n.classList) != null && o.contains(\"ppt-event-source\"))\n            return;\n        r.pptNextStep();\n      }\n    });\n  }\n  wrapClassName(e) {\n    return \"netless-app-docs-viewer-dynamic-\" + e;\n  }\n}\nconst J = \"DocsViewer\", se = {\n  kind: J,\n  setup(c) {\n    const e = c.box, t = c.getScenes();\n    if (!t)\n      throw new Error(\"[Docs Viewer]: scenes not found.\");\n    const s = new S(), r = t.map(({ ppt: n }) => n ? {\n      width: n.width,\n      height: n.height,\n      src: n.src,\n      thumbnail: n.previewURL\n    } : null).filter((n) => Boolean(n));\n    if (r.length <= 0)\n      throw new Error(\"[Docs Viewer]: empty scenes.\");\n    e.mountStyles(A);\n    const o = new v(!c.isWritable);\n    s.addDisposer(c.emitter.on(\"writableChange\", (n) => {\n      o.setValue(!n);\n    })), r[0].src.startsWith(\"ppt\") ? K(s, c, e, r, o) : X(s, c, e, r, o), s.addDisposer(c.emitter.on(\"destroy\", () => {\n      s.flushAll();\n    }));\n  }\n};\nfunction X(c, e, t, s, r) {\n  const o = e.createWhiteBoardView({ syncCamera: !1 });\n  c.addDisposer(r.subscribe((l) => {\n    o.view.disableCameraTransform = l;\n  }));\n  const n = e.createStorage(\"static-docs-viewer\", { pagesScrollTop: 0 }), a = new G({\n    whiteboard: o,\n    readonly$: r,\n    box: t,\n    pages: s,\n    pagesScrollTop: n.state.pagesScrollTop,\n    onUserScroll: (l) => {\n      e.isWritable && n.setState({ pagesScrollTop: l });\n    }\n  });\n  c.addDisposer(() => a.destroy()), c.addDisposer(n.addStateChangedListener((l) => {\n    l.pagesScrollTop && a.syncPageScrollTop(l.pagesScrollTop.newValue || 0);\n  })), c.addDisposer(f([\n    t._maximized$,\n    t._managerStageRect$,\n    t._intrinsicSize$,\n    a.pagesSize$,\n    a.pageRenderer._pagesMinHeight$\n  ], ([l, i, h, d, u]) => l ? Math.max(u / d.width * (2 / 5), i.height / i.width) : h.height / h.width * (i.height / i.width)).subscribe((l) => {\n    t.setStageRatio(l);\n  }));\n}\nfunction K(c, e, t, s, r) {\n  const o = e.createWhiteBoardView();\n  o.view.disableCameraTransform = !0;\n  const n = new q({\n    context: e,\n    whiteboard: o,\n    box: t,\n    pages: s,\n    readonly$: r\n  });\n  c.addDisposer(() => n.destroy());\n  const a = new v({ width: s[0].width, height: s[0].height }, { compare: P });\n  if (c.addDisposer(n.pagesIndex$.subscribe((l) => {\n    const i = s[l];\n    i && a.setValue({ width: i.width, height: i.height });\n  })), c.addDisposer(a.subscribe((l) => {\n    r.value || o.setBaseRect(l);\n  })), e.isAddApp) {\n    const l = c.add(() => {\n      const i = ({ width: h, height: d }) => {\n        if (s.length > 0 && t.state !== \"maximized\") {\n          const { width: u, height: p } = s[0], w = p / u * h - d;\n          w !== 0 && e.isWritable && e.emitter.emit(\"setBoxSize\", {\n            width: t.intrinsicWidth,\n            height: t.intrinsicHeight + w / t.rootRect.height\n          });\n        }\n        c.remove(l);\n      };\n      return o.view.callbacks.once(\"onSizeUpdated\", i), () => o.view.callbacks.off(\"onSizeUpdated\", i);\n    });\n  }\n}\nexport {\n  N as DocsViewer,\n  se as NetlessAppDocsViewer,\n  Y as PageRenderer,\n  O as ScrollBar,\n  U as Stepper,\n  se as default\n};\n//# sourceMappingURL=main.mjs.map\n","export interface Rect {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport interface Size {\n    width: number;\n    height: number;\n}\n\nexport function isSameSize(a: Size, b: Size): boolean {\n    return a.width === b.width && a.height === b.height;\n}\n\nexport function isSameRect(a: Rect, b: Rect): boolean {\n    return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\nexport function clamp(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n}\n","import styles from \"./style.css?inline\";\n\nimport { derive, ReadonlyVal, Val } from \"value-enhancer\";\nimport { Disposable } from \"side-effect-manager\";\nimport { DocsViewer, DocsViewerPage, PageRenderer, Stepper } from \"@netless/app-docs-viewer\";\nimport { IServiceFilePreview, CloudFile, FileResourceType } from \"@netless/flat-services\";\nimport { queryConvertingTaskStatus } from \"@netless/flat-service-provider-file-convert-netless\";\nimport { clamp, isSameRect, isSameSize, Rect, Size } from \"../utils\";\n\nexport class StaticDocsViewer implements IServiceFilePreview {\n    public disposable = new Disposable();\n    public pagesScrollTop$: Val<number>;\n    public pages$: Val<DocsViewerPage[]>;\n    public pagesSize$: ReadonlyVal<Size>;\n    public readonly$: Val<boolean>;\n\n    public pageRenderer: PageRenderer;\n    public viewer: DocsViewer;\n    public stepper: Stepper;\n\n    public $docsViewer: HTMLElement;\n\n    public constructor() {\n        this.readonly$ = new Val(false);\n        this.pages$ = new Val<DocsViewerPage[]>([]);\n        this.pagesScrollTop$ = new Val(0);\n        this.pagesSize$ = derive(\n            this.pages$,\n            pages => {\n                let width = 0;\n                let height = 0;\n                for (let i = pages.length - 1; i >= 0; i--) {\n                    const page = pages[i];\n                    if (page.width > width) {\n                        width = page.width;\n                    }\n                    height += page.height;\n                }\n                return { width: Math.max(1, width), height: Math.max(1, height) };\n            },\n            { compare: isSameSize },\n        );\n\n        const $docsViewer = document.createElement(\"div\");\n        this.$docsViewer = $docsViewer;\n        $docsViewer.tabIndex = 0;\n        $docsViewer.className = \"file-preview-netless-container\";\n\n        const $style = document.createElement(\"style\");\n        $style.textContent = styles;\n        $docsViewer.appendChild($style);\n\n        const $body = document.createElement(\"div\");\n        $body.className = \"file-preview-netless-body\";\n        $docsViewer.appendChild($body);\n\n        const $operate = document.createElement(\"div\");\n        $operate.className = \"file-preview-netless-operate\";\n        $body.appendChild($operate);\n\n        const $footer = document.createElement(\"div\");\n        $footer.className = \"file-preview-netless-footer\";\n        $docsViewer.appendChild($footer);\n\n        const getBodyRect = (): Rect => {\n            const rect = $body.getBoundingClientRect();\n            return {\n                x: rect.x,\n                y: rect.y,\n                width: rect.width,\n                height: rect.height,\n            };\n        };\n        const bodyRect$ = new ReadonlyVal(getBodyRect(), {\n            beforeSubscribe: setValue => {\n                // ResizeObserver cannot observer DOM in another window,\n                // so we measure the size of container at 60FPS.\n                let timer = 0;\n                function update(): void {\n                    timer = requestAnimationFrame(update);\n                    setValue(getBodyRect());\n                }\n                update();\n                return () => cancelAnimationFrame(timer);\n            },\n            compare: isSameRect,\n        });\n\n        this.pageRenderer = new PageRenderer({\n            pagesScrollTop$: this.pagesScrollTop$,\n            containerRect$: bodyRect$,\n            pages$: this.pages$,\n            pagesSize$: this.pagesSize$,\n        });\n        $body.appendChild(this.pageRenderer.$pages);\n\n        this.viewer = new DocsViewer({\n            readonly$: this.readonly$,\n            pagesIndex$: this.pageRenderer._pagesIndex$,\n            previewRoot: $body,\n            footerRoot: $footer,\n            pages$: this.pages$,\n            playable: false,\n        });\n\n        this.stepper = new Stepper({\n            start: this.pagesScrollTop$.value,\n            onStep: pageScrollTop => {\n                this.pagesScrollTop$.setValue(pageScrollTop);\n            },\n        });\n\n        this.disposable.push([\n            this.viewer.events.on(\"jumpPage\", pageIndex => this.userScrollToPageIndex(pageIndex)),\n            this.viewer.events.on(\"next\", () => {\n                this.userScrollByPercent(0.8);\n            }),\n            this.viewer.events.on(\"back\", () => {\n                this.userScrollByPercent(-0.8);\n            }),\n        ]);\n\n        this.disposable.addEventListener(\n            $operate,\n            \"wheel\",\n            ev => {\n                if (!this.readonly$.value && this.stepper.paused) {\n                    ev.stopPropagation();\n                    ev.preventDefault();\n                    this.pagesScrollTop$.setValue(\n                        clamp(\n                            this.pagesScrollTop$.value + ev.deltaY,\n                            0,\n                            this.pagesSize$.value.height -\n                                bodyRect$.value.height / this.pageRenderer._scale$.value,\n                        ),\n                    );\n                }\n            },\n            { passive: false },\n        );\n\n        let touchStartClientY = NaN;\n\n        this.disposable.addEventListener(\n            $operate,\n            \"touchstart\",\n            ev => {\n                ev.stopPropagation();\n                ev.preventDefault();\n                if (!this.readonly$.value && ev.touches.length > 0 && this.stepper.paused) {\n                    touchStartClientY = ev.touches[0].pageY;\n                }\n            },\n            { passive: false, capture: true },\n        );\n\n        this.disposable.addEventListener(\n            $operate,\n            \"touchmove\",\n            ev => {\n                ev.stopPropagation();\n                ev.preventDefault();\n                if (\n                    !this.readonly$.value &&\n                    ev.touches.length > 0 &&\n                    this.stepper.paused &&\n                    !Number.isNaN(touchStartClientY)\n                ) {\n                    const deltaY = touchStartClientY - ev.touches[0].pageY;\n                    touchStartClientY = ev.touches[0].pageY;\n                    this.pagesScrollTop$.setValue(\n                        clamp(\n                            this.pagesScrollTop$.value + deltaY * 3,\n                            0,\n                            this.pagesSize$.value.height -\n                                bodyRect$.value.height / this.pageRenderer._scale$.value,\n                        ),\n                    );\n                }\n            },\n            { passive: false, capture: true },\n        );\n\n        const handleTouchEnd = (ev: TouchEvent): void => {\n            ev.stopPropagation();\n            ev.preventDefault();\n            touchStartClientY = NaN;\n        };\n        this.disposable.addEventListener($operate, \"touchend\", handleTouchEnd, {\n            passive: false,\n            capture: true,\n        });\n        this.disposable.addEventListener($operate, \"touchcancel\", handleTouchEnd, {\n            passive: false,\n            capture: true,\n        });\n\n        this.disposable.addEventListener(window, \"keyup\", ev => {\n            if (this.readonly$.value) {\n                return;\n            }\n            switch (ev.key) {\n                case \"PageDown\": {\n                    this.userScrollByPercent(0.8);\n                    break;\n                }\n                case \"PageUp\": {\n                    this.userScrollByPercent(-0.8);\n                    break;\n                }\n                case \"ArrowLeft\": {\n                    this.userScrollByPercent(-0.25);\n                    break;\n                }\n                case \"ArrowRight\": {\n                    this.userScrollByPercent(0.25);\n                    break;\n                }\n                case \"ArrowDown\": {\n                    this.userScrollByPercent(0.5);\n                    break;\n                }\n                case \"ArrowUp\": {\n                    this.userScrollByPercent(-0.5);\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        });\n    }\n\n    private userScrollToPageIndex(index: number): void {\n        index = clamp(index, 0, this.pages$.value.length - 1);\n        if (!this.readonly$.value && !Number.isNaN(index)) {\n            const offsetY = this.pageRenderer.pagesYs[index];\n            if (offsetY >= 0) {\n                this.stepper.stepTo(offsetY + 5 / this.pageRenderer.scale);\n            }\n        }\n    }\n\n    private userScrollByPercent(percent: number): void {\n        if (!this.readonly$.value) {\n            this.stepper.stepTo(\n                clamp(\n                    this.pageRenderer.pagesScrollTop +\n                        (this.pageRenderer.containerRect.height / this.pageRenderer.scale) *\n                            clamp(percent, -1, 1),\n                    0,\n                    this.pageRenderer.pagesSize.height -\n                        this.pageRenderer.containerRect.height / this.pageRenderer.scale,\n                ),\n            );\n        }\n    }\n\n    public async preview(file: CloudFile, container: HTMLElement): Promise<void> {\n        if (\n            file.resourceType === FileResourceType.WhiteboardConvert ||\n            file.resourceType === FileResourceType.WhiteboardProjector\n        ) {\n            const result = await queryConvertingTaskStatus({\n                dynamic: false,\n                resourceType: file.resourceType,\n                meta: file.meta,\n            });\n\n            if (result.progress?.convertedFileList) {\n                this.pagesScrollTop$.setValue(0);\n                this.pages$.setValue(\n                    result.progress.convertedFileList.map(item => ({\n                        width: item.width,\n                        height: item.height,\n                        src: item.conversionFileUrl,\n                        thumbnail: item.preview || item.conversionFileUrl,\n                    })),\n                );\n            }\n\n            container.appendChild(this.$docsViewer);\n        }\n    }\n\n    public async destroy(): Promise<void> {\n        this.disposable.flushAll();\n        this.$docsViewer.remove();\n        this.pagesScrollTop$.destroy();\n        this.pages$.destroy();\n        this.pagesSize$.destroy();\n        this.pageRenderer.destroy();\n        this.viewer.destroy();\n    }\n}\n","import { IServiceFilePreview, CloudFile } from \"@netless/flat-services\";\nimport { StaticDocsViewer } from \"./static-docs-viewer\";\n\nexport class FilePreviewNetless implements IServiceFilePreview {\n    public staticDocsViewer?: StaticDocsViewer;\n\n    public async preview(file: CloudFile, container: HTMLElement): Promise<void> {\n        await (this.staticDocsViewer ||= new StaticDocsViewer()).preview(file, container);\n    }\n\n    public async destroy(): Promise<void> {\n        this.staticDocsViewer?.destroy();\n    }\n}\n"],"names":["runningOnBrowser","isBot","supportsIntersectionObserver","supportsClassList","isHiDpi","defaultSettings","getExtendedSettings","customSettings","createInstance","classObj","options","event","eventString","instance","autoInitialize","i","optionsItem","SRC","SRCSET","SIZES","POSTER","ORIGINALS","DATA","statusLoading","statusLoaded","statusApplied","statusEntered","statusError","statusNative","dataPrefix","statusDataName","getData","element","attribute","setData","value","attrName","getStatus","setStatus","status","resetStatus","hasEmptyStatus","hasStatusLoading","hasStatusError","hasStatusNative","statusesAfterLoading","hadStartedLoading","safeCallback","callback","arg1","arg2","arg3","addClass","className","removeClass","addTempImage","deleteTempImage","getTempImage","unobserve","observer","resetObserver","unobserveEntered","settings","updateLoadingCount","delta","decreaseToLoadCount","setToLoadCount","isSomethingLoading","haveElementsToLoad","getSourceTags","parentTag","sourceTags","childTag","forEachPictureSource","fn","parent","forEachVideoSource","attrsSrc","attrsSrcPoster","attrsSrcSrcsetSizes","attrsData","hasOriginalAttrs","getOriginalAttrs","deleteOriginalAttrs","setOriginalsObject","attributes","originals","saveOriginalBackgroundStyle","setOrResetAttribute","restoreOriginalAttrs","restoreOriginalBgImage","manageApplied","manageLoading","setAttributeIfValue","setImageAttributes","setSourcesImg","imgEl","sourceTag","setSourcesIframe","iframe","setSourcesVideo","videoEl","sourceEl","setSourcesObject","object","setBackground","bg1xValue","bgHiDpiValue","bgDataValue","setMultiBackground","setImgsetBackground","bgImgSetDataValue","imgSetValues","bgImageValues","setSourcesFunctions","setSourcesNative","setSourcesFunction","setSources","elementsWithLoadEvent","hasLoadEvent","checkFinish","addEventListener","eventName","handler","removeEventListener","hasEventListeners","addEventListeners","loadHandler","errorHandler","loadEventName","removeEventListeners","eventListeners","doneHandler","goingNative","addOneShotEventListeners","elementToListenTo","loadBackground","loadRegular","load","loadNative","removeImageAttributes","resetSourcesImg","restoreImg","restoreVideo","restoreIframe","iframeEl","restoreObject","objectEl","restoreFunctions","restoreAttributes","restoreFunction","resetClasses","restore","cancelLoading","entry","onEnter","dontLoad","onExit","tagsWithNativeLazy","shouldUseNative","loadAllNative","elements","isIntersecting","getObserverSettings","intersectionHandler","entries","observeElements","updateObserver","elementsToObserve","setObserver","toArray","nodeSet","queryElements","excludeManagedElements","hasError","filterErrorElements","getElementsToLoad","retryLazyLoad","setOnlineCheck","resetOnlineCheck","LazyLoad","givenNodeset","elementsToLoad","M","e","t","s","r","a","l","v","h","d","u","L","p","V","c","R","I","_","H","B","N","S","z","$","U","n","F","x","f","g","W","Y","w","m","D","E","b","y","C","isSameSize","isSameRect","clamp","min","max","StaticDocsViewer","__publicField","Disposable","Val","derive","pages","width","height","page","$docsViewer","$style","styles","$body","$operate","$footer","getBodyRect","rect","bodyRect$","ReadonlyVal","setValue","timer","update","PageRenderer","DocsViewer","Stepper","pageScrollTop","pageIndex","ev","touchStartClientY","deltaY","handleTouchEnd","index","offsetY","percent","file","container","FileResourceType","result","queryConvertingTaskStatus","_a","item","FilePreviewNetless"],"mappings":"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"}