{"version":3,"file":"index.0ab8000a.js","sources":["../../../../node_modules/.pnpm/date-fns@2.29.3/node_modules/date-fns/esm/fp/formatWithOptions/index.js","../../../../packages/flat-components/src/components/PeriodicRoomPage/icons/more-menu.svg","../../../../packages/flat-components/src/components/PeriodicRoomPage/CancelSubPeriodicRoomModal.tsx","../../../../packages/flat-components/src/components/PeriodicRoomPage/MoreMenu.tsx","../../../../packages/flat-components/src/components/PeriodicRoomPage/CancelPeriodicRoomModal.tsx","../../../../packages/flat-components/src/components/PeriodicRoomPage/index.tsx","../../../../packages/flat-pages/src/PeriodicRoomDetailPage/index.tsx"],"sourcesContent":["// This file is generated automatically by `scripts/build/fp.ts`. Please, don't change it.\nimport fn from \"../../format/index.js\";\nimport convertToFP from \"../_lib/convertToFP/index.js\";\nexport default convertToFP(fn, 3);","export default \"data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M8 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z' fill='%23444E60' fill-rule='evenodd'/%3e%3c/svg%3e\";","import React from \"react\";\nimport { Button, Modal } from \"antd\";\nimport { useTranslate } from \"@netless/flat-i18n\";\n\nexport interface CancelSubPeriodicRoomModalProps {\n    visible: boolean;\n    isCreator: boolean;\n    onCancel: () => void;\n    onCancelSubPeriodicRoom: () => void;\n}\n\nexport const CancelSubPeriodicRoomModal: React.FC<CancelSubPeriodicRoomModalProps> = ({\n    visible,\n    isCreator,\n    onCancel,\n    onCancelSubPeriodicRoom,\n}) => {\n    const t = useTranslate();\n    return (\n        <Modal\n            footer={[\n                <Button key=\"Cancel\" onClick={onCancel}>\n                    {isCreator ? t(\"think-again\") : t(\"cancel\")}\n                </Button>,\n                <Button key=\"Ok\" type=\"primary\" onClick={onCancelSubPeriodicRoom}>\n                    {t(\"confirm\")}\n                </Button>,\n            ]}\n            open={visible}\n            title={t(\"cancel-room\")}\n            onCancel={onCancel}\n        >\n            <span>{t(\"cancel-sub-periodic-room-tips\")}</span>\n        </Modal>\n    );\n};\n","import moreMenuSVG from \"./icons/more-menu.svg\";\n\nimport React, { useState } from \"react\";\nimport { Dropdown, Menu, message } from \"antd\";\nimport { RoomInfo } from \"../../types/room\";\nimport { InviteModal } from \"../InviteModal\";\nimport { CancelSubPeriodicRoomModal } from \"./CancelSubPeriodicRoomModal\";\nimport { useTranslate } from \"@netless/flat-i18n\";\n\nexport interface MoreMenuProps {\n    room: RoomInfo;\n    userName: string;\n    inviteBaseUrl: string;\n    isCreator: boolean;\n    onCopyInvitation: (text: string) => void;\n    onCancelSubPeriodicRoom: () => void;\n    jumpToRoomDetailPage: () => void;\n    jumpToModifyOrdinaryRoomPage: () => void;\n}\n\nexport const MoreMenu: React.FC<MoreMenuProps> = ({\n    room,\n    userName,\n    inviteBaseUrl,\n    isCreator,\n    onCopyInvitation,\n    onCancelSubPeriodicRoom,\n    jumpToRoomDetailPage,\n    jumpToModifyOrdinaryRoomPage,\n}) => {\n    const t = useTranslate();\n    const [cancelSubPeriodicRoomVisible, setCancelSubPeriodicRoomVisible] = useState(false);\n    const [inviteRoomVisible, setInviteRoomVisible] = useState(false);\n\n    return (\n        <>\n            <Dropdown\n                overlay={() => {\n                    return (\n                        <Menu\n                            items={[\n                                {\n                                    key: \"room-detail\",\n                                    label: t(\"room-detail\"),\n                                    onClick: jumpToRoomDetailPage,\n                                },\n                                ...(isCreator\n                                    ? [\n                                          {\n                                              key: \"modify-room\",\n                                              label: t(\"modify-room\"),\n                                              onClick: jumpToModifyOrdinaryRoomPage,\n                                          },\n                                          {\n                                              key: \"cancel-room\",\n                                              label: t(\"cancel-room\"),\n                                              onClick: () => setCancelSubPeriodicRoomVisible(true),\n                                          },\n                                      ]\n                                    : []),\n                                {\n                                    key: \"invitation\",\n                                    label: t(\"invitation\"),\n                                    onClick: () => setInviteRoomVisible(true),\n                                },\n                            ]}\n                        />\n                    );\n                }}\n                trigger={[\"click\"]}\n            >\n                <img alt={t(\"more\")} src={moreMenuSVG} />\n            </Dropdown>\n            <CancelSubPeriodicRoomModal\n                isCreator={isCreator}\n                visible={cancelSubPeriodicRoomVisible}\n                onCancel={() => setCancelSubPeriodicRoomVisible(false)}\n                onCancelSubPeriodicRoom={onCancelSubPeriodicRoom}\n            />\n            <InviteModal\n                baseUrl={inviteBaseUrl}\n                room={room}\n                userName={userName}\n                visible={inviteRoomVisible}\n                onCancel={() => setInviteRoomVisible(false)}\n                onCopy={text => {\n                    onCopyInvitation(text);\n                    void message.success(t(\"copy-success\"));\n                    setInviteRoomVisible(false);\n                }}\n            />\n        </>\n    );\n};\n","import React from \"react\";\nimport { Button, Modal } from \"antd\";\nimport { useTranslate } from \"@netless/flat-i18n\";\n\nexport interface CancelPeriodicRoomModalProps {\n    visible: boolean;\n    isCreator: boolean;\n    onCancel: () => void;\n    onCancelPeriodicRoom: () => void;\n}\n\nexport const CancelPeriodicRoomModal: React.FC<CancelPeriodicRoomModalProps> = ({\n    visible,\n    isCreator,\n    onCancel,\n    onCancelPeriodicRoom,\n}) => {\n    const t = useTranslate();\n    const title = (() => {\n        if (!isCreator) {\n            return t(\"remove-room\");\n        }\n\n        return t(\"cancel-of-periodic-rooms\");\n    })();\n\n    const content = (): React.ReactElement => {\n        if (!isCreator) {\n            return <span>{t(\"remove-series-of-periodic-room-tips\")}</span>;\n        }\n\n        return <span>{t(\"cancel-periodic-room-tips\")}</span>;\n    };\n\n    return (\n        <Modal\n            footer={[\n                <Button key=\"Cancel\" onClick={onCancel}>\n                    {isCreator ? t(\"think-again\") : t(\"cancel\")}\n                </Button>,\n                <Button key=\"Ok\" type=\"primary\" onClick={onCancelPeriodicRoom}>\n                    {t(\"confirm\")}\n                </Button>,\n            ]}\n            open={visible}\n            title={title}\n            onCancel={onCancel}\n        >\n            {content()}\n        </Modal>\n    );\n};\n","import \"./index.less\";\n\nimport React, { useMemo, useState } from \"react\";\nimport { Button, Table } from \"antd\";\nimport { getDay } from \"date-fns\";\nimport { format, formatWithOptions } from \"date-fns/fp\";\nimport { zhCN, enUS } from \"date-fns/locale\";\nimport { RoomInfo, RoomStatus, RoomType, Week } from \"../../types/room\";\nimport { getWeekName, getWeekNames } from \"../../utils/room\";\nimport { RoomStatusElement } from \"../RoomStatusElement\";\nimport { MoreMenu } from \"./MoreMenu\";\nimport { CancelPeriodicRoomModal } from \"./CancelPeriodicRoomModal\";\nimport { useLanguage, useTranslate } from \"@netless/flat-i18n\";\n\nexport interface PeriodicRoomPanelProps {\n    rooms: Array<RoomInfo | undefined>;\n    userName: string;\n    isCreator: boolean;\n    inviteBaseUrl: string;\n    periodicInfo: {\n        weeks: Week[];\n        roomType: RoomType;\n        endTime: number;\n    };\n    onCopyInvitation: (text: string) => void;\n    onCancelPeriodicRoom: () => void;\n    onCancelSubPeriodicRoom: (roomUUID: string, periodicUUID: string) => void;\n    jumpToRoomDetailPage: (roomUUID: string, periodicUUID: string) => void;\n    jumpToModifyOrdinaryRoomPage: (roomUUID: string, periodicUUID: string) => void;\n    jumpToModifyPeriodicRoomPage: () => void;\n}\n\nexport const PeriodicRoomPanel: React.FC<PeriodicRoomPanelProps> = ({\n    rooms,\n    userName,\n    inviteBaseUrl,\n    isCreator,\n    periodicInfo,\n    onCopyInvitation,\n    onCancelPeriodicRoom,\n    onCancelSubPeriodicRoom,\n    jumpToRoomDetailPage,\n    jumpToModifyPeriodicRoomPage,\n    jumpToModifyOrdinaryRoomPage,\n}) => {\n    const t = useTranslate();\n    const language = useLanguage();\n    const [cancelPeriodicRoomModalVisible, setCancelPeriodicRoomModalVisible] = useState(false);\n\n    const locale = useMemo(() => (language.startsWith(\"zh\") ? zhCN : enUS), [language]);\n    const yearMonthFormat = formatWithOptions({ locale }, \"yyyy/MM\");\n    const dayFormat = formatWithOptions({ locale }, \"dd\");\n    const timeSuffixFormat = format(\"HH:mm\");\n    const dayWeekFormat = formatWithOptions({ locale }, \"yyyy/MM/dd iii\");\n\n    const hasRunning = rooms.some(room =>\n        [RoomStatus.Started, RoomStatus.Paused].includes(room?.roomStatus as RoomStatus),\n    );\n\n    const defaultDate = new Date();\n\n    const renderPeriodicRoomTable = (): React.ReactNode => {\n        const polymerizationRooms = (() => {\n            const result: Record<string, RoomInfo[]> = {};\n\n            rooms.forEach(room => {\n                if (room?.beginTime) {\n                    const key = result[yearMonthFormat(room.beginTime)];\n\n                    if (key) {\n                        key.push(room);\n                    } else {\n                        result[yearMonthFormat(room.beginTime)] = [room];\n                    }\n                }\n            });\n\n            return result;\n        })();\n\n        const groupedList = Object.keys(polymerizationRooms)\n            .sort()\n            .map(key => (\n                <div key={key}>\n                    <div className=\"periodic-room-panel-month-value\">{key}</div>\n                    <div className=\"periodic-room-panel-table-line\" />\n                    <Table\n                        bordered={false}\n                        dataSource={polymerizationRooms[key]}\n                        pagination={false}\n                        rowKey=\"roomUUID\"\n                        showHeader={false}\n                    >\n                        <Table.Column\n                            align=\"left\"\n                            render={(_, room: RoomInfo) =>\n                                // TODO: i18n\n                                dayFormat(room.beginTime || defaultDate) + \"æ—¥\"\n                            }\n                        />\n                        <Table.Column\n                            align=\"center\"\n                            render={(_, room: RoomInfo) =>\n                                getWeekName(getDay(room.beginTime || defaultDate), language)\n                            }\n                        />\n                        <Table.Column\n                            align=\"center\"\n                            render={(_, room: RoomInfo) => {\n                                return (\n                                    timeSuffixFormat(room.beginTime || defaultDate) +\n                                    \"~\" +\n                                    timeSuffixFormat(room.endTime || defaultDate)\n                                );\n                            }}\n                        />\n                        <Table.Column\n                            align=\"center\"\n                            render={(_, room: RoomInfo) => {\n                                return <RoomStatusElement room={room} />;\n                            }}\n                        />\n                        <Table.Column\n                            align=\"right\"\n                            render={(_, room: RoomInfo) => {\n                                return (\n                                    <MoreMenu\n                                        inviteBaseUrl={inviteBaseUrl}\n                                        isCreator={isCreator}\n                                        jumpToModifyOrdinaryRoomPage={() =>\n                                            jumpToModifyOrdinaryRoomPage(\n                                                room.roomUUID,\n                                                room.periodicUUID!,\n                                            )\n                                        }\n                                        jumpToRoomDetailPage={() =>\n                                            jumpToRoomDetailPage(room.roomUUID, room.periodicUUID!)\n                                        }\n                                        room={room}\n                                        userName={userName}\n                                        onCancelSubPeriodicRoom={() =>\n                                            onCancelSubPeriodicRoom(\n                                                room.roomUUID,\n                                                room.periodicUUID!,\n                                            )\n                                        }\n                                        onCopyInvitation={onCopyInvitation}\n                                    />\n                                );\n                            }}\n                        />\n                    </Table>\n                </div>\n            ));\n        return <div className=\"periodic-room-panel-table-container\">{groupedList}</div>;\n    };\n\n    return (\n        <>\n            <div className=\"periodic-room-panel-container\">\n                <div className=\"periodic-room-panel-tips\">\n                    <div className=\"periodic-room-panel-tips-title\">\n                        {t(\"repeat-frequency\", {\n                            week: getWeekNames(periodicInfo.weeks, language),\n                        })}\n                    </div>\n                    <div className=\"periodic-room-panel-tips-type\">\n                        {t(\"schedule-room-type\", {\n                            type: t(`class-room-type.${periodicInfo.roomType}`),\n                        })}\n                    </div>\n                    <div className=\"periodic-room-panel-tips-inner\">\n                        {t(\"schedule-room-detail\", {\n                            time: dayWeekFormat(periodicInfo.endTime),\n                            length: rooms.length,\n                        })}\n                    </div>\n                </div>\n                <div className=\"periodic-room-panel-btn-list\">\n                    {isCreator ? (\n                        <>\n                            <Button disabled={hasRunning} onClick={jumpToModifyPeriodicRoomPage}>\n                                {t(\"modify-periodic-rooms\")}\n                            </Button>\n                            <Button\n                                danger\n                                disabled={hasRunning}\n                                onClick={() => setCancelPeriodicRoomModalVisible(true)}\n                            >\n                                {t(\"cancel-of-periodic-rooms\")}\n                            </Button>\n                        </>\n                    ) : (\n                        <Button danger onClick={() => setCancelPeriodicRoomModalVisible(true)}>\n                            {t(\"remove-periodic-room\")}\n                        </Button>\n                    )}\n                </div>\n                {renderPeriodicRoomTable()}\n            </div>\n            <CancelPeriodicRoomModal\n                isCreator={isCreator}\n                visible={cancelPeriodicRoomModalVisible}\n                onCancel={() => setCancelPeriodicRoomModalVisible(false)}\n                onCancelPeriodicRoom={onCancelPeriodicRoom}\n            />\n        </>\n    );\n};\n","import \"./style.less\";\n\nimport { message } from \"antd\";\nimport { observer } from \"mobx-react-lite\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useLastLocation } from \"react-router-last-location\";\nimport { LoadingPage, PeriodicRoomPanel, errorTips } from \"flat-components\";\nimport { useTranslate } from \"@netless/flat-i18n\";\nimport { PageStoreContext, RoomStoreContext } from \"../components/StoreProvider\";\nimport { globalStore } from \"@netless/flat-stores\";\nimport { RouteNameType, RouteParams, usePushHistory } from \"../utils/routes\";\nimport { cancelPeriodicRoom, cancelPeriodicSubRoom } from \"@netless/flat-server-api\";\nimport { useLoginCheck } from \"../utils/use-login-check\";\nimport { FLAT_WEB_BASE_URL } from \"../constants/process\";\n\nexport const PeriodicRoomDetailPage = observer<{}>(function PeriodicRoomDetailPage() {\n    useLoginCheck();\n    const t = useTranslate();\n\n    const params = useParams<RouteParams<RouteNameType.PeriodicRoomDetailPage>>();\n    const roomStore = useContext(RoomStoreContext);\n    const [cancelRoomUUIDList, setCancelRoomUUIDList] = useState<string[]>([]);\n    const history = useHistory();\n    const pushHistory = usePushHistory();\n    const previousPage = useLastLocation();\n    const pageStore = useContext(PageStoreContext);\n\n    useEffect(() => {\n        // if the room has been cancelled and return to the previous page, an error will be reported\n        function backPreviousPage(): void {\n            if (!previousPage?.pathname) {\n                return pushHistory(RouteNameType.HomePage);\n            }\n\n            const previousRouterContainRemoveRoomUUID = cancelRoomUUIDList.some(roomUUID => {\n                return previousPage.pathname.includes(roomUUID);\n            });\n\n            if (previousRouterContainRemoveRoomUUID) {\n                return pushHistory(RouteNameType.HomePage);\n            }\n\n            history.goBack();\n        }\n\n        const title = periodicInfo?.periodic.title;\n\n        pageStore.configure({\n            title: <h1 className=\"periodic-room-detail-page-header-title\">{title}</h1>,\n            onBackPreviousPage: backPreviousPage,\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const { periodicUUID } = params;\n\n    const periodicInfo = roomStore.periodicRooms.get(periodicUUID);\n    const rooms = periodicInfo?.rooms\n        .filter(roomUUID => !cancelRoomUUIDList.includes(roomUUID))\n        .map(roomUUID => roomStore.rooms.get(roomUUID));\n\n    useEffect(() => {\n        roomStore.syncPeriodicRoomInfo(periodicUUID).catch(errorTips);\n    }, [periodicUUID, roomStore]);\n\n    if (!periodicInfo || !rooms) {\n        return <LoadingPage timeMS={3 * 1000} />;\n    }\n\n    const { ownerUUID, ownerName } = periodicInfo.periodic;\n\n    const isCreator = globalStore.userUUID === ownerUUID;\n\n    const onCancelSubPeriodicRoom = async (\n        roomUUID: string,\n        periodicUUID: string,\n    ): Promise<void> => {\n        if (roomUUID) {\n            try {\n                await cancelPeriodicSubRoom({ roomUUID, periodicUUID });\n\n                const nextList = [...cancelRoomUUIDList, roomUUID];\n                const nextRooms = rooms.filter(room => {\n                    return room && !nextList.includes(room.roomUUID);\n                });\n\n                void message.success(t(\"the-room-has-been-cancelled\"));\n\n                if (nextRooms.length === 0) {\n                    pushHistory(RouteNameType.HomePage);\n                } else {\n                    setCancelRoomUUIDList(nextList);\n                }\n            } catch (err) {\n                console.log(err);\n                errorTips(err);\n            }\n        }\n    };\n\n    async function onCancelPeriodicRoom(): Promise<void> {\n        try {\n            if (periodicInfo) {\n                await cancelPeriodicRoom(periodicUUID);\n            }\n        } catch (err) {\n            errorTips(err);\n        }\n\n        pushHistory(RouteNameType.HomePage);\n        await message.success(t(\"the-room-has-been-cancelled\"));\n    }\n\n    function jumpToRoomDetailPage(roomUUID: string, periodicUUID: string): void {\n        pushHistory(RouteNameType.RoomDetailPage, {\n            periodicUUID,\n            roomUUID,\n        });\n    }\n\n    function jumpToModifyOrdinaryRoomPage(roomUUID: string, periodicUUID: string): void {\n        pushHistory(RouteNameType.ModifyOrdinaryRoomPage, {\n            periodicUUID,\n            roomUUID,\n        });\n    }\n\n    function jumpToModifyPeriodicRoomPage(): void {\n        if (periodicInfo) {\n            pushHistory(RouteNameType.ModifyPeriodicRoomPage, {\n                periodicUUID,\n            });\n        }\n    }\n\n    return (\n        <div className=\"periodic-room-detail-page-container\">\n            <PeriodicRoomPanel\n                inviteBaseUrl={FLAT_WEB_BASE_URL}\n                isCreator={isCreator}\n                jumpToModifyOrdinaryRoomPage={jumpToModifyOrdinaryRoomPage}\n                jumpToModifyPeriodicRoomPage={jumpToModifyPeriodicRoomPage}\n                jumpToRoomDetailPage={jumpToRoomDetailPage}\n                periodicInfo={periodicInfo.periodic}\n                rooms={rooms}\n                userName={ownerName}\n                onCancelPeriodicRoom={onCancelPeriodicRoom}\n                onCancelSubPeriodicRoom={onCancelSubPeriodicRoom}\n                onCopyInvitation={text => navigator.clipboard.writeText(text)}\n            />\n        </div>\n    );\n});\n\nexport default PeriodicRoomDetailPage;\n"],"names":["formatWithOptions","convertToFP","fn","moreMenuSVG","CancelSubPeriodicRoomModal","visible","isCreator","onCancel","onCancelSubPeriodicRoom","t","useTranslate","Modal","_jsxDEV","Button","_jsxFileName","MoreMenu","room","userName","inviteBaseUrl","onCopyInvitation","jumpToRoomDetailPage","jumpToModifyOrdinaryRoomPage","cancelSubPeriodicRoomVisible","setCancelSubPeriodicRoomVisible","useState","inviteRoomVisible","setInviteRoomVisible","_Fragment","Dropdown","Menu","key","label","onClick","InviteModal","text","message","success","CancelPeriodicRoomModal","onCancelPeriodicRoom","title","content","PeriodicRoomPanel","rooms","periodicInfo","jumpToModifyPeriodicRoomPage","language","useLanguage","cancelPeriodicRoomModalVisible","setCancelPeriodicRoomModalVisible","locale","useMemo","startsWith","zhCN","enUS","yearMonthFormat","dayFormat","timeSuffixFormat","format","dayWeekFormat","hasRunning","some","RoomStatus","Started","Paused","includes","roomStatus","defaultDate","Date","renderPeriodicRoomTable","polymerizationRooms","result","forEach","beginTime","push","groupedList","Object","keys","sort","map","Table","_","getWeekName","getDay","endTime","RoomStatusElement","roomUUID","periodicUUID","week","getWeekNames","weeks","type","roomType","time","length","PeriodicRoomDetailPage","observer","useLoginCheck","params","useParams","roomStore","useContext","RoomStoreContext","cancelRoomUUIDList","setCancelRoomUUIDList","history","useHistory","pushHistory","usePushHistory","previousPage","useLastLocation","pageStore","PageStoreContext","useEffect","backPreviousPage","pathname","RouteNameType","HomePage","goBack","periodic","configure","onBackPreviousPage","periodicRooms","get","filter","syncPeriodicRoomInfo","catch","errorTips","LoadingPage","ownerUUID","ownerName","globalStore","userUUID","cancelPeriodicSubRoom","nextList","nextRooms","err","console","log","cancelPeriodicRoom","RoomDetailPage","ModifyOrdinaryRoomPage","ModifyPeriodicRoomPage","FLAT_WEB_BASE_URL","navigator","clipboard","writeText"],"mappings":"0hBAGA,MAAAA,EAAeC,GAAYC,EAAI,CAAC,ECHhCC,GAAe,qYCWR,MAAMC,GAAwE,CAAC,CAClFC,QAAAA,EACAC,UAAAA,EACAC,SAAAA,EACAC,wBAAAA,CAJkF,IAKhF,CACF,MAAMC,EAAIC,IACV,SACKC,EAAD,CACI,OAAQ,CACJC,EAACC,EAAD,CAAqB,QAASN,EAA9B,SACiBE,EAAZH,EAAc,cAAmB,QAApB,CAAmB,EADzB,SAAZ,GAAA,CAAA,SAAAQ,EAAA,WAAA,GAAA,aAAA,EADI,EAAA,MAAA,EAIJF,EAACC,EAAD,CAAiB,KAAK,UAAU,QAASL,EAAzC,SACKC,EAAE,SAAD,CAAA,EADM,KAAZ,GAAA,CAAA,SAAAK,EAAA,WAAA,GAAA,aAAA,EAAA,EAAA,MAAA,CAJI,EAQR,KAAMT,EACN,MAAOI,EAAE,aAAD,EACR,SAAAF,EAXJ,WAaI,OAAA,CAAA,SAAOE,EAAE,+BAAD,CAAA,EAAR,OAAA,GAAA,CAAA,SAAAK,EAAA,WAAA,GAAA,aAAA,IAAA,MAAA,CAAA,EAbJ,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,GAAA,aAAA,CAAA,EADJ,MAAA,CAiBH,4GCfM,MAAMC,GAAoC,CAAC,CAC9CC,KAAAA,EACAC,SAAAA,EACAC,cAAAA,EACAZ,UAAAA,EACAa,iBAAAA,EACAX,wBAAAA,EACAY,qBAAAA,EACAC,6BAAAA,CAR8C,IAS5C,CACF,MAAMZ,EAAIC,IACJ,CAACY,EAA8BC,CAA/B,EAAkEC,mBAAS,EAAD,EAC1E,CAACC,EAAmBC,CAApB,EAA4CF,mBAAS,EAAD,EAE1D,SACIG,EAAA,CAAA,SAAA,CACIf,EAACgB,EAAD,CACI,QAAS,MAEAC,EAAD,CACI,MAAO,CACH,CACIC,IAAK,cACLC,MAAOtB,EAAE,aAAD,EACRuB,QAASZ,CAAAA,EAEb,GAAId,EACE,CACI,CACIwB,IAAK,cACLC,MAAOtB,EAAE,aAAD,EACRuB,QAASX,CAAAA,EAEb,CACIS,IAAK,cACLC,MAAOtB,EAAE,aAAD,EACRuB,QAAS,IAAMT,EAAgC,EAAD,CATtD,CAAA,EAYA,CAAA,EACN,CACIO,IAAK,aACLC,MAAOtB,EAAE,YAAD,EACRuB,QAAS,IAAMN,EAAqB,EAAD,CAAA,CAvBpC,CAAA,EADX,OAAA,GAAA,CAAA,SAAAZ,EAAA,WAAA,GAAA,aAAA,EAAA,EADJ,MAAA,EA+BJ,QAAS,CAAC,OAAD,EAjCb,WAmCI,MAAA,CAAK,IAAKL,EAAE,MAAD,EAAU,IAAKN,EAAAA,EAA1B,OAAA,GAAA,CAAA,SAAAW,EAAA,WAAA,GAAA,aAAA,IAAA,MAAA,CAAA,EAnCJ,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,GAAA,aAAA,EADJ,EAAA,MAAA,EAsCIF,EAACR,GAAD,CACI,UAAAE,EACA,QAASgB,EACT,SAAU,IAAMC,EAAgC,EAAD,EAC/C,wBAAAf,CAAA,EAJJ,OAAA,GAAA,CAAA,SAAAM,EAAA,WAAA,GAAA,aAAA,EAtCJ,EAAA,MAAA,EA4CIF,EAACqB,GAAD,CACI,QAASf,EACT,KAAAF,EACA,SAAAC,EACA,QAASQ,EACT,SAAU,IAAMC,EAAqB,EAAD,EACpC,OAAgBQ,GAAA,CACZf,EAAiBe,CAAD,EACXC,EAAQC,QAAQ3B,EAAE,cAAD,CAAjB,EACLiB,EAAqB,EAAD,CACvB,CAAA,EAVL,OAAA,GAAA,CAAA,SAAAZ,EAAA,WAAA,GAAA,aAAA,EAAA,EA5CJ,MAAA,CAAA,CAAA,EADJ,OAAA,EAAA,CA2DH,2HClFM,MAAMuB,GAAkE,CAAC,CAC5EhC,QAAAA,EACAC,UAAAA,EACAC,SAAAA,EACA+B,qBAAAA,CAJ4E,IAK1E,CACF,MAAM7B,EAAIC,IACJ6B,GAAS,IAKJ9B,EAJFH,EAII,2BAHI,aAGL,KAGNkC,EAAU,IACPlC,IAIE,OAAA,CAAA,SAAOG,EAAE,2BAAD,CAAA,EAAR,OAAA,GAAA,CAAA,SAAAK,EAAA,WAAA,GAAA,aAAA,EAAA,EAAP,MAAA,IAHW,OAAA,CAAA,SAAOL,EAAE,qCAAD,CAAA,EAAR,OAAA,GAAA,CAAA,SAAAK,EAAA,WAAA,GAAA,aAAA,EAAA,EAAP,MAAA,EAMR,SACKH,EAAD,CACI,OAAQ,CACJC,EAACC,EAAD,CAAqB,QAASN,EAA9B,SACiBE,EAAZH,EAAc,cAAmB,QAApB,CAAmB,EADzB,SAAZ,GAAA,CAAA,SAAAQ,EAAA,WAAA,GAAA,aAAA,EADI,EAAA,MAAA,EAIJF,EAACC,EAAD,CAAiB,KAAK,UAAU,QAASyB,EAAzC,SACK7B,EAAE,SAAD,CAAA,EADM,KAAZ,GAAA,CAAA,SAAAK,EAAA,WAAA,GAAA,aAAA,EAAA,EAAA,MAAA,CAJI,EAQR,KAAMT,EACN,MAAAkC,EACA,SAAAhC,EAXJ,SAaKiC,EAAO,CAAA,EAbZ,OAAA,GAAA,CAAA,SAAA1B,EAAA,WAAA,GAAA,aAAA,CAAA,EADJ,MAAA,CAiBH,yGCnBM,MAAM2B,GAAsD,CAAC,CAChEC,MAAAA,EACAzB,SAAAA,EACAC,cAAAA,EACAZ,UAAAA,EACAqC,aAAAA,EACAxB,iBAAAA,EACAmB,qBAAAA,EACA9B,wBAAAA,EACAY,qBAAAA,EACAwB,6BAAAA,EACAvB,6BAAAA,CAXgE,IAY9D,CACF,MAAMZ,EAAIC,IACJmC,EAAWC,IACX,CAACC,EAAgCC,CAAjC,EAAsExB,mBAAS,EAAD,EAE9EyB,EAASC,EAAAA,QAAAA,QAAQ,IAAOL,EAASM,WAAW,IAApB,EAA4BC,EAAOC,EAAO,CAACR,CAAD,CAAlD,EAChBS,EAAkBtD,EAAkB,CAAEiD,OAAAA,GAAU,SAAb,EACnCM,EAAYvD,EAAkB,CAAEiD,OAAAA,GAAU,IAAb,EAC7BO,EAAmBC,GAAO,OAAD,EACzBC,EAAgB1D,EAAkB,CAAEiD,OAAAA,GAAU,gBAAb,EAEjCU,EAAajB,EAAMkB,KAAK5C,GAC1B,CAAC6C,EAAWC,QAASD,EAAWE,MAAhC,EAAwCC,SAAShD,GAAAA,YAAAA,EAAMiD,UAAvD,CADe,EAIbC,EAAc,IAAIC,KAElBC,EAA0B,IAAuB,CACnD,MAAMC,GAAuB,IAAM,CAC/B,MAAMC,EAAqC,CAAA,EAE3C5B,OAAAA,EAAM6B,QAAgBvD,GAAA,CAClB,GAAIA,GAAAA,MAAAA,EAAMwD,UAAW,CACjB,MAAM1C,EAAMwC,EAAOhB,EAAgBtC,EAAKwD,SAAN,GAE9B1C,EACAA,EAAI2C,KAAKzD,CAAT,EAEAsD,EAAOhB,EAAgBtC,EAAKwD,SAAN,GAAoB,CAACxD,CAAD,CAEjD,CAAA,CATL,EAYOsD,CAAAA,KAGLI,EAAcC,OAAOC,KAAKP,CAAZ,EACfQ,KACAC,EAAAA,IACGhD,GAAAlB,EAAA,MAAA,CAAA,SACI,CAAAA,EAAA,MAAA,CAAK,UAAU,kCAAf,SAAkDkB,CAAAA,EAAlD,OAAA,GAAA,CAAA,SAAAhB,EAAA,WAAA,GAAA,aAAA,EAAA,EAAA,MAAA,EACAF,EAAA,MAAA,CAAK,UAAU,gCAAA,EAAf,OAAA,GAAA,CAAA,SAAAE,EAAA,WAAA,GAAA,aAAA,EAFJ,EAAA,MAAA,EAGIF,EAACmE,EAAD,CACI,SAAU,GACV,WAAYV,EAAoBvC,GAChC,WAAY,GACZ,OAAO,WACP,WAAY,GALhB,SAOI,CAAClB,EAAAmE,EAAM,OAAP,CACI,MAAM,OACN,OAAQ,CAACC,EAAGhE,IAERuC,EAAUvC,EAAKwD,WAAaN,CAAnB,EAAkC,QAAA,EAJnD,OAAA,GAAA,CAAA,SAAApD,EAAA,WAAA,GAAA,aAAA,EAAA,EAAA,MAAA,EAOAF,EAACmE,EAAM,OAAP,CACI,MAAM,SACN,OAAQ,CAACC,EAAGhE,IACRiE,EAAYC,EAAOlE,EAAKwD,WAAaN,CAAnB,EAAiCrB,CAAxC,CAAA,EAHnB,OAAA,GAAA,CAAA,SAAA/B,EAAA,WAAA,IAAA,aAAA,EAAA,EAAA,MAAA,EAMAF,EAACmE,EAAM,OAAP,CACI,MAAM,SACN,OAAQ,CAACC,EAAGhE,IAEJwC,EAAiBxC,EAAKwD,WAAaN,CAAnB,EAChB,IACAV,EAAiBxC,EAAKmE,SAAWjB,CAAjB,CAEvB,EARL,OAAA,GAAA,CAAA,SAAApD,EAAA,WAAA,IAAA,aAAA,EAAA,EAAA,MAAA,EAUAF,EAACmE,EAAM,OAAP,CACI,MAAM,SACN,OAAQ,CAACC,EAAGhE,MACAoE,GAAD,CAAmB,KAAApE,CAAA,EAAnB,OAAA,GAAA,CAAA,SAAAF,EAAA,WAAA,IAAA,aAAA,EAAA,EAAP,MAAA,CACH,EAJL,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,IAAA,aAAA,EAAA,EAAA,MAAA,EAMAF,EAACmE,EAAM,OAAP,CACI,MAAM,QACN,OAAQ,CAACC,EAAGhE,MAEHD,GAAD,CACI,cAAAG,EACA,UAAAZ,EACA,6BAA8B,IAC1Be,EACIL,EAAKqE,SACLrE,EAAKsE,YAFmB,EAKhC,qBAAsB,IAClBlE,EAAqBJ,EAAKqE,SAAUrE,EAAKsE,YAArB,EAExB,KAAAtE,EACA,SAAAC,EACA,wBAAyB,IACrBT,EACIQ,EAAKqE,SACLrE,EAAKsE,YAFc,EAK3B,iBAAAnE,CAAA,EApBJ,OAAA,GAAA,CAAA,SAAAL,EAAA,WAAA,IAAA,aAAA,EAAA,EADJ,MAAA,CAwBH,EA3BL,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,IAAA,aAAA,EAAA,EApCJ,MAAA,CAAA,CAAA,EAAA,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,GAAA,aAAA,EAAA,EAHJ,MAAA,CAAA,CAAA,EAAUgB,EAAV,GAAA,CAAA,SAAAhB,EAAA,WAAA,GAAA,aAAA,EAAA,EAAA,MAAA,CAHY,EA0EpB,SAAO,MAAA,CAAK,UAAU,sCAAf,SAAsD4D,CAAAA,EAAtD,OAAA,GAAA,CAAA,SAAA5D,EAAA,WAAA,IAAA,aAAA,EAAA,EAAP,MAAA,CAAA,EAGJ,SACIa,EAAA,CAAA,SACI,CAAAf,EAAA,MAAA,CAAK,UAAU,gCAAf,SACI,CAAAA,EAAA,MAAA,CAAK,UAAU,2BAAf,SACI,CAAAA,EAAA,MAAA,CAAK,UAAU,iCAAf,SACKH,EAAE,mBAAoB,CACnB8E,KAAMC,EAAa7C,EAAa8C,MAAO5C,CAArB,CAAA,CADpB,CAAA,EADN,OAAA,GAAA,CAAA,SAAA/B,EAAA,WAAA,IAAA,aAAA,EAAA,EAAA,MAAA,EAKAF,EAAA,MAAA,CAAK,UAAU,gCAAf,SACKH,EAAE,qBAAsB,CACrBiF,KAAMjF,EAAG,mBAAkBkC,EAAagD,UAAjC,CAAA,CADT,CAAA,EADN,OAAA,GAAA,CAAA,SAAA7E,EAAA,WAAA,IAAA,aAAA,EAAA,EAAA,MAAA,EAKAF,EAAA,MAAA,CAAK,UAAU,iCAAf,SACKH,EAAE,uBAAwB,CACvBmF,KAAMlC,EAAcf,EAAawC,OAAd,EACnBU,OAAQnD,EAAMmD,MAAAA,CAFhB,CAAA,EADN,OAAA,GAAA,CAAA,SAAA/E,EAAA,WAAA,IAAA,aAAA,EAAA,EAXJ,MAAA,CAAA,CAAA,EAAA,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,IAAA,aAAA,EAAA,EAAA,MAAA,EAkBAF,EAAA,MAAA,CAAK,UAAU,+BAAf,SACKN,EACGM,EAAAe,EAAA,CAAA,SAAA,CACIf,EAACC,EAAD,CAAQ,SAAU8C,EAAY,QAASf,EAAvC,SACKnC,EAAE,uBAAD,CAAA,EADN,OAAA,GAAA,CAAA,SAAAK,EAAA,WAAA,IAAA,aAAA,EADJ,EAAA,MAAA,EAIIF,EAACC,EAAD,CACI,OADJ,GAEI,SAAU8C,EACV,QAAS,IAAMX,EAAkC,EAAD,EAHpD,SAKKvC,EAAE,0BAAD,CAAA,EALN,OAAA,GAAA,CAAA,SAAAK,EAAA,WAAA,IAAA,aAAA,EAAA,EAJJ,MAAA,CAAA,CADM,EAAA,OAAA,EAAA,IAcLD,EAAD,CAAQ,OAAR,GAAe,QAAS,IAAMmC,EAAkC,EAAD,EAA/D,SACKvC,EAAE,sBAAD,CAAA,EADN,OAAA,GAAA,CAAA,SAAAK,EAAA,WAAA,IAAA,aAAA,IAAA,MAAA,CAAA,EAfR,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,IAAA,aAAA,EAAA,EAnBJ,MAAA,EAuCKsD,GAvCL,CAAA,EAAA,OAAA,GAAA,CAAA,SAAAtD,EAAA,WAAA,IAAA,aAAA,EADJ,EAAA,MAAA,EA0CIF,EAACyB,GAAD,CACI,UAAA/B,EACA,QAASyC,EACT,SAAU,IAAMC,EAAkC,EAAD,EACjD,qBAAAV,CAAA,EAJJ,OAAA,GAAA,CAAA,SAAAxB,EAAA,WAAA,IAAA,aAAA,EAAA,EA1CJ,MAAA,CAAA,CAAA,EADJ,OAAA,EAAA,CAmDH,+FChMYgF,MAAAA,GAAyBC,GAAa,UAAkC,CACpEC,KACb,MAAMvF,EAAIC,IAEJuF,EAASC,KACTC,EAAYC,qBAAWC,EAAD,EACtB,CAACC,EAAoBC,CAArB,EAA8C/E,EAAAA,QAAAA,SAAmB,CAAX,CAAA,EACtDgF,EAAUC,KACVC,EAAcC,KACdC,EAAeC,GAAAA,QAAAA,kBACfC,EAAYV,qBAAWW,EAAD,EAE5BC,EAAAA,QAAAA,UAAU,IAAM,CAEZ,SAASC,GAAyB,CAC1B,GAAA,EAACL,GAAAA,MAAAA,EAAcM,UACRR,OAAAA,EAAYS,EAAcC,QAAf,EAOtB,GAJ4Cd,EAAmB1C,KAAiByB,GACrEuB,EAAaM,SAASlD,SAASqB,CAA/B,CADiC,EAKjCqB,OAAAA,EAAYS,EAAcC,QAAf,EAGtBZ,EAAQa,OAAR,CACH,CAEK9E,MAAAA,EAAQI,GAAAA,YAAAA,EAAc2E,SAAS/E,MAErCuE,EAAUS,UAAU,CAChBhF,QAAO,KAAA,CAAI,UAAU,yCAAd,SAAwDA,CAAAA,EAAxD,OAAA,GAAA,CAAA,SAAAzB,EAAA,WAAA,GAAA,aAAA,IADS,IAAA,EAEhB0G,mBAAoBP,CAAAA,CAFxB,CAKH,EAAE,CAzBM,CAAA,EA2BH,KAAA,CAAE3B,aAAAA,CAAiBW,EAAAA,EAEnBtD,EAAewD,EAAUsB,cAAcC,IAAIpC,CAA5B,EACf5C,EAAQC,GAAAA,YAAAA,EAAcD,MACvBiF,OAAOtC,GAAY,CAACiB,EAAmBtC,SAASqB,CAA5B,GACpBP,IAAIO,GAAYc,EAAUzD,MAAMgF,IAAIrC,CAApB,GAMjB,GAJJ2B,EAAAA,QAAAA,UAAU,IAAM,CACZb,EAAUyB,qBAAqBtC,CAA/B,EAA6CuC,MAAMC,CAAnD,CAAA,EACD,CAACxC,EAAca,CAAf,CAFM,EAIL,CAACxD,GAAgB,CAACD,EAClB,SAAQqF,GAAD,CAAa,OAAQ,EAAI,GAAA,EAAzB,OAAA,GAAA,CAAA,SAAAjH,EAAA,WAAA,GAAA,aAAA,IAAP,IAAA,EAGE,KAAA,CAAEkH,UAAAA,EAAWC,UAAAA,CAAAA,EAActF,EAAa2E,SAExChH,EAAY4H,GAAYC,WAAaH,EAErCxH,EAA0B,MAC5B6E,EACAC,IACgB,CAChB,GAAID,EACI,GAAA,CACA,MAAM+C,GAAsB,CAAE/C,SAAAA,EAAUC,aAAAA,CAAAA,CAAb,EAE3B,MAAM+C,EAAW,CAAC,GAAG/B,EAAoBjB,CAAxB,EACXiD,EAAY5F,EAAMiF,OAAe3G,GAC5BA,GAAQ,CAACqH,EAASrE,SAAShD,EAAKqE,QAAvB,CADF,EAIblD,EAAQC,QAAQ3B,EAAE,6BAAD,CAAjB,EAED6H,EAAUzC,SAAW,EACrBa,EAAYS,EAAcC,QAAf,EAEXb,EAAsB8B,CAAD,QAEpBE,GACLC,QAAQC,IAAIF,CAAZ,EACAT,EAAUS,CAAD,CACZ,CACJ,EAGL,eAAejG,GAAsC,CAC7C,GAAA,CACIK,GACA,MAAM+F,GAAmBpD,CAAD,QAEvBiD,GACLT,EAAUS,CAAD,CACZ,CAED7B,EAAYS,EAAcC,QAAf,EACX,MAAMjF,EAAQC,QAAQ3B,EAAE,6BAAD,CAAjB,CACT,CAEQW,SAAAA,EAAqBiE,EAAkBC,EAA4B,CACxEoB,EAAYS,EAAcwB,eAAgB,CACtCrD,aAAAA,EACAD,SAAAA,CAAAA,CAFO,CAId,CAEQhE,SAAAA,EAA6BgE,EAAkBC,EAA4B,CAChFoB,EAAYS,EAAcyB,uBAAwB,CAC9CtD,aAAAA,EACAD,SAAAA,CAAAA,CAFO,CAId,CAED,SAASzC,GAAqC,CACtCD,GACA+D,EAAYS,EAAc0B,uBAAwB,CAC9CvD,aAAAA,CAAAA,CADO,CAIlB,CAED,SACI,MAAA,CAAK,UAAU,sCAAf,WACK7C,GAAD,CACI,cAAeqG,GACf,UAAAxI,EACA,6BAAAe,EACA,6BAAAuB,EACA,qBAAAxB,EACA,aAAcuB,EAAa2E,SAC3B,MAAA5E,EACA,SAAUuF,EACV,qBAAA3F,EACA,wBAAA9B,EACA,iBAAkB0B,GAAQ6G,UAAUC,UAAUC,UAAU/G,CAA9B,CAAA,EAX9B,OAAA,GAAA,CAAA,SAAApB,EAAA,WAAA,IAAA,aAAA,IAAA,IAAA,CAAA,EADJ,OAAA,GAAA,CAAA,SAAAA,EAAA,WAAA,IAAA,aAAA,GADJ,IAAA,CAiBH,CAzI6C"}