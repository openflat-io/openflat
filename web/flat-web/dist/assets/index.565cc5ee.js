import{bb as p,l as s,bp as h,dd as k,q as a,cH as N,de as B,b5 as P,df as w,dg as L,cG as M}from"./index.2c6da8be.js";import{u as V}from"./use-login-check.f8f50fa4.js";import{e as f}from"./routes.b857aab2.js";import{E as x}from"./index.c5630167.js";import{u as v}from"./lifecycle.f2fa1867.js";var y="/Users/honey/GithubRep/flat/packages/flat-pages/src/ModifyOrdinaryRoomPage/OrdinaryRoomForm.tsx";const j=p(function({roomUUID:o}){const[t,u]=s.exports.useState(!1),r=h(),n=v(),[m,c]=s.exports.useState();if(s.exports.useEffect(()=>{n(k(o)).then(({roomInfo:e})=>{c({title:e.title,type:e.roomType,beginTime:new Date(e.beginTime),endTime:new Date(e.endTime),isPeriodic:!1,region:e.region})}).catch(e=>{console.error(e),f(e),r.goBack()})},[o]),!m)return a(N,{},void 0,!1,{fileName:y,lineNumber:48,columnNumber:16},this);return a(x,{initialValues:m,loading:t,type:"ordinary",onSubmit:g},void 0,!1,{fileName:y,lineNumber:52,columnNumber:9},this);async function g(e){u(!0);try{await n(B({roomUUID:o,beginTime:e.beginTime.valueOf(),endTime:e.endTime.valueOf(),title:e.title,type:e.type})),P.success("\u4FEE\u6539\u6210\u529F"),r.goBack()}catch(d){console.error(d),f(d),u(!1)}}});var R="/Users/honey/GithubRep/flat/packages/flat-pages/src/ModifyOrdinaryRoomPage/PeriodicSubRoomForm.tsx";const G=p(function({roomUUID:o,periodicUUID:t}){const[u,r]=s.exports.useState(!1),n=h(),m=v(),[c,g]=s.exports.useState(),[e,d]=s.exports.useState(0),[S,O]=s.exports.useState(0);if(s.exports.useEffect(()=>{m(w({roomUUID:o,periodicUUID:t,needOtherRoomTimeInfo:!0})).then(({roomInfo:i,previousPeriodicRoomBeginTime:l,nextPeriodicRoomEndTime:E})=>{g({title:i.title,type:i.roomType,beginTime:new Date(i.beginTime),endTime:new Date(i.endTime),isPeriodic:!1,region:i.region}),d(l),O(E)}).catch(i=>{console.error(i),f(i),n.goBack()})},[o,t]),!c)return a(N,{},void 0,!1,{fileName:R,lineNumber:68,columnNumber:16},this);return a(x,{initialValues:c,loading:u,nextPeriodicRoomEndTime:S,previousPeriodicRoomBeginTime:e,type:"periodicSub",onSubmit:F},void 0,!1,{fileName:R,lineNumber:72,columnNumber:9},this);async function F(i){r(!0);try{await m(L({roomUUID:o,periodicUUID:t,beginTime:i.beginTime.valueOf(),endTime:i.endTime.valueOf()})),P.success("\u4FEE\u6539\u6210\u529F"),n.goBack()}catch(l){console.error(l),f(l),r(!1)}}});var T="/Users/honey/GithubRep/flat/packages/flat-pages/src/ModifyOrdinaryRoomPage/index.tsx";const D=p(function(){V();const{roomUUID:o,periodicUUID:t}=M();return t?a(G,{periodicUUID:t,roomUUID:o},void 0,!1,{fileName:T,lineNumber:20,columnNumber:20},this):a(j,{roomUUID:o},void 0,!1,{fileName:T,lineNumber:22,columnNumber:20},this)});export{D as ModifyOrdinaryRoomPage,D as default};
//# sourceMappingURL=index.565cc5ee.js.map
