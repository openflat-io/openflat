import{bb as T,a$ as S,l as u,be as B,bI as W,q as i,s as c,b5 as P}from"./index.003b8e05.js";import{w as y,u as E,S as A,a as M,W as V,E as G,R as L,m as b,b as j,N as F,T as O,c as Q,d as o,e as _,C as $,f as q,I as z,g as J,h as H,i as K,j as X,k as Y,l as Z}from"./ExtraPadding.782b77ab.js";import{T as h,a as v}from"./constants.e783e8a4.js";import{u as ee}from"./use-login-check.9050cee0.js";import"./index.d1f19cb3.js";import"./index.4ad1e849.js";import"./index.a792be8b.js";import"./routes.05c6fbf3.js";import"./style.30ee825b.js";import"./Skeleton.d2d1c46e.js";import"./Table.82ec6d73.js";import"./index.f0f03b6c.js";import"./CSSTransition.1c5cf112.js";import"./isEqual.5ca85d66.js";import"./lifecycle.d6023d27.js";import"./agora.e2ea78cc.js";import"./courseware-converting.9f6a3d8d.js";import"./debounce.3c601f71.js";import"./constants.1a2b4361.js";var a="/Users/honey/GithubRep/flat/packages/flat-pages/src/SmallClassPage/index.tsx";const Ue=y(T(function({classroomStore:e}){ee();const r=S(),m=e.whiteboardStore,t=u.exports.useContext(B),{confirm:p,...g}=E(e),[s,C]=u.exports.useState(!0);return u.exports.useEffect(()=>{e.isCreator&&e.roomStatus===W.Idle&&e.startClass()},[e]),i("div",{className:"small-class-page-container",children:i("div",{className:"small-class-realtime-container",children:i("div",{className:"small-class-realtime-box",children:[t?i(h,{left:N(),right:d(),showWindowsSystemBtn:t.showWindowsBtn,onClickWindowsSystemBtn:t.onClickWindowsSystemBtn,onDoubleClick:t.clickWindowMaximize},void 0,!1,{fileName:a,lineNumber:69,columnNumber:29},this):i(h,{left:N(),right:d()},void 0,!1,{fileName:a,lineNumber:78,columnNumber:29},this),U(),i("div",{className:"small-class-realtime-content",children:[i("div",{className:"small-class-realtime-content-container",children:[i(A,{classroomStore:e},void 0,!1,{fileName:a,lineNumber:83,columnNumber:33},this),i(M,{classroomStore:e,handleOk:()=>e.toggleShareScreen(!0)},void 0,!1,{fileName:a,lineNumber:84,columnNumber:33},this),i(V,{classRoomStore:e,whiteboardStore:m},void 0,!1,{fileName:a,lineNumber:88,columnNumber:33},this)]},void 0,!0,{fileName:a,lineNumber:82,columnNumber:29},this),R()]},void 0,!0,{fileName:a,lineNumber:81,columnNumber:25},this),i(G,{isCreator:e.isCreator,...g},void 0,!1,{fileName:a,lineNumber:95,columnNumber:25},this),i(L,{isCreator:e.isCreator,isRemoteLogin:e.isRemoteLogin,roomStatus:e.roomStatus},void 0,!1,{fileName:a,lineNumber:99,columnNumber:25},this)]},void 0,!0,{fileName:a,lineNumber:67,columnNumber:21},this)},void 0,!1,{fileName:a,lineNumber:66,columnNumber:17},this)},void 0,!1,{fileName:a,lineNumber:65,columnNumber:13},this);function U(){return i("div",{className:"small-class-realtime-avatars-wrap",children:e.isJoinedRTC&&i("div",{className:"small-class-realtime-avatars",children:[i(b,{avatarUser:e.users.creator,isAvatarUserCreator:!0,isCreator:e.isCreator,rtcAvatar:e.users.creator&&e.rtc.getAvatar(e.users.creator.rtcUID),small:!0,updateDeviceState:e.updateDeviceState,userUUID:e.userUUID},void 0,!1,{fileName:a,lineNumber:114,columnNumber:29},this),e.onStageUserUUIDs.map(x)]},void 0,!0,{fileName:a,lineNumber:113,columnNumber:25},this)},void 0,!1,{fileName:a,lineNumber:111,columnNumber:17},this)}function N(){var l,n;return i(c,{children:[i(j,{},void 0,!1,{fileName:a,lineNumber:138,columnNumber:21},this),i(F,{networkQuality:e.networkQuality},void 0,!1,{fileName:a,lineNumber:139,columnNumber:21},this),e.isCreator?((l=e.roomInfo)==null?void 0:l.beginTime)&&i(O,{beginTime:e.roomInfo.beginTime,roomStatus:e.roomStatus},void 0,!1,{fileName:a,lineNumber:142,columnNumber:29},this):i(Q,{roomStatus:e.roomStatus,roomType:(n=e.roomInfo)==null?void 0:n.roomType},void 0,!1,{fileName:a,lineNumber:148,columnNumber:25},this)]},void 0,!0)}function d(){return i(c,{children:[m.isWritable&&!e.isRemoteScreenSharing&&i(o,{icon:i(_,{active:e.isScreenSharing},void 0,!1,{fileName:a,lineNumber:191,columnNumber:35},this),title:r("share-screen.self"),onClick:()=>{window.isElectron?e.isScreenSharing?e.toggleShareScreen(!1):e.toggleShareScreenPicker(!0):e.toggleShareScreen()}},void 0,!1,{fileName:a,lineNumber:190,columnNumber:25},this),e.isCreator&&i($,{isRecording:e.isRecording,loading:e.isRecordingLoading,onClick:()=>{e.toggleRecording({onStop(){P.success(r("recording-completed-tips"))}})}},void 0,!1,{fileName:a,lineNumber:208,columnNumber:25},this),i(q,{classroom:e},void 0,!1,{fileName:a,lineNumber:220,columnNumber:21},this),i(z,{roomInfo:e.roomInfo},void 0,!1,{fileName:a,lineNumber:221,columnNumber:21},this),!(t!=null&&t.showWindowsBtn)&&i(o,{icon:i(J,{},void 0,!1,{fileName:a,lineNumber:224,columnNumber:35},this),title:r("exit"),onClick:()=>p(H.ExitButton)},void 0,!1,{fileName:a,lineNumber:223,columnNumber:25},this),t!=null&&t.showWindowsBtn?null:i(v,{},void 0,!1,{fileName:a,lineNumber:229,columnNumber:58},this),i(o,{icon:s?i(K,{},void 0,!1,{fileName:a,lineNumber:231,columnNumber:52},this):i(X,{},void 0,!1,{fileName:a,lineNumber:231,columnNumber:72},this),title:r(s?"side-panel.hide":"side-panel.show"),onClick:()=>{C(l=>!l),m.setRightSideClose(s)}},void 0,!1,{fileName:a,lineNumber:230,columnNumber:21},this),(t==null?void 0:t.showWindowsBtn)&&i(v,{},void 0,!1,{fileName:a,lineNumber:238,columnNumber:52},this)]},void 0,!0)}function R(){return i(Y,{chatSlot:i(Z,{classRoomStore:e,maxSpeakingUsers:16},void 0,!1,{fileName:a,lineNumber:247,columnNumber:25},this),isShow:s,isVideoOn:!1,videoSlot:null},void 0,!1,{fileName:a,lineNumber:245,columnNumber:17},this)}function x(l){const n=e.users.cachedUsers.get(l);return i(b,{avatarUser:n,isAvatarUserCreator:!1,isCreator:e.isCreator,rtcAvatar:n&&e.rtc.getAvatar(n.rtcUID),small:!0,updateDeviceState:(I,k,w)=>{var f;const D=m.isWritable||!n||n.userUUID===e.ownerUUID||n.userUUID!==((f=e.users.currentUser)==null?void 0:f.userUUID)?w:n.mic;e.updateDeviceState(I,k,D)},userUUID:e.userUUID},l,!1,{fileName:a,lineNumber:262,columnNumber:17},this)}}));export{Ue as SmallClassPage,Ue as default};
//# sourceMappingURL=index.dac19432.js.map
