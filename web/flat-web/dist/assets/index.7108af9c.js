import{q as e,a$ as G,l as d,b6 as ee,J as M,ax as ae,aC as ue,aF as me,bp as ce,aA as C,b5 as c,y as de,dt as Ne,cV as he,s as pe,by as J,bb as ve}from"./index.2c6da8be.js";import{U as fe}from"./UserSettingLayoutContainer.9f9bd521.js";import{b as Q,d as be,S as W,D as z,c as ge,s as we,f as Ce,g as I,e as ye,h as ke,i as Ue,u as Le}from"./hooks.abbfb16c.js";import{S as xe}from"./SVGMore.65c3b12e.js";import{u as P}from"./lifecycle.f2fa1867.js";import{W as le}from"./index.a0b57414.js";import{e as ie}from"./routes.b857aab2.js";import{T as te}from"./Table.52474241.js";import"./SVGCircleInfoOutlined.5c155075.js";import"./use-login-check.f8f50fa4.js";var X="/Users/honey/GithubRep/flat/packages/flat-components/src/components/FlatIcons/icons/SVGCirclePlusFilled.tsx";const oe=({active:t,className:a="",...o})=>e("svg",{className:`${a} flat-icon ${t?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:e("path",{className:"flat-icon-fill-color",clipRule:"evenodd",d:"M12 3.375a8.625 8.625 0 1 0 0 17.25 8.625 8.625 0 0 0 0-17.25Zm.625 8H16v1.25h-3.375V16h-1.25v-3.375H8v-1.25h3.375V8h1.25v3.375Z",fill:"#5D6066",fillRule:"evenodd"},void 0,!1,{fileName:X,lineNumber:20,columnNumber:13},void 0)},void 0,!1,{fileName:X,lineNumber:11,columnNumber:9},void 0);var V="/Users/honey/GithubRep/flat/packages/flat-components/src/components/FlatIcons/icons/SVGCopy.tsx";const Se=({active:t,className:a="",...o})=>e("svg",{className:`${a} flat-icon ${t?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[e("path",{className:"flat-icon-fill-color",d:"m9 20-.442.442a.625.625 0 0 0 .442.183V20Zm-4-4h-.625c0 .166.066.325.183.442L5 16ZM17 6h.625A.625.625 0 0 0 17 5.375V6Zm-2 13.375H9v1.25h6v-1.25Zm-5.558.183-4-4-.884.884 4 4 .884-.884ZM5.625 16V8h-1.25v8h1.25ZM7 6.625h10v-1.25H7v1.25ZM16.375 6v12h1.25V6h-1.25ZM5.625 8c0-.76.616-1.375 1.375-1.375v-1.25A2.625 2.625 0 0 0 4.375 8h1.25ZM15 20.625A2.625 2.625 0 0 0 17.625 18h-1.25c0 .76-.616 1.375-1.375 1.375v1.25Z",fill:"#5D6066"},void 0,!1,{fileName:V,lineNumber:16,columnNumber:13},void 0),e("path",{className:"flat-icon-stroke-color",d:"M5 16h4v4",stroke:"#5D6066",strokeLinejoin:"round",strokeWidth:"1.25"},void 0,!1,{fileName:V,lineNumber:21,columnNumber:13},void 0),e("path",{className:"flat-icon-fill-color",d:"M19.625 18V6h-1.25v12h1.25ZM17 3.375H7v1.25h10v-1.25ZM19.625 6A2.625 2.625 0 0 0 17 3.375v1.25c.76 0 1.375.616 1.375 1.375h1.25Z",fill:"#5D6066"},void 0,!1,{fileName:V,lineNumber:28,columnNumber:13},void 0)]},void 0,!0,{fileName:V,lineNumber:7,columnNumber:9},void 0);var K="/Users/honey/GithubRep/flat/packages/flat-components/src/components/FlatIcons/icons/SVGEdit.tsx";const Re=({active:t,className:a="",...o})=>e("svg",{className:`${a} flat-icon ${t?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...o,children:[e("path",{className:"flat-icon-fill-color",d:"M18.375 12v5h1.25v-5h-1.25ZM17 18.375H7v1.25h10v-1.25ZM5.625 17V7h-1.25v10h1.25ZM7 5.625h5v-1.25H7v1.25ZM5.625 7c0-.76.616-1.375 1.375-1.375v-1.25A2.625 2.625 0 0 0 4.375 7h1.25ZM7 18.375c-.76 0-1.375-.616-1.375-1.375h-1.25A2.625 2.625 0 0 0 7 19.625v-1.25ZM18.375 17c0 .76-.616 1.375-1.375 1.375v1.25A2.625 2.625 0 0 0 19.625 17h-1.25Z",fill:"#5D6066"},void 0,!1,{fileName:K,lineNumber:16,columnNumber:13},void 0),e("path",{className:"flat-icon-stroke-color",d:"m19 5-7 7",stroke:"#5D6066",strokeLinejoin:"round",strokeWidth:"1.25"},void 0,!1,{fileName:K,lineNumber:21,columnNumber:13},void 0)]},void 0,!0,{fileName:K,lineNumber:7,columnNumber:9},void 0);var p="/Users/honey/GithubRep/flat/packages/flat-pages/src/UserSettingPage/OAuthPage/OAuthList.tsx";const Ae=({navigate:t})=>{const a=G(),o=P(),[u,s]=d.exports.useState(null);d.exports.useEffect(()=>{o(Q(1,50)).then(s)},[o]);const v=d.exports.useCallback(async(N,f)=>{N==="revoke"&&ee.confirm({content:a("delete-oauth-tips",{appName:f.appName}),onOk:async()=>{await o(be(f.oauthUUID)),await o(Q(1,50)).then(s)}})},[o,a]);return e("section",{className:"oauth-list",children:[e("h3",{className:"oauth-list-header",children:[e("span",{className:"oauth-list-title",children:a("oauth-app-name")},void 0,!1,{fileName:p,lineNumber:39,columnNumber:17},void 0),e(M,{onClick:()=>t("new"),children:a("create-oauth-app")},void 0,!1,{fileName:p,lineNumber:40,columnNumber:17},void 0)]},void 0,!0,{fileName:p,lineNumber:38,columnNumber:13},void 0),u===null?e("div",{className:"oauth-list-loading",children:e(le,{indicator:e(ae,{spin:!0},void 0,!1,{fileName:p,lineNumber:44,columnNumber:38},void 0)},void 0,!1,{fileName:p,lineNumber:44,columnNumber:21},void 0)},void 0,!1,{fileName:p,lineNumber:43,columnNumber:17},void 0):u.length===0?e("div",{className:"oauth-list-empty",children:a("no-data")},void 0,!1,{fileName:p,lineNumber:47,columnNumber:17},void 0):e("ul",{className:"oauth-list-table",children:u.map(N=>e("li",{className:"oauth-list-item",children:[e("img",{alt:"logo",className:"oauth-list-item-logo",src:N.logoURL},void 0,!1,{fileName:p,lineNumber:52,columnNumber:29},void 0),e("a",{className:"oauth-list-item-name",onClick:()=>t("edit",N.oauthUUID),children:N.appName},void 0,!1,{fileName:p,lineNumber:53,columnNumber:29},void 0),e(ue,{overlay:e(me,{items:[{key:"revoke",label:a("delete-app"),className:"oauth-list-item-revoke"}],onClick:f=>v(f.key,N)},void 0,!1,{fileName:p,lineNumber:61,columnNumber:37},void 0),placement:"bottomRight",trigger:["click"],children:e("button",{className:"oauth-list-item-more",children:e(xe,{},void 0,!1,{fileName:p,lineNumber:76,columnNumber:37},void 0)},void 0,!1,{fileName:p,lineNumber:75,columnNumber:33},void 0)},void 0,!1,{fileName:p,lineNumber:59,columnNumber:29},void 0)]},N.oauthUUID,!0,{fileName:p,lineNumber:51,columnNumber:25},void 0))},void 0,!1,{fileName:p,lineNumber:49,columnNumber:17},void 0)]},void 0,!0,{fileName:p,lineNumber:37,columnNumber:9},void 0)};function D(t){if(!t.startsWith("https://"))return!1;try{return new URL(t),!0}catch{return!1}}var n="/Users/honey/GithubRep/flat/packages/flat-pages/src/UserSettingPage/OAuthPage/NewOAuth.tsx";function se(){const t=G(),a=d.exports.useMemo(()=>[{dataIndex:"scope",title:t("oauth-app-scope")},{dataIndex:"desc",title:t("oauth-app-desc")}],[t]),o=d.exports.useMemo(()=>[{scope:z.UserAvatarRead,desc:t("oauth-scope-user-avatar-read")},{scope:z.UserNameRead,desc:t("oauth-scope-user-name-read")},{scope:z.UserUUIDRead,desc:t("oauth-scope-user-uuid-read")}],[t]);return{scopesColumns:a,scopesDataSource:o}}const De=({navigate:t})=>{const a=G(),o=P(),u=ce(),[s,v]=d.exports.useState(""),[N,f]=d.exports.useState(""),[y,m]=d.exports.useState(""),[h,O]=d.exports.useState(""),[w,L]=d.exports.useState([]),[x,T]=d.exports.useState([]),[_,Z]=d.exports.useState(!1),{scopesColumns:H,scopesDataSource:$}=se(),q=r=>{const g=w.slice();g.splice(r,1),L(g)},j=()=>{if(!h){c.error(a("oauth-missing-callback-url"));return}if(!D(h)){c.error(a("oauth-invalid-callback-url"));return}L([...w,h]),O("")},S=(r,g)=>{const U=w.slice();U[r]=g,L(U)},E=async()=>{if(!s){c.error(a("oauth-missing-app-name"));return}if(!N){c.error(a("oauth-missing-app-desc"));return}if(!y){c.error(a("oauth-missing-homepage-url"));return}if(!D(y)){c.error(a("oauth-invalid-homepage-url"));return}if(w.length===0){c.error(a("oauth-missing-callbacks-url"));return}if(w.some(r=>!D(r))){c.error(a("oauth-invalid-callback-url"));return}if(x.length===0){c.error(a("oauth-missing-scopes"));return}Z(!0);try{const g=await o(ge({appName:s,appDesc:N,homepageURL:y,callbacksURL:w,scopes:x}));t("edit",g.oauthUUID)}catch(r){Z(!1),ie(r)}};return e("section",{className:"new-oauth",children:[e("h1",{className:"new-oauth-title",children:a("create-oauth-app")},void 0,!1,{fileName:n,lineNumber:129,columnNumber:13},void 0),e("label",{className:"new-oauth-subtitle is-required",htmlFor:"new-oauth-app-name",children:a("oauth-app-name")},void 0,!1,{fileName:n,lineNumber:130,columnNumber:13},void 0),e(C,{autoComplete:"off",className:"new-oauth-input",id:"new-oauth-app-name",maxLength:20,placeholder:a("oauth-text-placeholder"),value:s,onChange:r=>v(r.target.value)},void 0,!1,{fileName:n,lineNumber:133,columnNumber:13},void 0),e("label",{className:"new-oauth-subtitle is-required",htmlFor:"new-oauth-homepage-url",children:a("oauth-homepage-url")},void 0,!1,{fileName:n,lineNumber:142,columnNumber:13},void 0),e(C,{autoComplete:"off",className:"new-oauth-input",id:"new-oauth-homepage-url",maxLength:100,placeholder:a("oauth-homepage-url-desc"),value:y,onChange:r=>m(r.target.value)},void 0,!1,{fileName:n,lineNumber:145,columnNumber:13},void 0),e("label",{className:"new-oauth-subtitle is-required",htmlFor:"new-oauth-app-desc",children:a("oauth-app-description")},void 0,!1,{fileName:n,lineNumber:154,columnNumber:13},void 0),e(C.TextArea,{className:"new-oauth-input new-oauth-textarea",id:"new-oauth-app-desc",maxLength:300,placeholder:a("oauth-text-placeholder"),rows:4,value:N,onChange:r=>f(r.target.value)},void 0,!1,{fileName:n,lineNumber:157,columnNumber:13},void 0),e("h2",{className:"new-oauth-subtitle is-required",children:a("oauth-callback-url")},void 0,!1,{fileName:n,lineNumber:166,columnNumber:13},void 0),w.map((r,g)=>e("div",{className:"new-oauth-input-wrapper",children:[e(C,{autoComplete:"off",className:"new-oauth-input",value:r,onChange:U=>S(g,U.target.value)},void 0,!1,{fileName:n,lineNumber:169,columnNumber:21},void 0),e("button",{className:"new-oauth-input-btn new-oauth-input-delete",title:a("delete"),onClick:()=>q(g),children:e(W,{},void 0,!1,{fileName:n,lineNumber:180,columnNumber:25},void 0)},void 0,!1,{fileName:n,lineNumber:175,columnNumber:21},void 0)]},g,!0,{fileName:n,lineNumber:168,columnNumber:17},void 0)),w.length<5&&e("div",{className:"new-oauth-input-wrapper",children:[e(C,{autoComplete:"off",className:"new-oauth-input",value:h,onChange:r=>O(r.target.value)},void 0,!1,{fileName:n,lineNumber:186,columnNumber:21},void 0),e("button",{className:"new-oauth-input-btn new-oauth-input-add",title:a("add"),onClick:j,children:e(oe,{},void 0,!1,{fileName:n,lineNumber:197,columnNumber:25},void 0)},void 0,!1,{fileName:n,lineNumber:192,columnNumber:21},void 0)]},void 0,!0,{fileName:n,lineNumber:185,columnNumber:17},void 0),e("h2",{className:"new-oauth-subtitle is-required",children:a("oauth-scopes")},void 0,!1,{fileName:n,lineNumber:201,columnNumber:13},void 0),e(te,{className:"new-oauth-table",columns:H,dataSource:$,locale:{emptyText:a("no-data")},pagination:!1,rowKey:"scope",rowSelection:{type:"checkbox",selectedRowKeys:x,onChange:T}},void 0,!1,{fileName:n,lineNumber:202,columnNumber:13},void 0),e("div",{className:"new-oauth-action",children:[e(M,{onClick:()=>u.goBack(),children:a("cancel")},void 0,!1,{fileName:n,lineNumber:218,columnNumber:17},void 0),e(M,{loading:_,type:"primary",onClick:E,children:a("oauth-register-app")},void 0,!1,{fileName:n,lineNumber:219,columnNumber:17},void 0)]},void 0,!0,{fileName:n,lineNumber:217,columnNumber:13},void 0)]},void 0,!0,{fileName:n,lineNumber:128,columnNumber:9},void 0)},Y="data:image/svg+xml;charset=utf8,%3csvg width='48' height='48' viewBox='0 0 48 48' fill='none' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' clip-rule='evenodd' d='M36.5401 12.4227C32.9766 8.85912 27.1989 8.85912 23.6354 12.4227C20.9903 15.0677 20.3073 18.9342 21.5916 22.2107C21.7185 22.5345 21.6416 22.9028 21.3956 23.1487L9.75 34.7944V39.2138H14.1694L15.8471 37.5361L16.5023 34.2603C16.5715 33.914 16.8423 33.6432 17.1887 33.5739L20.4644 32.9188L22.3984 30.9848L25.8155 27.5677C26.0614 27.3218 26.4296 27.2449 26.7534 27.3717C30.0296 28.6552 33.8954 27.9721 36.5401 25.3273C40.1036 21.7638 40.1036 15.9862 36.5401 12.4227ZM22.398 11.1852C26.6449 6.93826 33.5306 6.93826 37.7775 11.1852C42.0245 15.4322 42.0245 22.3178 37.7775 26.5648C34.7692 29.5731 30.4383 30.4493 26.6601 29.198L23.6359 32.2222L21.5145 34.3436C21.3924 34.4657 21.2368 34.549 21.0674 34.5828L18.1039 35.1755L17.5112 38.1391C17.4773 38.3085 17.394 38.464 17.2719 38.5862L15.1506 40.7075C14.9865 40.8716 14.7639 40.9638 14.5319 40.9638H8.875C8.39175 40.9638 8 40.572 8 40.0888V34.4319C8 34.1999 8.09219 33.9773 8.25628 33.8132L19.7653 22.3042C18.5132 18.5257 19.3893 14.1939 22.398 11.1852ZM30.8832 18.0802C30.4439 17.6409 29.7316 17.6409 29.2923 18.0802C28.8529 18.5196 28.8529 19.2319 29.2923 19.6712C29.7316 20.1106 30.4439 20.1106 30.8832 19.6712C31.3226 19.2319 31.3226 18.5196 30.8832 18.0802ZM28.0548 16.8428C29.1776 15.7201 30.9979 15.7201 32.1207 16.8428C33.2434 17.9656 33.2434 19.7859 32.1207 20.9087C30.9979 22.0314 29.1776 22.0314 28.0548 20.9087C26.9321 19.7859 26.9321 17.9656 28.0548 16.8428ZM23.8128 23.913L16.7417 30.984L17.9791 32.2215L25.0502 25.1504L23.8128 23.913Z' fill='%235D6066'/%3e %3c/svg%3e";var R="/Users/honey/GithubRep/flat/packages/flat-pages/src/UserSettingPage/OAuthPage/UploadLogo.tsx";const Me=({logoURL:t,onUpload:a})=>{const o=P(),[u,s]=d.exports.useState(!1),v=async N=>{const f=(N.target.files||[])[0];f&&a&&(s(!0),await o(a(f).catch(console.error)),s(!1))};return e("div",{className:de("edit-oauth-logo",{"is-loading":u}),children:[e("input",{accept:".png,.jpg,.jpeg",className:"edit-oauth-logo-input",type:"file",onChange:v},void 0,!1,{fileName:R,lineNumber:36,columnNumber:13},void 0),e("img",{alt:"logo",className:"edit-oauth-logo-img",src:t},void 0,!1,{fileName:R,lineNumber:42,columnNumber:13},void 0),e("div",{className:"edit-oauth-logo-btn",children:e(Re,{},void 0,!1,{fileName:R,lineNumber:44,columnNumber:17},void 0)},void 0,!1,{fileName:R,lineNumber:43,columnNumber:13},void 0)]},void 0,!0,{fileName:R,lineNumber:31,columnNumber:9},void 0)},Oe=5242880;async function Ze(t,a,o){if(a.size>=Oe)throw c.info(o("upload-logo-size-limit")),new Error("upload logo size limit");const u=await we({fileName:a.name,fileSize:a.size,oauthUUID:t}),s=new FormData,v=encodeURIComponent(a.name);s.append("key",u.ossFilePath),s.append("name",a.name),s.append("policy",u.policy),s.append("OSSAccessKeyId",Ne.accessKey),s.append("success_action_status","200"),s.append("callback",""),s.append("signature",u.signature),s.append("Content-Disposition",`attachment; filename="${v}"; filename*=UTF-8''${v}`),s.append("file",a),await he.post(u.ossDomain,s,{headers:{"Content-Type":"multipart/form-data"}}),await Ce({oauthUUID:t,fileUUID:u.fileUUID})}var l="/Users/honey/GithubRep/flat/packages/flat-pages/src/UserSettingPage/OAuthPage/EditOAuth.tsx";const Fe=({oauthUUID:t})=>{const a=G(),o=P(),[u,s]=d.exports.useState(""),[v,N]=d.exports.useState(""),[f,y]=d.exports.useState(""),[m,h]=d.exports.useState(null),[O,w]=d.exports.useState(!1),{scopesColumns:L,scopesDataSource:x}=se();d.exports.useEffect(()=>{o(I(t)).then(h)},[t,o]);const T=async()=>{const{secretUUID:i,clientSecret:b}=await o(ye(t));s(i),N(b),await o(I(t)).then(h)},_=async()=>{v&&(await navigator.clipboard.writeText(v),c.success(a("copy-success")))},Z=async i=>{ee.confirm({content:a("oauth-delete-secret-confirm"),onOk:async()=>{await o(ke(i)),await o(I(t)).then(h)}})};if(m===null)return e("section",{className:"edit-oauth",children:e(le,{indicator:e(ae,{spin:!0},void 0,!1,{fileName:l,lineNumber:68,columnNumber:34},void 0)},void 0,!1,{fileName:l,lineNumber:68,columnNumber:17},void 0)},void 0,!1,{fileName:l,lineNumber:67,columnNumber:13},void 0);const H=async i=>{try{await Ze(t,i,a),await o(I(t)).then(h)}catch(b){throw c.info(a("upload-logo-failed")),b}},$=i=>{h({...m,appName:i})},q=i=>{h({...m,homepageURL:i})},j=i=>{h({...m,appDesc:i})},S=m.scopes,E=i=>{h({...m,scopes:i})},r=m.callbacksURL,g=()=>{f&&(h({...m,callbacksURL:[...r,f]}),y(""))},U=i=>{h({...m,callbacksURL:r.filter((b,k)=>k!==i)})},re=(i,b)=>{r[i]=b,h({...m,callbacksURL:r})},ne=async()=>{const{appName:i,appDesc:b,homepageURL:k,callbacksURL:B}=m;if(!i){c.error(a("oauth-missing-app-name"));return}if(!b){c.error(a("oauth-missing-app-desc"));return}if(!k){c.error(a("oauth-missing-homepage-url"));return}if(!D(k)){c.error(a("oauth-invalid-homepage-url"));return}if(B.length===0){c.error(a("oauth-missing-callbacks-url"));return}if(B.some(F=>!D(F))){c.error(a("oauth-invalid-callback-url"));return}if(S.length===0){c.error(a("oauth-missing-scopes"));return}w(!0);try{await o(Ue(t,{appName:i,appDesc:b,homepageURL:k,callbacksURL:B,scopes:S})),c.success(a("oauth-update-success"))}catch(F){ie(F)}finally{w(!1)}};return e("section",{className:"edit-oauth",children:[e("h1",{className:"edit-oauth-title",children:m.appName},void 0,!1,{fileName:l,lineNumber:164,columnNumber:13},void 0),e("h2",{className:"edit-oauth-subtitle",children:a("client-id")},void 0,!1,{fileName:l,lineNumber:165,columnNumber:13},void 0),e("p",{className:"edit-oauth-content",style:{userSelect:"text"},children:m.clientID},void 0,!1,{fileName:l,lineNumber:166,columnNumber:13},void 0),e("h2",{className:"edit-oauth-subtitle",children:a("client-secrets")},void 0,!1,{fileName:l,lineNumber:169,columnNumber:13},void 0),e("p",{className:"edit-oauth-content",children:a("client-secret-desc")},void 0,!1,{fileName:l,lineNumber:170,columnNumber:13},void 0),e("div",{className:"edit-oauth-new-secret-wrapper",children:e(M,{className:"edit-oauth-new-secret",size:"small",type:"primary",onClick:T,children:a("create-client-secret")},void 0,!1,{fileName:l,lineNumber:172,columnNumber:17},void 0)},void 0,!1,{fileName:l,lineNumber:171,columnNumber:13},void 0),u&&e(pe,{children:[e("p",{className:"edit-oauth-copy-secret-tip",children:a("oauth-copy-secret-tip")},void 0,!1,{fileName:l,lineNumber:183,columnNumber:21},void 0),e("div",{className:"edit-oauth-secret-wrapper is-new","data-secret-uuid":u,children:[e("div",{className:"edit-oauth-secret-icon",children:e("img",{alt:"key",src:Y},void 0,!1,{fileName:l,lineNumber:186,columnNumber:29},void 0)},void 0,!1,{fileName:l,lineNumber:185,columnNumber:25},void 0),e("div",{className:"edit-oauth-secret",children:[e("div",{className:"edit-oauth-secret-row",children:[e("span",{className:"edit-oauth-secret-content",style:{userSelect:"text"},children:v},void 0,!1,{fileName:l,lineNumber:190,columnNumber:33},void 0),e("button",{className:"edit-oauth-secret-btn",onClick:_,children:e(Se,{},void 0,!1,{fileName:l,lineNumber:200,columnNumber:37},void 0)},void 0,!1,{fileName:l,lineNumber:196,columnNumber:33},void 0)]},void 0,!0,{fileName:l,lineNumber:189,columnNumber:29},void 0),e("div",{className:"edit-oauth-secret-row",children:e("span",{children:[a("created-at"),": ",J(new Date,"yyyy-MM-dd HH:mm")]},void 0,!0,{fileName:l,lineNumber:204,columnNumber:33},void 0)},void 0,!1,{fileName:l,lineNumber:203,columnNumber:29},void 0)]},void 0,!0,{fileName:l,lineNumber:188,columnNumber:25},void 0)]},void 0,!0,{fileName:l,lineNumber:184,columnNumber:21},void 0)]},void 0,!0),m.secrets.filter(i=>i.secretUUID!==u).map(i=>e("div",{className:"edit-oauth-secret-wrapper","data-secret-uuid":i.secretUUID,children:[e("div",{className:"edit-oauth-secret-icon",children:e("img",{alt:"key",src:Y},void 0,!1,{fileName:l,lineNumber:221,columnNumber:29},void 0)},void 0,!1,{fileName:l,lineNumber:220,columnNumber:25},void 0),e("div",{className:"edit-oauth-secret",children:[e("div",{className:"edit-oauth-secret-row",children:e("span",{className:"edit-oauth-secret-content",children:i.clientSecret},void 0,!1,{fileName:l,lineNumber:225,columnNumber:33},void 0)},void 0,!1,{fileName:l,lineNumber:224,columnNumber:29},void 0),e("div",{className:"edit-oauth-secret-row",children:e("span",{children:[a("created-at"),": ",J(i.createdAt,"yyyy-MM-dd HH:mm")]},void 0,!0,{fileName:l,lineNumber:228,columnNumber:33},void 0)},void 0,!1,{fileName:l,lineNumber:227,columnNumber:29},void 0)]},void 0,!0,{fileName:l,lineNumber:223,columnNumber:25},void 0),e("div",{className:"edit-oauth-secret-action",children:e("button",{className:"edit-oauth-delete-btn",onClick:()=>Z(i.secretUUID),children:e(W,{},void 0,!1,{fileName:l,lineNumber:238,columnNumber:33},void 0)},void 0,!1,{fileName:l,lineNumber:234,columnNumber:29},void 0)},void 0,!1,{fileName:l,lineNumber:233,columnNumber:25},void 0)]},i.secretUUID,!0,{fileName:l,lineNumber:215,columnNumber:21},void 0)),e("hr",{className:"edit-oauth-splitter"},void 0,!1,{fileName:l,lineNumber:243,columnNumber:13},void 0),e("h2",{className:"edit-oauth-subtitle",children:a("oauth-app-logo")},void 0,!1,{fileName:l,lineNumber:244,columnNumber:13},void 0),e(Me,{logoURL:m.logoURL,onUpload:H},void 0,!1,{fileName:l,lineNumber:245,columnNumber:13},void 0),e("hr",{className:"edit-oauth-splitter"},void 0,!1,{fileName:l,lineNumber:246,columnNumber:13},void 0),e("label",{className:"edit-oauth-subtitle is-required",htmlFor:"edit-oauth-app-name",children:a("oauth-app-name")},void 0,!1,{fileName:l,lineNumber:247,columnNumber:13},void 0),e(C,{className:"edit-oauth-input",id:"edit-oauth-app-name",value:m.appName,onChange:i=>$(i.target.value)},void 0,!1,{fileName:l,lineNumber:250,columnNumber:13},void 0),e("label",{className:"edit-oauth-subtitle is-required",htmlFor:"edit-oauth-homepage-url",children:a("oauth-homepage-url")},void 0,!1,{fileName:l,lineNumber:256,columnNumber:13},void 0),e(C,{className:"edit-oauth-input",id:"edit-oauth-homepage-url",value:m.homepageURL,onChange:i=>q(i.target.value)},void 0,!1,{fileName:l,lineNumber:259,columnNumber:13},void 0),e("label",{className:"edit-oauth-subtitle is-required",htmlFor:"edit-oauth-app-desc",children:a("oauth-app-description")},void 0,!1,{fileName:l,lineNumber:265,columnNumber:13},void 0),e(C.TextArea,{className:"edit-oauth-input edit-oauth-textarea",id:"edit-oauth-app-desc",rows:4,value:m.appDesc,onChange:i=>j(i.target.value)},void 0,!1,{fileName:l,lineNumber:268,columnNumber:13},void 0),e("h2",{className:"edit-oauth-subtitle is-required",children:a("oauth-scopes")},void 0,!1,{fileName:l,lineNumber:275,columnNumber:13},void 0),e(te,{className:"edit-oauth-table",columns:L,dataSource:x,locale:{emptyText:a("no-data")},pagination:!1,rowKey:"scope",rowSelection:{type:"checkbox",selectedRowKeys:S,onChange:E}},void 0,!1,{fileName:l,lineNumber:276,columnNumber:13},void 0),e("h2",{className:"edit-oauth-subtitle is-required",children:a("oauth-callback-url")},void 0,!1,{fileName:l,lineNumber:291,columnNumber:13},void 0),r.map((i,b)=>e("div",{className:"edit-oauth-input-wrapper",children:[e(C,{className:"edit-oauth-input",value:i,onChange:k=>re(b,k.target.value)},void 0,!1,{fileName:l,lineNumber:294,columnNumber:21},void 0),e("button",{className:"edit-oauth-input-btn edit-oauth-input-delete",title:a("delete"),onClick:()=>U(b),children:e(W,{},void 0,!1,{fileName:l,lineNumber:304,columnNumber:25},void 0)},void 0,!1,{fileName:l,lineNumber:299,columnNumber:21},void 0)]},b,!0,{fileName:l,lineNumber:293,columnNumber:17},void 0)),e("div",{className:"edit-oauth-input-wrapper",children:[e(C,{className:"edit-oauth-input",value:f,onChange:i=>y(i.target.value)},void 0,!1,{fileName:l,lineNumber:309,columnNumber:17},void 0),e("button",{className:"edit-oauth-input-btn edit-oauth-input-add",title:a("add"),onClick:g,children:e(oe,{},void 0,!1,{fileName:l,lineNumber:319,columnNumber:21},void 0)},void 0,!1,{fileName:l,lineNumber:314,columnNumber:17},void 0)]},void 0,!0,{fileName:l,lineNumber:308,columnNumber:13},void 0),e("div",{className:"edit-oauth-action",children:e(M,{loading:O,type:"primary",onClick:ne,children:a("oauth-update-settings")},void 0,!1,{fileName:l,lineNumber:323,columnNumber:17},void 0)},void 0,!1,{fileName:l,lineNumber:322,columnNumber:13},void 0)]},void 0,!0,{fileName:l,lineNumber:163,columnNumber:9},void 0)};var A="/Users/honey/GithubRep/flat/packages/flat-pages/src/UserSettingPage/OAuthPage/index.tsx";const Ee=ve(function(){const[a,o]=Le(),u=d.exports.useCallback((N,f)=>{o({p:N==="index"?void 0:N,q:f})},[o]),s=a.get("p"),v=a.get("q");return e(fe,{children:e("div",{className:"oauth-page",children:s==="new"?e(De,{navigate:u},void 0,!1,{fileName:A,lineNumber:30,columnNumber:21},this):s==="edit"&&v?e(Fe,{oauthUUID:v},void 0,!1,{fileName:A,lineNumber:32,columnNumber:21},this):e(Ae,{navigate:u},void 0,!1,{fileName:A,lineNumber:34,columnNumber:21},this)},void 0,!1,{fileName:A,lineNumber:28,columnNumber:13},this)},void 0,!1,{fileName:A,lineNumber:27,columnNumber:9},this)});export{Ee as OAuthPage,Ee as default};
//# sourceMappingURL=index.7108af9c.js.map
